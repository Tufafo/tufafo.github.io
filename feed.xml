<?xml version="1.0" encoding="utf-8"?><feed xmlns="http://www.w3.org/2005/Atom" ><generator uri="https://jekyllrb.com/" version="4.3.3">Jekyll</generator><link href="/feed.xml" rel="self" type="application/atom+xml" /><link href="/" rel="alternate" type="text/html" /><updated>2024-05-23T21:16:35+08:00</updated><id>/feed.xml</id><title type="html">ç”²ä¸</title><author><name>ç”²ä¸</name></author><entry><title type="html">æµ‹è¯•</title><link href="/%E6%B5%8B%E8%AF%95/" rel="alternate" type="text/html" title="æµ‹è¯•" /><published>2024-04-29T00:00:00+08:00</published><updated>2024-04-29T00:00:00+08:00</updated><id>/%E6%B5%8B%E8%AF%95</id><content type="html" xml:base="/%E6%B5%8B%E8%AF%95/"><![CDATA[<p>This is a test of elisp.</p>

<h2 id="test">test</h2>

<div class="language-lisp highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="p">(</span><span class="nb">+</span> <span class="mi">2</span> <span class="mi">3</span><span class="p">)</span>
<span class="c1">;;=&gt;5</span>
</code></pre></div></div>

<h2 id="è¿™æ˜¯ä¸€ä»½æµ‹è¯•æ–‡æ¡£">è¿™æ˜¯ä¸€ä»½æµ‹è¯•æ–‡æ¡£</h2>

<h2 id="æµ‹è¯•">æµ‹è¯•</h2>

<p>12312321312</p>]]></content><author><name>ç”²ä¸</name></author><category term="æµ‹è¯•" /><summary type="html"><![CDATA[This is a test of elisp.]]></summary></entry><entry><title type="html">Minioå®è®­</title><link href="/minio%E5%AE%9E%E8%AE%AD/" rel="alternate" type="text/html" title="Minioå®è®­" /><published>2024-04-27T00:00:00+08:00</published><updated>2024-04-27T00:00:00+08:00</updated><id>/minio%E5%AE%9E%E8%AE%AD</id><content type="html" xml:base="/minio%E5%AE%9E%E8%AE%AD/"><![CDATA[<h2 id="ç›®æ ‡">ç›®æ ‡</h2>

<ul>
  <li>ç†Ÿæ‚‰minioçš„é…ç½®è¿‡ç¨‹å’Œå®¢æˆ·ç«¯æ“ä½œ</li>
  <li>é€šè¿‡é¢å‘elispçš„å‘½ä»¤å°è£…æ¥æ¨¡æ‹Ÿhbaseä»¥å®ç°å®è®­è¦æ±‚ã€‚</li>
</ul>

<h2 id="ç¯å¢ƒç®€ä»‹">ç¯å¢ƒç®€ä»‹</h2>

<p>ç”±äºä¹‹å‰é…ç½®hbaseé›†ç¾¤ä¸­ï¼Œé›†ç¾¤åœ¨sshdå‘½ä»¤ä¸Šæ¶ˆè€—æµé‡è¿‡é«˜ï¼Œvpsæµé‡è¶…é¢æ¬ è´¹ã€‚ç°ä½¿ç”¨éƒ¨ç½²æˆæœ¬æ›´åŠ ä½å»‰çš„minioå®Œæˆåˆ†å¸ƒå¼å®è®­ä»»åŠ¡ã€‚</p>

<p><img src="/assets/post_images/image-20240420095141618.png" alt="" />
<img src="/assets/post_images/image-20240420095613423.png" alt="" /></p>

<p>MinIO æ˜¯ä¸€ç§é«˜æ€§èƒ½ï¼Œå…¼å®¹S3å¯¹è±¡å­˜å‚¨ã€‚ç‰¹åˆ«æ˜¯å®ƒçš„å®¢æˆ·ç«¯mcå†…ç½®äº†sqlæŸ¥è¯¢æ“ä½œï¼Œä½¿å¾—å¯ä»¥ç›´æ¥åœ¨csvæ–‡ä»¶ä¸­è¿›è¡ŒæŸ¥è¯¢ã€‚</p>

<p>ç¯å¢ƒï¼šcentos7ã€‚</p>

<h2 id="æœåŠ¡å™¨é…ç½®è¿‡ç¨‹">æœåŠ¡å™¨é…ç½®è¿‡ç¨‹</h2>

<h3 id="å•èŠ‚ç‚¹å•ç£ç›˜">å•èŠ‚ç‚¹å•ç£ç›˜</h3>

<ul>
  <li>ä¸‹è½½å¹¶å®‰è£…minio</li>
</ul>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>wget https://dl.min.io/server/minio/release/linux-amd64/archive/minio-20240418190919.0.0-1.x86_64.rpm <span class="nt">-O</span> minio.rpm
<span class="nb">sudo </span>yum <span class="nb">install </span>minio.rpm
</code></pre></div></div>

<ul>
  <li>åˆ›å»ºæ•°æ®æ–‡ä»¶å¤¹</li>
</ul>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nb">mkdir</span> ~/minio
</code></pre></div></div>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>minio server ~/minio <span class="nt">--console-address</span> :9001
</code></pre></div></div>

<p>ä¸€äº›å¸¸ç”¨çš„å‚æ•°ï¼š</p>

<ul>
  <li><code class="language-plaintext highlighter-rouge">--address &lt;address:port&gt;/&lt;:port&gt;</code> æŒ‡å®šapiç«¯å£</li>
  <li><code class="language-plaintext highlighter-rouge">--console-address &lt;address:port&gt;/&lt;:port&gt;</code> æŒ‡å®šwebUIç«¯å£</li>
</ul>

<p>è®¿é—® <code class="language-plaintext highlighter-rouge">&lt;server-ip:9001&gt;</code> ï¼ŒæŸ¥çœ‹<code class="language-plaintext highlighter-rouge">minio</code>ç™»å½•é¡µé¢ã€‚
<img src="/assets/post_images/image-20240427144736126.png" alt="" /></p>

<p>è¾“å…¥è´¦å·å¯†ç ï¼Œé»˜è®¤ï¼š<code class="language-plaintext highlighter-rouge">minioadmin</code>ã€‚</p>

<p>åœ¨ <code class="language-plaintext highlighter-rouge">Administrator-Monitoring-Metrics</code> ç›®å½•ä¸‹å¯ä»¥çœ‹åˆ°å½“å‰å„èŠ‚ç‚¹çš„å·¥ä½œçŠ¶æ€ã€‚</p>

<p><img src="/assets/post_images/image-20240427144850027.png" alt="" /></p>

<h3 id="å•èŠ‚ç‚¹å¤šç£ç›˜">å•èŠ‚ç‚¹å¤šç£ç›˜</h3>

<p>å®‰è£…è¿‡ç¨‹åŒä¸Šï¼Œä½†æ˜¯å¯åŠ¨ä¸åŒã€‚åœ¨linuxä¸­ä¸€èˆ¬é€šè¿‡<code class="language-plaintext highlighter-rouge">mount</code>å‘½ä»¤å°†ç£ç›˜æŒ‚è½½åˆ°æŸç›®å½•ä¸‹ã€‚ç°åœ¨æ–°å»ºå››ä¸ªæ–‡ä»¶å¤¹æ¥ä»£è¡¨ä¸åŒèŠ‚ç‚¹ã€‚</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nb">mkdir</span> ~/minios
<span class="nb">mkdir</span> ~/minios/m1
<span class="nb">mkdir</span> ~/minios/m2
<span class="nb">mkdir</span> ~/minios/m3
<span class="nb">mkdir</span> ~/minios/m4
</code></pre></div></div>

<p>å¯åŠ¨æ—¶ï¼Œåªéœ€è¦å°†å¤šä¸ªèŠ‚ç‚¹çš„åºå·æ”¾åœ¨å¤§æ‹¬å·ä¸­å³å¯ã€‚</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>minio server ~/minios/m<span class="o">{</span>1...4<span class="o">}</span> <span class="nt">--console-address</span> :9001
</code></pre></div></div>

<p>è®¿é—®æœåŠ¡å™¨ <code class="language-plaintext highlighter-rouge">9001</code> ç«¯å£ï¼Œå¯ä»¥çœ‹åˆ°ï¼Œç£ç›˜æ•°ä»ä¸€å¢é•¿ä¸º4ï¼š</p>

<p><img src="/assets/post_images/image-20240427145838228.png" alt="" /></p>

<h2 id="å¤šèŠ‚ç‚¹å¤šç£ç›˜å¤±è´¥">å¤šèŠ‚ç‚¹å¤šç£ç›˜ï¼ˆå¤±è´¥ï¼‰</h2>

<p><code class="language-plaintext highlighter-rouge">minio</code> å®‰è£…åŒä¸Šã€‚</p>

<p>åœ¨å„ä¸ªèŠ‚ç‚¹å¢åŠ æ–°çš„ <code class="language-plaintext highlighter-rouge">hosts</code> æ˜ å°„åˆ° <code class="language-plaintext highlighter-rouge">/etc/hosts</code> æ–‡ä»¶ä¸­ï¼š</p>
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>ip1 n1
ip2 n2
</code></pre></div></div>

<p>åˆ›å»ºæ–‡ä»¶å¤¹ä»£è¡¨ä¸åŒç£ç›˜ï¼š</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>mkdir /data
mkdir /data/data1
mkdir /data/data2
mkdir /data/data3
mkdir /data/data4
</code></pre></div></div>

<p>è®¾ç½®ç¯å¢ƒå˜é‡ï¼š</p>

<ul>
  <li>åœ¨<code class="language-plaintext highlighter-rouge">~/.bashrc</code>ä¸­</li>
</ul>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nb">export </span><span class="nv">MINIO_ACCESS_KEY</span><span class="o">=</span>minioadmin <span class="c"># è®¾ç½®ç”¨æˆ·å</span>
<span class="nb">export </span><span class="nv">MINIO_SECRET_KEY</span><span class="o">=</span>minioadmin <span class="c">#è®¾ç½®å¯†ç </span>
<span class="nb">export </span><span class="nv">CI</span><span class="o">=</span><span class="nb">true</span> <span class="c"># å…è®¸è®¿é—®rootç£ç›˜</span>
<span class="nb">export </span><span class="nv">MINIO_CI_CD</span><span class="o">=</span><span class="nb">true</span> <span class="c"># å…è®¸è®¿é—®rootç£ç›˜</span>
</code></pre></div></div>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nb">source</span> ~/.bashrc
</code></pre></div></div>

<p>åœ¨å„ä¸ªæœåŠ¡å™¨çš„å‘½ä»¤è¡Œä¸­å¯åŠ¨ <code class="language-plaintext highlighter-rouge">minio</code>ï¼š</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>minio server http://n<span class="o">{</span>1...2<span class="o">}</span>:9000/data/data<span class="o">{</span>1...4<span class="o">}</span> 
</code></pre></div></div>

<p>ä¸¤æ¬¡é…ç½®ç»“æœï¼Œç¬¬ä¸€æ¬¡æˆåŠŸè®¿é—®ã€‚åæœåŠ¡å™¨è¿‡æœŸï¼Œæ›´æ¢ç°vpså‚å•†æ‰§è¡ŒåŒæ ·çš„å‘½ä»¤å‡ºç°é”™è¯¯ï¼š</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>WARNING: MINIO_ACCESS_KEY and MINIO_SECRET_KEY are deprecated.
         Please use MINIO_ROOT_USER and MINIO_ROOT_PASSWORD

API: SYSTEM.peers
Time: 07:08:56 UTC 04/27/2024
Error: Expected number of all hosts <span class="o">(</span>2<span class="o">)</span> to be remote +1 <span class="o">(</span>2<span class="o">)</span> <span class="o">(</span><span class="k">*</span>errors.errorString<span class="o">)</span>
       8: internal/logger/logger.go:259:logger.LogIf<span class="o">()</span>
       7: cmd/logging.go:42:cmd.peersLogIf<span class="o">()</span>
       6: cmd/peer-rest-client.go:631:cmd.newPeerRestClients<span class="o">()</span>
       5: cmd/notification.go:1152:cmd.NewNotificationSys<span class="o">()</span>
       4: cmd/server-main.go:400:cmd.initAllSubsystems<span class="o">()</span>
       3: cmd/server-main.go:715:cmd.serverMain.func4<span class="o">()</span>
       2: cmd/server-main.go:512:cmd.bootstrapTrace<span class="o">()</span>
       1: cmd/server-main.go:714:cmd.serverMain<span class="o">()</span>
ERROR Unable to configure server grid RPC services: grid: <span class="nb">local </span>host not found
</code></pre></div></div>

<p>è§£é‡Šï¼š</p>

<p>é”™è¯¯ç›´æ¥åŸå› ï¼Œæ— æ³•é…ç½®æœåŠ¡ç½‘æ ¼çš„è¿œç¨‹è¿‡ç¨‹è°ƒç”¨ï¼ˆRPCï¼‰æœåŠ¡ï¼Œæ— æ³•æ‰¾åˆ°æœ¬åœ°ä¸»æœºã€‚</p>

<p>å¾ˆå¤šVPSå‚å•†ä¼šé™åˆ¶èŠ‚ç‚¹åœ¨å†…ç½‘ä¸­çš„é€šä¿¡ï¼Œç‰¹åˆ«æ˜¯è¿™ç§å»‰ä»·æœåŠ¡å™¨ï¼Œç”šè‡³æ²¡æœ‰ç‹¬ç«‹çš„å…¬ç½‘ipï¼Œåªæœ‰äº”ä¸ªç«¯å£åˆ°å†…ç½‘çš„æ˜ å°„ã€‚</p>

<p><img src="/assets/post_images/image-20240427151348771.png" alt="" /></p>

<p>ç«¯å£æ˜ å°„çš„æ¦‚å¿µå¦‚ä¸‹å›¾æ‰€ç¤ºï¼š</p>

<p><img src="/assets/post_images/image-20240427151517425.png" alt="" /></p>

<p>è¿™æ˜¯æ–°vpsç”µå•†å’Œæ—§vpsç”µå•†åœ¨ç«¯å£ä¸Šçš„æœ€å¤§ä¸åŒã€‚ä½†æ˜¯åœ¨å•ä¸ªèŠ‚ç‚¹é€šè¿‡ <code class="language-plaintext highlighter-rouge">ssh</code> å’Œå…¬ç½‘ipå¯ä»¥è®¿é—®æœ¬èŠ‚ç‚¹æˆ–å¦ä¸€èŠ‚ç‚¹ï¼Œå‡æ— é—®é¢˜ã€‚é‚£ä¹ˆï¼Œå¦‚æœ<strong>æ›´æ¢ä¸ºå†…ç½‘ip</strong>è¿›è¡Œè®¿é—®å¦‚ä½•å‘¢ï¼Ÿ</p>

<p><img src="/assets/post_images/image-20240427152533333.png" alt="" /></p>

<p><img src="/assets/post_images/image-20240427152630076.png" alt="" /></p>

<p>æ›´æ–°ä¸¤ä¸ªèŠ‚ç‚¹ä¸­ <code class="language-plaintext highlighter-rouge">host</code> æ–‡ä»¶ä¸­çš„æ˜ å°„å…³ç³»ã€‚</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>10.41.14.22 N1
10.47.14.21 N2
</code></pre></div></div>

<p>ä½†æ˜¯é‡æ–°å¯åŠ¨ä¾ç„¶å‡ºç°é”™è¯¯ï¼š</p>

<p><img src="/assets/post_images/image-20240427152845650.png" alt="" /></p>

<p>è‡³æ­¤ï¼Œç”±äºå•èŠ‚ç‚¹å¤šç£ç›˜å’Œå•èŠ‚ç‚¹å•ç£ç›˜çš„å·®åˆ«ä¸å¤§ï¼Œæ­¤åç”±å•èŠ‚ç‚¹å¤šç£ç›˜ç¯å¢ƒç»§ç»­è¿›è¡Œå®éªŒã€‚</p>

<p>ä¸è¿‡è¦ä¸»è¦æŠŠè¿›ç¨‹æŒ‚è½½åˆ°åå°ã€‚</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nb">nohup </span>minio server ~/minios/m<span class="o">{</span>1...4<span class="o">}</span> <span class="nt">--console-address</span> :14216 <span class="nt">--address</span> :14215 &amp;
</code></pre></div></div>

<h2 id="å®¢æˆ·ç«¯é…ç½®è¿‡ç¨‹">å®¢æˆ·ç«¯é…ç½®è¿‡ç¨‹</h2>

<h3 id="å‘½ä»¤è¡Œç«¯-mc">å‘½ä»¤è¡Œç«¯ MC</h3>

<p>å®‰è£…</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>wget https://dl.min.io/client/mc/release/linux-amd64/mc
<span class="nb">chmod</span> +x mc
<span class="nb">sudo mv </span>mc /usr/local/bin/mc
</code></pre></div></div>

<p>è®¾ç½®ç”¨æˆ·</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>mc <span class="nb">alias set </span>m1 http://ip:9000 minioadmin minioadmin
</code></pre></div></div>

<p>æ“ä½œï¼š</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>mc <span class="nt">--help</span> æŸ¥çœ‹å‘½ä»¤å¸®åŠ©
</code></pre></div></div>

<p>åŸºæœ¬çš„è·¯å¾„æ ¼å¼æ˜¯ <code class="language-plaintext highlighter-rouge">alias è®¾ç½®çš„ç™»å½•å+æ¡¶å+å¯¹è±¡è·¯å¾„</code> ã€‚</p>

<p>åˆ›å»ºæ¡¶</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>mc mb m1/&lt;bucket-name&gt;
</code></pre></div></div>

<p><img src="/assets/post_images/image-20240427153758844.png" alt="" /></p>

<p>ä¸Šä¼ æ–‡ä»¶</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nb">echo</span> <span class="s2">"I am a good student."</span> <span class="o">&gt;</span> test.txt
mc put test.txt m1/stu
</code></pre></div></div>

<p>æŸ¥çœ‹<code class="language-plaintext highlighter-rouge">stu</code> ç›®å½•ä¸‹çš„æ–‡ä»¶ï¼š</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>mc <span class="nb">ls </span>m1/stu
</code></pre></div></div>

<p><img src="/assets/post_images/image-20240427153959611.png" alt="" /></p>

<p>ä¸‹è½½æ–‡ä»¶</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>mc get m1/stu ./
</code></pre></div></div>

<p>å…¶å®ƒ</p>

<table>
  <thead>
    <tr>
      <th>å‘½ä»¤</th>
      <th>æè¿°</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td><code class="language-plaintext highlighter-rouge">alias</code></td>
      <td>åœ¨é…ç½®æ–‡ä»¶ä¸­ç®¡ç†æœåŠ¡å™¨å‡­æ®</td>
    </tr>
    <tr>
      <td><code class="language-plaintext highlighter-rouge">admin</code></td>
      <td>ç®¡ç†MinIOæœåŠ¡å™¨</td>
    </tr>
    <tr>
      <td><code class="language-plaintext highlighter-rouge">anonymous</code></td>
      <td>ç®¡ç†å¯¹å­˜å‚¨æ¡¶å’Œå¯¹è±¡çš„åŒ¿åè®¿é—®</td>
    </tr>
    <tr>
      <td><code class="language-plaintext highlighter-rouge">batch</code></td>
      <td>ç®¡ç†æ‰¹å¤„ç†ä½œä¸š</td>
    </tr>
    <tr>
      <td><code class="language-plaintext highlighter-rouge">cp</code></td>
      <td>å¤åˆ¶å¯¹è±¡</td>
    </tr>
    <tr>
      <td><code class="language-plaintext highlighter-rouge">cat</code></td>
      <td>æ˜¾ç¤ºå¯¹è±¡å†…å®¹</td>
    </tr>
    <tr>
      <td><code class="language-plaintext highlighter-rouge">diff</code></td>
      <td>åˆ—å‡ºä¸¤ä¸ªå­˜å‚¨æ¡¶ä¹‹é—´å¯¹è±¡åç§°ã€å¤§å°å’Œæ—¥æœŸçš„å·®å¼‚</td>
    </tr>
    <tr>
      <td><code class="language-plaintext highlighter-rouge">du</code></td>
      <td>é€’å½’æ€»ç»“ç£ç›˜ä½¿ç”¨æƒ…å†µ</td>
    </tr>
    <tr>
      <td><code class="language-plaintext highlighter-rouge">encrypt</code></td>
      <td>ç®¡ç†å­˜å‚¨æ¡¶åŠ å¯†é…ç½®</td>
    </tr>
    <tr>
      <td><code class="language-plaintext highlighter-rouge">event</code></td>
      <td>ç®¡ç†å¯¹è±¡é€šçŸ¥</td>
    </tr>
    <tr>
      <td><code class="language-plaintext highlighter-rouge">find</code></td>
      <td>æœç´¢å¯¹è±¡</td>
    </tr>
    <tr>
      <td><code class="language-plaintext highlighter-rouge">get</code></td>
      <td>å°†S3å¯¹è±¡è·å–åˆ°æœ¬åœ°</td>
    </tr>
    <tr>
      <td><code class="language-plaintext highlighter-rouge">head</code></td>
      <td>æ˜¾ç¤ºå¯¹è±¡çš„å‰nè¡Œ</td>
    </tr>
    <tr>
      <td><code class="language-plaintext highlighter-rouge">ilm</code></td>
      <td>ç®¡ç†å­˜å‚¨æ¡¶ç”Ÿå‘½å‘¨æœŸ</td>
    </tr>
    <tr>
      <td><code class="language-plaintext highlighter-rouge">idp</code></td>
      <td>ç®¡ç†MinIOèº«ä»½æä¾›è€…æœåŠ¡å™¨é…ç½®</td>
    </tr>
    <tr>
      <td><code class="language-plaintext highlighter-rouge">license</code></td>
      <td>è®¸å¯è¯ç›¸å…³å‘½ä»¤</td>
    </tr>
    <tr>
      <td><code class="language-plaintext highlighter-rouge">legalhold</code></td>
      <td>ç®¡ç†å¯¹è±¡çš„æ³•å¾‹ä¿ç•™</td>
    </tr>
    <tr>
      <td><code class="language-plaintext highlighter-rouge">ls</code></td>
      <td>åˆ—å‡ºå­˜å‚¨æ¡¶å’Œå¯¹è±¡</td>
    </tr>
    <tr>
      <td><code class="language-plaintext highlighter-rouge">mb</code></td>
      <td>åˆ›å»ºä¸€ä¸ªå­˜å‚¨æ¡¶</td>
    </tr>
    <tr>
      <td><code class="language-plaintext highlighter-rouge">mv</code></td>
      <td>ç§»åŠ¨å¯¹è±¡</td>
    </tr>
    <tr>
      <td><code class="language-plaintext highlighter-rouge">mirror</code></td>
      <td>å°†å¯¹è±¡åŒæ­¥åˆ°è¿œç¨‹ç«™ç‚¹</td>
    </tr>
    <tr>
      <td><code class="language-plaintext highlighter-rouge">od</code></td>
      <td>æµ‹é‡å•ä¸ªæµä¸Šä¼ å’Œä¸‹è½½</td>
    </tr>
    <tr>
      <td><code class="language-plaintext highlighter-rouge">ping</code></td>
      <td>æ‰§è¡Œå­˜æ´»æ€§æ£€æŸ¥</td>
    </tr>
    <tr>
      <td><code class="language-plaintext highlighter-rouge">pipe</code></td>
      <td>å°†æ ‡å‡†è¾“å…¥æµä¼ è¾“åˆ°å¯¹è±¡</td>
    </tr>
    <tr>
      <td><code class="language-plaintext highlighter-rouge">put</code></td>
      <td>å°†å¯¹è±¡ä¸Šä¼ åˆ°å­˜å‚¨æ¡¶</td>
    </tr>
    <tr>
      <td><code class="language-plaintext highlighter-rouge">quota</code></td>
      <td>ç®¡ç†å­˜å‚¨æ¡¶é…é¢</td>
    </tr>
    <tr>
      <td><code class="language-plaintext highlighter-rouge">rm</code></td>
      <td>åˆ é™¤å¯¹è±¡</td>
    </tr>
    <tr>
      <td><code class="language-plaintext highlighter-rouge">retention</code></td>
      <td>ä¸ºå¯¹è±¡è®¾ç½®ä¿ç•™æœŸ</td>
    </tr>
    <tr>
      <td><code class="language-plaintext highlighter-rouge">rb</code></td>
      <td>åˆ é™¤ä¸€ä¸ªå­˜å‚¨æ¡¶</td>
    </tr>
    <tr>
      <td><code class="language-plaintext highlighter-rouge">replicate</code></td>
      <td>é…ç½®æœåŠ¡å™¨ç«¯å­˜å‚¨æ¡¶å¤åˆ¶</td>
    </tr>
    <tr>
      <td><code class="language-plaintext highlighter-rouge">ready</code></td>
      <td>æ£€æŸ¥é›†ç¾¤æ˜¯å¦å°±ç»ª</td>
    </tr>
    <tr>
      <td><code class="language-plaintext highlighter-rouge">sql</code></td>
      <td>åœ¨å¯¹è±¡ä¸Šè¿è¡ŒSQLæŸ¥è¯¢</td>
    </tr>
    <tr>
      <td><code class="language-plaintext highlighter-rouge">stat</code></td>
      <td>æ˜¾ç¤ºå¯¹è±¡å…ƒæ•°æ®</td>
    </tr>
    <tr>
      <td><code class="language-plaintext highlighter-rouge">support</code></td>
      <td>æ”¯æŒç›¸å…³å‘½ä»¤</td>
    </tr>
    <tr>
      <td><code class="language-plaintext highlighter-rouge">share</code></td>
      <td>ç”Ÿæˆä¸´æ—¶è®¿é—®å¯¹è±¡çš„URL</td>
    </tr>
    <tr>
      <td><code class="language-plaintext highlighter-rouge">tree</code></td>
      <td>ä»¥æ ‘çŠ¶æ ¼å¼åˆ—å‡ºå­˜å‚¨æ¡¶å’Œå¯¹è±¡</td>
    </tr>
    <tr>
      <td><code class="language-plaintext highlighter-rouge">tag</code></td>
      <td>ç®¡ç†å­˜å‚¨æ¡¶å’Œå¯¹è±¡çš„æ ‡ç­¾</td>
    </tr>
    <tr>
      <td><code class="language-plaintext highlighter-rouge">undo</code></td>
      <td>æ’¤é”€PUT/DELETEæ“ä½œ</td>
    </tr>
    <tr>
      <td><code class="language-plaintext highlighter-rouge">update</code></td>
      <td>å°†mcæ›´æ–°åˆ°æœ€æ–°ç‰ˆæœ¬</td>
    </tr>
    <tr>
      <td><code class="language-plaintext highlighter-rouge">version</code></td>
      <td>ç®¡ç†å­˜å‚¨æ¡¶ç‰ˆæœ¬æ§åˆ¶</td>
    </tr>
    <tr>
      <td><code class="language-plaintext highlighter-rouge">watch</code></td>
      <td>ç›‘å¬å¯¹è±¡é€šçŸ¥äº‹ä»¶</td>
    </tr>
  </tbody>
</table>

<h3 id="æ‰§è¡ŒsqlæŸ¥è¯¢">æ‰§è¡ŒsqlæŸ¥è¯¢</h3>

<p>åœ¨ <code class="language-plaintext highlighter-rouge">Libre Office</code> ä¸­åˆ›å»ºè¡¨æ ¼ï¼Œä¿å­˜ä¸º <code class="language-plaintext highlighter-rouge">.csv</code> æ–‡ä»¶ï¼Œä¸Šä¼ åˆ° ` minio-server` ä¸­</p>

<p><img src="/assets/post_images/image-20240427154434731.png" alt="" /></p>

<p><img src="/assets/post_images/image-20240427154557914.png" alt="" /></p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>mc put s1.csv m1/stu
</code></pre></div></div>

<p>æŸ¥è¯¢æ–‡ä»¶</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>mc sql <span class="nt">--recursive</span> <span class="nt">--query</span> <span class="s2">"select * from S3Object"</span> m1/stu/s1.csv
</code></pre></div></div>

<p><img src="/assets/post_images/image-20240427155030473.png" alt="" /></p>

<p>å¢åŠ æŸ¥è¯¢æ¡ä»¶ï¼š</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>mc sql <span class="nt">--recursive</span> <span class="nt">--query</span> <span class="s2">"select * from S3Object where </span><span class="se">\"</span><span class="s2">æˆç»©</span><span class="se">\"</span><span class="s2"> &gt; 7"</span> m1/stu/s1.csv
</code></pre></div></div>

<p><img src="/assets/post_images/image-20240427155132623.png" alt="" /></p>

<h2 id="åœ¨elispä¸­è¿›è¡Œå°è£…">åœ¨elispä¸­è¿›è¡Œå°è£…</h2>

<p>å‡½æ•°ï¼š</p>

<div class="language-lisp highlighter-rouge"><div class="highlight"><pre class="highlight"><code>  <span class="p">(</span><span class="nb">defun</span> <span class="nv">as-s3o-be-sq</span> <span class="p">(</span><span class="nv">s3o</span> <span class="nv">sq</span><span class="p">)</span>
    <span class="s">"make a sq query to s3o on minio server.
    The input of s3o should be a string path to s3o, and sq
    should be a string of sql. This function will return query result as string"</span>
    <span class="p">(</span><span class="nv">shell-command-to-string</span> <span class="p">(</span><span class="nb">format</span> <span class="s">"mc sql --recursive --query \"%s\" %s"</span> <span class="nv">sq</span> <span class="nv">s3o</span><span class="p">)))</span>
</code></pre></div></div>

<p>æµ‹è¯•ï¼š</p>

<div class="language-lisp highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="p">(</span><span class="nv">as-s3o-be-sq</span> <span class="s">"m1/stu/s1.csv"</span> <span class="s">"select * from S3Object"</span><span class="p">)</span>
<span class="c1">;=&gt;</span>
<span class="c1">;å¼ ä¸‰,10</span>
<span class="c1">;æå››,8.9</span>
<span class="c1">;ç‹äº”,6.7</span>
</code></pre></div></div>

<p>è‡³æ­¤ï¼Œå®Œæˆå®è®­æ‰€éœ€çš„åŸºæœ¬æ„ä»¶å·²ç»å®Œæˆã€‚</p>

<h3 id="å®è®­ä»»åŠ¡">å®è®­ä»»åŠ¡</h3>

<h3 id="ä»»åŠ¡ä¸€è®¾è®¡è¡¨">ä»»åŠ¡ä¸€ï¼Œè®¾è®¡è¡¨</h3>

<p>ç»Ÿè®¡é•¿åº¦ï¼š</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nb">wc</span> <span class="nt">-l</span> stumer_in_out_details.txt 
<span class="c">#975541 stumer_in_out_details.txt</span>
</code></pre></div></div>

<p>å¯ä»¥çœ‹åˆ°ï¼Œä¸€å…±975541è¡Œæ•°æ®ã€‚ç”±äºminioä¼šè‡ªåŠ¨æ‰§è¡Œæ–‡ä»¶çš„åˆ†å‰²ç¼–ç å’Œå­˜å‚¨è¿‡ç¨‹ï¼Œå¹¶ä¸”è€ƒè™‘åˆ°æ–‡ä»¶æ ¼å¼å’Œ<code class="language-plaintext highlighter-rouge">csv</code>æ–‡ä»¶æ ¼å¼ä¸€è‡´ï¼Œç›´æ¥æ”¹åä¸º<code class="language-plaintext highlighter-rouge">csv</code> æ–‡ä»¶ï¼Œåœ¨é¦–éƒ¨å¢åŠ å±æ€§è¡Œä¸Šä¼ æ–‡ä»¶å³å¯ã€‚</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>sed -i "1i\é’ç¥¨å† å­—å·,æ—¶é—´,ç”¨æˆ·ID,å­˜å–é’ç¥¨é“¶è¡Œ" stumer_in_out_details.txt
</code></pre></div></div>

<p>æ’å…¥æ•ˆæœå¦‚ä¸‹ï¼š</p>

<p><img src="/assets/post_images/image-20240427165407255.png" alt="" /></p>

<p>ä¸Šä¼ æ–‡ä»¶ï¼š</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nb">mv </span>stumer_in_out_details.txt stumer_in_out_details.csv
mc put ./stumer_in_out_details.csv m1/stu/
mc <span class="nb">head</span> <span class="nt">-n</span> 3 m1/stu/stumer_in_out_details.csv
</code></pre></div></div>

<p>å°è£…å‘½ä»¤åˆ°elispä¸­ã€‚</p>

<div class="language-lisp highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="p">(</span><span class="nb">defun</span> <span class="nv">as-o-be-put</span> <span class="p">(</span><span class="nv">file</span> <span class="nv">path</span><span class="p">)</span>
	<span class="s">"The first file be put to the path of Minio."</span>
	<span class="p">(</span><span class="nv">shell-command</span> <span class="p">(</span><span class="nb">format</span> <span class="s">"mc put %s %s"</span> <span class="nv">file</span> <span class="nv">path</span><span class="p">)))</span>
</code></pre></div></div>

<h3 id="ä»»åŠ¡äºŒè¡¨æ ¼çš„åˆ›å»ºå’Œåˆ é™¤">ä»»åŠ¡äºŒï¼šè¡¨æ ¼çš„åˆ›å»ºå’Œåˆ é™¤</h3>

<p>è€ƒè™‘åˆ°åœ¨ Minioä¸­æ•°æ®è¡¨å¯ä»¥ç›´æ¥ä»¥csvå½¢å¼å­˜å‚¨ï¼Œä½†å´æ²¡æœ‰æä¾›æ•°æ®ä¿®æ”¹åŠŸèƒ½ã€‚æ‰€ä»¥ä¸€åˆ‡çš„å¢åˆ æ”¹åŠŸèƒ½éƒ½éœ€è¦ä¸‹è½½æ–‡ä»¶åˆ°æœ¬åœ°ä¿®æ”¹ã€‚å¹¶ä¸”å¯ä»¥æŠŠä¸€ä¸ªâ€bucketâ€œè§†ä¸ºä¸€ä¸ªæ•°æ®åº“ï¼Œä¸€ä¸ªâ€objectâ€œè§†ä¸ºä¸€ä¸ªè¡¨ã€‚è€Œæœ¬åœ°ä¿®æ”¹éƒ¨åˆ†å¯ä»¥ä¾èµ–<code class="language-plaintext highlighter-rouge">linux</code> ä¸‰å‰‘å®¢ä¹‹ä¸€<code class="language-plaintext highlighter-rouge">sed</code>å‘½ä»¤ã€‚</p>

<p>åˆ›å»ºå‘½ä»¤ï¼š</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nb">echo</span> <span class="s2">"&lt;attribute-name-1&gt;,&lt;attribute-name-2&gt;,..."</span> <span class="o">&gt;</span> &lt;table-name&gt;.csv
mc put &lt;table-name&gt;.csv m1/&lt;db-name&gt;
<span class="nb">rm</span> &lt;table-name&gt;.csv
</code></pre></div></div>

<p>åˆ é™¤å‘½ä»¤ï¼š</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>mc <span class="nb">rm</span> &lt;table-path&gt;
mc rb &lt;db-path&gt;
</code></pre></div></div>

<p>ä¿®æ”¹å‘½ä»¤ï¼š</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>mc get &lt;table-path&gt; &lt;local-path&gt;
<span class="nb">echo</span> <span class="s2">"&lt;new-datas&gt;"</span> <span class="o">&gt;&gt;</span> &lt;local-path&gt;/&lt;table-path&gt; <span class="c">#å¢åŠ è¡Œ</span>
<span class="nb">sed</span> <span class="nt">-i</span> <span class="s1">'/pattern/d'</span> &lt;local-path&gt;/&lt;table-name&gt; <span class="c">#æŒ‰ç…§æ¨¡å¼åˆ é™¤è¡Œ</span>
mc put &lt;local-path&gt;/&lt;table-name&gt; &lt;table-path&gt;
</code></pre></div></div>

<h3 id="ä»»åŠ¡ä¸‰æŸ¥è¯¢æŒ‡å®šæ—¶é—´ç‰ˆæœ¬çš„æ•°æ®">ä»»åŠ¡ä¸‰ï¼šæŸ¥è¯¢æŒ‡å®šæ—¶é—´ç‰ˆæœ¬çš„æ•°æ®</h3>

<p>ä»¥csvæ–‡ä»¶ä¿å­˜çš„æ•°æ®æ˜¯ä¸€ä¸ªä¸å¯åˆ†å‰²çš„æ•´ä½“ï¼Œæ²¡æœ‰åŠæ³•å•ç‹¬ä¸ºä¸€è¡Œæ•°æ®å»ºç«‹å¤šä¸ªæ—¶é—´ç‰ˆæœ¬ã€‚æœ€å¥½çš„åšæ³•æ˜¯åœ¨ä¸åŒæ—¶é—´å¤‡ä»½å¤šä¸ªcsvæ–‡ä»¶ï¼Œé€šè¿‡<code class="language-plaintext highlighter-rouge">mc ls</code> å‘½ä»¤æŸ¥çœ‹æ•°æ®ä¿å­˜æ—¶é—´ã€‚å¹¶ä»ä¸­ç­›é€‰éœ€è¦çš„æ—¶é—´æ®µã€‚</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>mc <span class="nb">cp</span> &lt;table-path&gt; &lt;table-path&gt;-&lt;data&gt; <span class="c">#å¤‡ä»½æ•°æ®</span>
mc sql <span class="nt">--recursive</span> <span class="nt">--query</span> <span class="s2">"&lt;sql&gt;"</span> &lt;table-path&gt;-&lt;data&gt;
</code></pre></div></div>

<h3 id="ä»»åŠ¡å››åˆ©ç”¨elispå‡½æ•°å°è£…åˆ›å»ºè¡¨">ä»»åŠ¡å››ï¼šåˆ©ç”¨elispå‡½æ•°å°è£…åˆ›å»ºè¡¨</h3>

<p>å‡½æ•°ï¼š</p>

<div class="language-lisp highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="p">(</span><span class="nb">defun</span> <span class="nv">as-table-be-create-in</span> <span class="p">(</span><span class="nv">table-name</span> <span class="nv">attributes</span> <span class="nv">db-path</span><span class="p">)</span>
	<span class="s">"Create the table in Minio"</span>
	<span class="p">(</span><span class="nv">shell-command</span> <span class="p">(</span><span class="nb">format</span> <span class="s">"echo \"%s\" &gt; %s.csv 
							 mc put %s.csv %s
							 rm %s.csv"</span> 
					<span class="nv">attributes</span> <span class="nv">table-name</span> <span class="nv">table-name</span> <span class="nv">db-path</span> <span class="nv">table-name</span><span class="p">)))</span>
</code></pre></div></div>

<div class="language-lisp highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="p">(</span><span class="nb">defun</span> <span class="nv">as-s3o-be-list</span> <span class="p">(</span><span class="nv">s3o-path</span><span class="p">)</span>
	<span class="s">"ls the s3o in minio"</span>
	<span class="p">(</span><span class="nv">shell-command-to-string</span> <span class="p">(</span><span class="nb">format</span> <span class="s">"mc ls %s"</span> <span class="nv">s3o-path</span><span class="p">)))</span>
</code></pre></div></div>

<p>æµ‹è¯•ï¼š</p>

<p><img src="/assets/post_images/image-20240427203158705.png" alt="" /></p>

<h3 id="ä»»åŠ¡äº”é€šè¿‡elispæ’å…¥æ•°æ®åˆ°è¡¨å¹¶æŸ¥è¯¢">ä»»åŠ¡äº”ï¼šé€šè¿‡elispæ’å…¥æ•°æ®åˆ°è¡¨å¹¶æŸ¥è¯¢</h3>

<p>å‡½æ•°ï¼š</p>

<div class="language-lisp highlighter-rouge"><div class="highlight"><pre class="highlight"><code>  <span class="p">(</span><span class="nb">defun</span> <span class="nv">as-data-be-insert</span> <span class="p">(</span><span class="nv">data</span> <span class="nv">table-path</span><span class="p">)</span>
    <span class="s">"insert data to minio table"</span>
    <span class="p">(</span><span class="nv">shell-command</span> <span class="p">(</span><span class="nb">format</span>
		    <span class="s">"mc get %s ./tmp.csv
                     mc rm %s
		     echo \"%s\" &gt;&gt; ./tmp.csv
		     mc put ./tmp.csv %s
		     rm ./tmp.csv"</span>
		    <span class="nv">table-path</span> <span class="nv">table-path</span> <span class="nv">data</span> <span class="nv">table-path</span>
		    <span class="p">)))</span>
</code></pre></div></div>

<div class="language-lisp highlighter-rouge"><div class="highlight"><pre class="highlight"><code>    <span class="p">(</span><span class="nb">defun</span> <span class="nv">as-s3o-be-get-heads</span> <span class="p">(</span><span class="nv">s3o-path</span> <span class="nv">num</span><span class="p">)</span>
      <span class="s">"get the head lines of s3o"</span>
      <span class="p">(</span><span class="nv">shell-command-to-string</span> <span class="p">(</span><span class="nb">format</span> <span class="s">"mc head -n %d %s"</span> <span class="nv">num</span> <span class="nv">s3o-path</span><span class="p">)))</span>
</code></pre></div></div>

<p>æµ‹è¯•ï¼š</p>

<p><img src="/assets/post_images/image-20240427205605541.png" alt="" /></p>

<h3 id="ä»»åŠ¡å…­åˆ©ç”¨elispåˆå¹¶æ•°æ®">ä»»åŠ¡å…­ï¼šåˆ©ç”¨elispåˆå¹¶æ•°æ®</h3>

<p>æŒ‰ç…§åŸæœ¬çš„å®è®­è¦æ±‚ï¼Œæ­¤å¤„åº”è¯¥ä¸ºå¯¼å…¥æ•°æ®ã€‚ä½†æ˜¯è€ƒè™‘åˆ°minioä¸­å¹¶ä¸éœ€è¦è½¬æ¢æ•°æ®æ ¼å¼ï¼Œæ‰€ä»¥ä¸å…¶åˆ»æ„æŠŠæ•°æ®å¯¼å…¥elispä¸­ï¼Œä¸å¦‚è€ƒè™‘å¦‚ä½•åˆå¹¶ä¸¤ä¸ªè¡¨ã€‚å‡è®¾è¡¨Aå’Œè¡¨Bå…·æœ‰ç›¸åŒçš„ç»“æ„ï¼Œç°åœ¨ç”¨elispæŠŠå®ƒä»¬åˆå¹¶åˆ°ä¸€èµ·ã€‚</p>

<p>å‡½æ•°ï¼š</p>

<div class="language-lisp highlighter-rouge"><div class="highlight"><pre class="highlight"><code>  <span class="p">(</span><span class="nb">defun</span> <span class="nv">as-file-be-read</span> <span class="p">(</span><span class="nv">file</span><span class="p">)</span>
    <span class="s">"fill be read to string"</span>
    <span class="p">(</span><span class="nv">with-temp-buffer</span>
      <span class="p">(</span><span class="nv">insert-file-contents</span> <span class="nv">file</span><span class="p">)</span>
      <span class="p">(</span><span class="nv">buffer-string</span><span class="p">)))</span>
  <span class="p">(</span><span class="nb">defun</span> <span class="nv">as-str-be-append</span> <span class="p">(</span><span class="nv">str</span> <span class="nv">file</span><span class="p">)</span>
    <span class="s">"str be append to file"</span>
    <span class="p">(</span><span class="nv">with-temp-buffer</span>
      <span class="p">(</span><span class="nv">insert</span> <span class="nv">str</span><span class="p">)</span>
      <span class="p">(</span><span class="nv">append-to-file</span> <span class="p">(</span><span class="nv">point-min</span><span class="p">)</span> <span class="p">(</span><span class="nv">point-max</span><span class="p">)</span> <span class="nv">file</span><span class="p">)))</span>
  <span class="p">(</span><span class="nb">defun</span> <span class="nv">as-file-be-append</span> <span class="p">(</span><span class="nv">file-a</span> <span class="nv">file-b</span><span class="p">)</span>
    <span class="s">"merge two files"</span>
    <span class="p">(</span><span class="nv">as-str-be-append</span> <span class="p">(</span><span class="nv">as-file-be-read</span> <span class="nv">file-a</span><span class="p">)</span> <span class="nv">file-b</span><span class="p">))</span>
  <span class="p">(</span><span class="nb">defun</span> <span class="nv">as-tables-be-merged</span> <span class="p">(</span><span class="nv">table-a</span> <span class="nv">table-b</span> <span class="nv">new-table</span><span class="p">)</span>
    <span class="s">"Both table be merged into one."</span>
    <span class="p">(</span><span class="nv">shell-command</span> <span class="p">(</span><span class="nv">concat</span>
		    <span class="p">(</span><span class="nb">format</span> <span class="s">"mc get %s ./tba \n"</span> <span class="nv">table-a</span><span class="p">)</span>
		    <span class="p">(</span><span class="nb">format</span> <span class="s">"mc get %s ./tbb \n"</span> <span class="nv">table-b</span><span class="p">)</span>
		    <span class="p">(</span><span class="nb">format</span> <span class="s">"sed -i \"1d\" ./tba"</span><span class="p">)))</span>
    <span class="p">(</span><span class="nv">as-file-be-append</span> <span class="s">"./tba"</span> <span class="s">"./tbb"</span><span class="p">)</span>
    <span class="p">(</span><span class="nv">shell-command</span> <span class="p">(</span><span class="nb">format</span> <span class="s">"mc put ./tbb %s"</span> <span class="nv">new-table</span><span class="p">)</span>
		   <span class="p">))</span>
</code></pre></div></div>

<p>æµ‹è¯•ï¼š</p>

<p><img src="/assets/post_images/image-20240427223026110.png" alt="" /></p>

<h2 id="æ€»ç»“">æ€»ç»“</h2>

<p>é€šè¿‡æ­¤æ¬¡å®éªŒï¼Œä¸°å¯Œäº†elispå¯¹bashå’Œminioçš„æ¥å£ã€ç†Ÿæ‚‰äº†åˆ†å¸ƒå¼ç¯å¢ƒminioçš„é…ç½®è¿‡ç¨‹ã€‚ä¸è¿‡ç¬¬äºŒæ¬¡éƒ¨ç½²å¤šèŠ‚ç‚¹minioå¤±è´¥ç•¥æ„Ÿé—æ†¾ã€‚</p>

<h2 id="å‚è€ƒ">å‚è€ƒ</h2>

<ul>
  <li><a href="https://min.io/docs/minio/linux/operations/install-deploy-manage/deploy-minio-single-node-single-drive.html">Deploy MinIO: Single-Node Single-Drive</a></li>
  <li>https://www.youtube.com/watch?v=zSKhvmWIO2k</li>
  <li>https://min.io/docs/minio/linux/operations/install-deploy-manage/deploy-minio-multi-node-multi-drive.html</li>
  <li>https://min.io/docs/minio/linux/operations/install-deploy-manage/deploy-minio-single-node-single-drive.html</li>
  <li>https://min.io/docs/minio/linux/index.html#procedure</li>
  <li>https://www.youtube.com/watch?v=fwoLEWYK-PE</li>
</ul>]]></content><author><name>ç”²ä¸</name></author><summary type="html"><![CDATA[ç›®æ ‡]]></summary></entry><entry><title type="html">å…³äºæˆ‘åœ¨é…ç½®hbaseä¸­çš„ä¸€äº›é—®é¢˜</title><link href="/%E5%85%B3%E4%BA%8E%E6%88%91%E5%9C%A8%E9%85%8D%E7%BD%AEhbase%E4%B8%AD%E7%9A%84%E4%B8%80%E4%BA%9B%E9%97%AE%E9%A2%98/" rel="alternate" type="text/html" title="å…³äºæˆ‘åœ¨é…ç½®hbaseä¸­çš„ä¸€äº›é—®é¢˜" /><published>2024-04-20T00:00:00+08:00</published><updated>2024-04-20T00:00:00+08:00</updated><id>/%E5%85%B3%E4%BA%8E%E6%88%91%E5%9C%A8%E9%85%8D%E7%BD%AEhbase%E4%B8%AD%E7%9A%84%E4%B8%80%E4%BA%9B%E9%97%AE%E9%A2%98</id><content type="html" xml:base="/%E5%85%B3%E4%BA%8E%E6%88%91%E5%9C%A8%E9%85%8D%E7%BD%AEhbase%E4%B8%AD%E7%9A%84%E4%B8%80%E4%BA%9B%E9%97%AE%E9%A2%98/"><![CDATA[<p>ç°åœ¨ç³»ç»Ÿå·²ç»é‡è£…ï¼Œæ‰€ä»¥å†å»æ¢ç©¶é”™è¯¯çš„åŸå› å’Œå¤„ç†æ–¹æ¡ˆå·²ç»æ„ä¹‰ä¸å¤§ã€‚ç°åœ¨æŠŠå½“æ—¶çš„æ—¥å¿—æ•´ç†ä»¥ä¸‹ï¼Œç”¨ä»¥å¤‡å¿˜ã€‚</p>

<h3 id="é—®é¢˜ä¸€é«˜cpuå ç”¨ç‡">é—®é¢˜ä¸€ï¼šé«˜CPUå ç”¨ç‡</h3>

<p>å½“æˆ‘æŠŠhbaseå¯åŠ¨å¤±è´¥çš„ä¸¤ä¸ªèŠ‚ç‚¹æ”¾ç½®å‡ å¤©åæŸ¥çœ‹ï¼Œå‘ç°ï¼š</p>

<p><img src="/assets/post_images/image-20240417110959098.png" alt="" /></p>

<p>ç”±äºèŠ‚ç‚¹æµé‡æ˜¯æœ‰ä¸Šé™çš„ï¼Œæ¯ä¸ªæœˆ100Gã€‚</p>

<p><img src="/assets/post_images/image-20240420095141618.png" alt="" />
ğŸ˜®â€ğŸ’¨ğŸ˜®â€ğŸ’¨ğŸ˜®â€ğŸ’¨</p>

<p>å†å¯¹æ¯”ä¸€ä¸‹æ€§èƒ½æ¶ˆè€—å§ã€‚</p>

<p><img src="/assets/post_images/image-20240420095613423.png" alt="" /></p>

<p>HbaseåŸºäºhadoopï¼Œè€Œhadoopåˆæ˜¯åŸºäºsshåè®®è¿›è¡Œæ–‡ä»¶ä¼ è¾“ï¼Œæ‰€ä»¥æœ‰æ—¶å€™topæŸ¥çœ‹è¿›ç¨‹ä¼šå‘ç°sshdå ç”¨ç‡é«˜è¿‡100%ã€‚è€Œminioå°±ç¨³å®šå¾—å¤šã€‚ä¸è¿‡è¿™ç§å¯¹æ¯”ä¸èƒ½è¯´æ˜hadoopå’Œminioçš„ä¼˜åŠ£ï¼Œå› ä¸ºå…¶ä¸­ä¸åŒ…å«åªè¿è¡Œhadoopæ¡ä»¶ä¸‹çš„ä¿¡æ¯ã€‚ä¸è¿‡hadoopè¿˜è¦è¿æ¥åˆ°scalaã€Hiveè¿™äº›å·¥å…·ï¼Œè¿›è¡Œcsvåˆ°sqlçš„æ–‡ä»¶è½¬æ¢ï¼Œæ‰èƒ½è¿›è¡ŒsqlæŸ¥è¯¢ï¼Œç›¸æ¯”ä¹‹ä¸‹ï¼Œminioçš„ç¡®æ˜¯è¦æ–¹ä¾¿ä¸€äº›ğŸ‘ã€‚</p>

<h3 id="é—®é¢˜äºŒhostsæ–‡ä»¶è‡ªåŠ¨æ›´æ”¹">é—®é¢˜äºŒï¼šhostsæ–‡ä»¶è‡ªåŠ¨æ›´æ”¹</h3>

<p>å½“æˆ‘å¯åŠ¨zookeeperæˆ–é‡å¯ä¹‹åï¼Œæ²¡è¿‡å¤šä¹…hostsæ–‡ä»¶è‡ªåŠ¨æ¸…ç©ºå¹¶å¢åŠ  <code class="language-plaintext highlighter-rouge">i a e</code>å±æ€§ã€‚</p>

<p>å½“ç„¶é‡å¯è¿˜æœ‰ä¸€ç§æƒ…å†µï¼Œé‚£å°±æ˜¯ <code class="language-plaintext highlighter-rouge">hosts</code> æ–‡ä»¶æ¢å¤é»˜è®¤é…ç½®ã€‚</p>

<p>è¿™å¯èƒ½å’ŒvpsæœåŠ¡å•†çš„é»˜è®¤é…ç½®æœ‰å…³ã€‚</p>

<ul>
  <li><code class="language-plaintext highlighter-rouge">lsattr file-name</code> æŸ¥çœ‹å±æ€§</li>
  <li><code class="language-plaintext highlighter-rouge">chattr +x file-name</code> å¢åŠ xå±æ€§</li>
  <li><code class="language-plaintext highlighter-rouge">chattr -x file-name</code> å‡å°‘xå±æ€§</li>
</ul>

<p>ä¸¾ä¾‹ï¼š</p>
<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>root@J:/etc# lsattr hosts
<span class="nt">----ia--------e-----</span> hosts
</code></pre></div></div>
<p>iï¼ˆimmutableï¼‰ï¼šè¡¨ç¤ºæ–‡ä»¶æˆ–ç›®å½•æ˜¯ä¸å¯å˜çš„ï¼Œå³ä¸èƒ½è¢«ä¿®æ”¹ã€åˆ é™¤ã€é‡å‘½åæˆ–é“¾æ¥ã€‚åªæœ‰è¶…çº§ç”¨æˆ·ï¼ˆrootï¼‰å¯ä»¥ä¿®æ”¹æˆ–åˆ é™¤è¯¥æ–‡ä»¶æˆ–ç›®å½•ã€‚</p>

<p>aï¼ˆappend-onlyï¼‰ï¼šè¡¨ç¤ºæ–‡ä»¶åªèƒ½å‘å…¶æœ«å°¾è¿½åŠ æ•°æ®ï¼Œä¸èƒ½ä¿®æ”¹æˆ–åˆ é™¤æ–‡ä»¶ä¸­å·²æœ‰çš„æ•°æ®ã€‚åªæœ‰è¶…çº§ç”¨æˆ·ï¼ˆrootï¼‰å¯ä»¥ä¿®æ”¹æˆ–åˆ é™¤è¯¥æ–‡ä»¶ã€‚</p>

<p>eï¼ˆextendï¼‰ï¼šè¡¨ç¤ºæ–‡ä»¶æˆ–ç›®å½•ä½¿ç”¨äº†ACLï¼ˆAccess Control Listï¼Œè®¿é—®æ§åˆ¶åˆ—è¡¨ï¼‰æ¥æ§åˆ¶è®¿é—®æƒé™ï¼Œå…è®¸å¯¹æ–‡ä»¶æˆ–ç›®å½•è®¾ç½®æ›´ç»†ç²’åº¦çš„æƒé™æ§åˆ¶ã€‚</p>

<p>å¯¹ç­–ï¼š</p>
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>root@J:/etc# chattr -i hosts
root@J:/etc# chattr -a hosts
root@J:/etc# chattr -e hosts
root@J:/etc# lsattr hosts
-------------------- hosts
</code></pre></div></div>

<h3 id="é—®é¢˜ä¸‰-èŠ‚ç‚¹ä¸¢å¤±">é—®é¢˜ä¸‰ï¼š èŠ‚ç‚¹ä¸¢å¤±</h3>

<p>jpsæŸ¥çœ‹èŠ‚ç‚¹å‘ç°åªæœ‰jpsæœ¬èº«ï¼Œé‡å¯ç³»ç»Ÿæ ¼å¼åŒ–namenodeä¹‹åä¸€åˆ‡èŠ‚ç‚¹æ­£å¸¸ï¼Œä½†æ˜¯æŒç»­è¿è¡Œä¸€æ®µæ—¶é—´ä¼šå‘ç”ŸèŠ‚ç‚¹ä¸¢å¤±é—®é¢˜ï¼Œä¸è¿‡hadoopçš„webUIå’Œå‘½ä»¤è¡Œå·¥å…·éƒ½èƒ½æ­£å¸¸è¿è¡Œï¼Œ9870ç«¯å£ä¹Ÿæ˜¾ç¤ºä¸¤ä¸ªæœåŠ¡å™¨åœ¨çº¿ï¼Œä¸æ˜ç™½æ˜¯ä¸ºä»€ä¹ˆã€‚</p>

<h3 id="é—®é¢˜å››å‘½ä»¤è¡Œå·¥å…·çš„ä½¿ç”¨">é—®é¢˜å››ï¼šå‘½ä»¤è¡Œå·¥å…·çš„ä½¿ç”¨</h3>

<p>hadoopå’Œzookeeperéƒ½æä¾›äº†å‘½ä»¤è¡Œçš„æ“ä½œå·¥å…·ï¼Œç”¨æ¥åˆ›å»ºå’ŒæŸ¥çœ‹æ–‡ä»¶ã€‚</p>

<h4 id="hdfs-ä½¿ç”¨æ–¹æ³•">hdfs ä½¿ç”¨æ–¹æ³•</h4>

<ul>
  <li>æŸ¥çœ‹æ ¹ç›®å½•
    <div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>hdfs dfs -ls /
</code></pre></div>    </div>
  </li>
  <li>åˆ›å»ºæ–‡ä»¶å¤¹
    <div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>hdfs dfs <span class="nt">-mkdir</span> /G
</code></pre></div>    </div>
  </li>
  <li>åˆ›å»ºæ–‡ä»¶
    <div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>hdfs dfs <span class="nt">-touch</span> /G/test.txt
</code></pre></div>    </div>
  </li>
</ul>

<h4 id="zookeeper-ä½¿ç”¨">zookeeper ä½¿ç”¨</h4>

<p>åœ¨ZooKeeperä¸­ï¼Œä½ å¯ä»¥ä½¿ç”¨å‘½ä»¤è¡Œå®¢æˆ·ç«¯ï¼ˆ<code class="language-plaintext highlighter-rouge">zkCli.sh</code>ï¼‰è¿›è¡Œäº¤äº’å¼æ“ä½œã€‚ä»¥ä¸‹æ˜¯ä¸€äº›å¸¸ç”¨çš„ZooKeeperå‘½ä»¤è¡Œæ“ä½œï¼š</p>

<ol>
  <li><strong>è¿æ¥åˆ°ZooKeeperæœåŠ¡å™¨</strong>ï¼š
    <ul>
      <li>ä½¿ç”¨ä»¥ä¸‹å‘½ä»¤è¿æ¥åˆ°ZooKeeperæœåŠ¡å™¨ï¼š<code class="language-plaintext highlighter-rouge">./zkCli.sh -server &lt;ZooKeeperæœåŠ¡å™¨åœ°å€&gt;:&lt;ç«¯å£å·&gt;</code></li>
      <li>ä¾‹å¦‚ï¼š<code class="language-plaintext highlighter-rouge">./zkCli.sh -server localhost:2181</code></li>
    </ul>
  </li>
  <li><strong>åŸºæœ¬æ“ä½œ</strong>ï¼š
    <ul>
      <li><strong>åˆ›å»ºèŠ‚ç‚¹</strong>ï¼š<code class="language-plaintext highlighter-rouge">create /path data</code>
        <ul>
          <li>ä¾‹å¦‚ï¼š<code class="language-plaintext highlighter-rouge">create /myNode "Hello World"</code></li>
        </ul>
      </li>
      <li><strong>è¯»å–èŠ‚ç‚¹æ•°æ®</strong>ï¼š<code class="language-plaintext highlighter-rouge">get /path</code>
        <ul>
          <li>ä¾‹å¦‚ï¼š<code class="language-plaintext highlighter-rouge">get /myNode</code></li>
        </ul>
      </li>
      <li><strong>æ›´æ–°èŠ‚ç‚¹æ•°æ®</strong>ï¼š<code class="language-plaintext highlighter-rouge">set /path data</code>
        <ul>
          <li>ä¾‹å¦‚ï¼š<code class="language-plaintext highlighter-rouge">set /myNode "New Data"</code></li>
        </ul>
      </li>
      <li><strong>åˆ—å‡ºèŠ‚ç‚¹</strong>ï¼š<code class="language-plaintext highlighter-rouge">ls /path</code>
        <ul>
          <li>ä¾‹å¦‚ï¼š<code class="language-plaintext highlighter-rouge">ls /</code></li>
        </ul>
      </li>
    </ul>
  </li>
  <li><strong>ç›‘è§†èŠ‚ç‚¹</strong>ï¼š
    <ul>
      <li><strong>è®¾ç½®ç›‘è§†</strong>ï¼š<code class="language-plaintext highlighter-rouge">get /path true</code>
        <ul>
          <li>è¯¥å‘½ä»¤å°†ç›‘è§†ç»™å®šèŠ‚ç‚¹çš„å˜åŒ–ã€‚å¦‚æœèŠ‚ç‚¹æ•°æ®å‘ç”Ÿå˜åŒ–ï¼Œå®¢æˆ·ç«¯å°†æ”¶åˆ°é€šçŸ¥ã€‚</li>
        </ul>
      </li>
      <li><strong>å–æ¶ˆç›‘è§†</strong>ï¼š<code class="language-plaintext highlighter-rouge">rmr /path</code>
        <ul>
          <li>å–æ¶ˆå¯¹èŠ‚ç‚¹çš„ç›‘è§†ã€‚</li>
        </ul>
      </li>
    </ul>
  </li>
  <li><strong>åˆ é™¤èŠ‚ç‚¹</strong>ï¼š
    <ul>
      <li><strong>åˆ é™¤èŠ‚ç‚¹</strong>ï¼š<code class="language-plaintext highlighter-rouge">delete /path</code>
        <ul>
          <li>ä¾‹å¦‚ï¼š<code class="language-plaintext highlighter-rouge">delete /myNode</code></li>
        </ul>
      </li>
    </ul>
  </li>
  <li><strong>å¸®åŠ©</strong>ï¼š
    <ul>
      <li><strong>è·å–å¸®åŠ©</strong>ï¼š<code class="language-plaintext highlighter-rouge">help</code>
        <ul>
          <li>å¯ä»¥æŸ¥çœ‹ZooKeeperå‘½ä»¤è¡Œå®¢æˆ·ç«¯çš„å¸®åŠ©ä¿¡æ¯ã€‚</li>
        </ul>
      </li>
    </ul>
  </li>
  <li><strong>é€€å‡ºå‘½ä»¤è¡Œå®¢æˆ·ç«¯</strong>ï¼š
    <ul>
      <li><strong>é€€å‡º</strong>ï¼š<code class="language-plaintext highlighter-rouge">quit</code> æˆ– <code class="language-plaintext highlighter-rouge">exit</code>
        <ul>
          <li>ç”¨äºé€€å‡ºZooKeeperå‘½ä»¤è¡Œå®¢æˆ·ç«¯ã€‚</li>
        </ul>
      </li>
    </ul>
  </li>
</ol>]]></content><author><name>ç”²ä¸</name></author><summary type="html"><![CDATA[ç°åœ¨ç³»ç»Ÿå·²ç»é‡è£…ï¼Œæ‰€ä»¥å†å»æ¢ç©¶é”™è¯¯çš„åŸå› å’Œå¤„ç†æ–¹æ¡ˆå·²ç»æ„ä¹‰ä¸å¤§ã€‚ç°åœ¨æŠŠå½“æ—¶çš„æ—¥å¿—æ•´ç†ä»¥ä¸‹ï¼Œç”¨ä»¥å¤‡å¿˜ã€‚]]></summary></entry><entry><title type="html">å¦‚ä½•ä½¿ç”¨ minio è¿›è¡Œæ•°æ®åº“æŸ¥è¯¢</title><link href="/%E5%A6%82%E4%BD%95%E4%BD%BF%E7%94%A8-minio-%E8%BF%9B%E8%A1%8C%E6%95%B0%E6%8D%AE%E5%BA%93%E6%9F%A5%E8%AF%A2/" rel="alternate" type="text/html" title="å¦‚ä½•ä½¿ç”¨ minio è¿›è¡Œæ•°æ®åº“æŸ¥è¯¢" /><published>2024-04-20T00:00:00+08:00</published><updated>2024-04-20T00:00:00+08:00</updated><id>/%E5%A6%82%E4%BD%95%E4%BD%BF%E7%94%A8%20minio%20%E8%BF%9B%E8%A1%8C%E6%95%B0%E6%8D%AE%E5%BA%93%E6%9F%A5%E8%AF%A2</id><content type="html" xml:base="/%E5%A6%82%E4%BD%95%E4%BD%BF%E7%94%A8-minio-%E8%BF%9B%E8%A1%8C%E6%95%B0%E6%8D%AE%E5%BA%93%E6%9F%A5%E8%AF%A2/"><![CDATA[<p>minio æä¾›äº†å¯¹s3å­˜å‚¨å¯¹è±¡çš„sqlæ“ä½œã€‚ä¸€æ–¹é¢ä¸ºäº†å¤„ç†å®éªŒæŠ¥å‘Šï¼Œå¦ä¸€æ–¹é¢ä¹Ÿæ˜¯ä¸ºäº†å¢åŠ å¯ä»¥ä½¿ç”¨çš„å·¥å…·æ•°é‡ï¼Œæ‰€ä»¥éœ€è¦å¢è¿›å¯¹äº<code class="language-plaintext highlighter-rouge">mc sql</code>çš„ç†è§£ã€‚</p>

<p>æœ¬ç¯‡åšå®¢å¤„ç†ä»¥ä¸‹å‡ ä¸ªé—®é¢˜ï¼š</p>

<ul>
  <li>s3 æ˜¯ä»€ä¹ˆï¼Ÿ</li>
  <li>minio ä¸Šçš„ä½•ç§å¯¹è±¡å¯ä»¥è§†ä¸º s3 å¯¹è±¡ï¼Ÿ</li>
  <li>å¦‚ä½•æ“ä½œ S3 å¯¹è±¡ï¼Ÿ</li>
  <li>å¦‚ä½•æŠŠè¿™ç§æŸ¥è¯¢å°è£…åˆ°emacsä¸­ï¼Ÿ</li>
</ul>

<h2 id="s3-æ˜¯ä»€ä¹ˆ"><code class="language-plaintext highlighter-rouge">s3</code> æ˜¯ä»€ä¹ˆï¼Ÿ</h2>

<blockquote>
  <p>Amazon Simple Storage Serviceï¼ˆAmazon S3ï¼‰æ˜¯ä¸€ç§å¯¹è±¡å­˜å‚¨æœåŠ¡ï¼Œæä¾›è¡Œä¸šé¢†å…ˆçš„å¯æ‰©å±•æ€§ã€æ•°æ®å¯ç”¨æ€§ã€å®‰å…¨æ€§å’Œæ€§èƒ½ã€‚å„ç§è§„æ¨¡å’Œè¡Œä¸šçš„å®¢æˆ·éƒ½å¯ä»¥ä½¿ç”¨ Amazon S3 å­˜å‚¨å’Œä¿æŠ¤ä»»æ„æ•°é‡çš„æ•°æ®ï¼Œç”¨äºæ•°æ®æ¹–ã€ç½‘ç«™ã€ç§»åŠ¨åº”ç”¨ç¨‹åºã€å¤‡ä»½å’Œæ¢å¤ã€å½’æ¡£ã€ä¼ä¸šåº”ç”¨ç¨‹åºã€IoT è®¾å¤‡å’Œå¤§æ•°æ®åˆ†æã€‚Amazon S3 æä¾›äº†ç®¡ç†åŠŸèƒ½ï¼Œä½¿æ‚¨å¯ä»¥ä¼˜åŒ–ã€ç»„ç»‡å’Œé…ç½®å¯¹æ•°æ®çš„è®¿é—®ï¼Œä»¥æ»¡è¶³æ‚¨çš„ç‰¹å®šä¸šåŠ¡ã€ç»„ç»‡å’Œåˆè§„æ€§è¦æ±‚ã€‚</p>
</blockquote>

<p>æ‰€ä»¥ï¼ŒS3, å…¨ç§°Simple Storage Serviceï¼Œç›´è¯‘ç®€å•å­˜å‚¨æœåŠ¡ã€‚é‚£ä¹ˆ <code class="language-plaintext highlighter-rouge">S3 Object</code> å°±æ˜¯ç®€å•å­˜å‚¨æœåŠ¡å¯¹è±¡ã€‚</p>

<p>å¦å¤–éœ€è¦æ³¨æ„ï¼Œs3o æ–‡ä»¶ä¸€èˆ¬è¦ä¸‹è½½åˆ°æœ¬åœ°è¿›è¡Œå¤„ç†ï¼Œç„¶åä¸Šä¼ è¿›è¡Œè¦†ç›–ã€‚</p>

<h2 id="å¯ä»¥æŠŠminioä¸Šçš„ä½•ç§å¯¹è±¡è§†ä¸ºs3å¯¹è±¡">å¯ä»¥æŠŠminioä¸Šçš„ä½•ç§å¯¹è±¡è§†ä¸º<code class="language-plaintext highlighter-rouge">s3å¯¹è±¡</code>ï¼Ÿ</h2>

<p><code class="language-plaintext highlighter-rouge">mc sql --help</code> çœ‹çœ‹æ–‡æ¡£ã€‚</p>

<p><img src="/assets/post_images/image-20240420090054853.png" alt="" /></p>

<p>æ‰€ä»¥ï¼Œå¯ä»¥æŠŠ<code class="language-plaintext highlighter-rouge">csv</code>æ–‡ä»¶ç†è§£ä¸ºä¸€ç§<code class="language-plaintext highlighter-rouge">s3 Object</code>çš„å®ä¾‹ã€‚ç¡®å®è¶³å¤Ÿç®€å•ğŸ˜Šã€‚</p>

<p>é‚£åªè¦æŠŠbashå‘½ä»¤å°è£…åˆ°elispä¸­å°±å¯ä»¥äº†ã€‚ä¸è¿‡åœ¨è¿™ä¹‹å‰è¦å…ˆç†Ÿæ‚‰ä¸€ä¸‹ csvæ–‡ä»¶çš„åŸºæœ¬æ“ä½œã€‚</p>

<h2 id="å¯ä»¥å¦‚ä½•æ“ä½œs3">å¯ä»¥å¦‚ä½•æ“ä½œS3ï¼Ÿ</h2>

<p>æ‰“å¼€ <code class="language-plaintext highlighter-rouge">Libreoffice</code> åˆ›å»ºå‡ ä¸ªæ•°æ®ï¼Œ</p>

<p><img src="/assets/post_images/image-20240420090847909.png" alt="" /></p>

<p>æŒ‰é»˜è®¤æ ¼å¼å­˜å‚¨ä¸ºcsvæ–‡ä»¶ <code class="language-plaintext highlighter-rouge">stu.csv</code>ï¼Œæ‰“å¼€emacsçœ‹çœ‹ï¼š</p>

<p><img src="/assets/post_images/image-20240420091006763.png" alt="" /></p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nv">$ </span>mc mb minio-server/csv
<span class="nv">$ </span>mc put stu.csv minio-server/csv
</code></pre></div></div>

<h3 id="sql-æ“ä½œ">sql æ“ä½œ</h3>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>$ mc sql --recursive --query "select * from S3Object" minio-server/csv/stu.csv
å¼ ä¸‰,100
æå››,50
ç‹äº”,60
</code></pre></div></div>

<p>å¥½æ£’ğŸ‘ã€‚æ¥å¢åŠ å‡ ä¸ªæŸ¥è¯¢æ¡ä»¶çœ‹çœ‹å§ã€‚</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nv">$mc</span> sql <span class="nt">--recursive</span> <span class="nt">--query</span> <span class="s2">"select * from S3Object where </span><span class="se">\"</span><span class="s2">æˆç»©</span><span class="se">\"</span><span class="s2">=100"</span> minio-server/csv/stu.csv
å¼ ä¸‰,100
<span class="nv">$mc</span> sql <span class="nt">--recursive</span> <span class="nt">--query</span> <span class="s2">"select * from S3Object where </span><span class="se">\"</span><span class="s2">æˆç»©</span><span class="se">\"</span><span class="s2">&gt;=60"</span> minio-server/csv/stu.csv
å¼ ä¸‰,100
ç‹äº”,60
</code></pre></div></div>

<p>æ¼‚äº®ğŸ‰ã€‚</p>

<h2 id="å¦‚ä½•æŠŠmcçš„sqlæ“ä½œå°è£…åˆ°emacsä¸­">å¦‚ä½•æŠŠmcçš„sqlæ“ä½œå°è£…åˆ°emacsä¸­ï¼Ÿ</h2>

<p>æŒ‰ç…§ä¸»è¯­è¡¨è¾¾æ³•ï¼Œ<code class="language-plaintext highlighter-rouge">(as-s3o-be-sq file-name sql-sentence)</code> å°±å¯ä»¥è·å–æ•°æ®äº†ã€‚å…¶ä¸­<code class="language-plaintext highlighter-rouge">sq</code>çš„æ„ä¹‰æ˜¯ï¼Œ<code class="language-plaintext highlighter-rouge">structured query</code>ï¼Œå› ä¸º<code class="language-plaintext highlighter-rouge">sql</code>çš„å…¨ç§°æ˜¯ï¼š<code class="language-plaintext highlighter-rouge">structured query language</code>ã€‚ï¼ˆæ‰€ä»¥å®é™…ä¸Šè¯´<code class="language-plaintext highlighter-rouge">ä½¿ç”¨sqlè¯­è¨€</code> è¿™ç§è¯´æ³•æ˜¯ä¸æ­£ç¡®çš„ï¼Œä»€ä¹ˆæ˜¯<code class="language-plaintext highlighter-rouge">languageè¯­è¨€</code>å‘¢ï¼Ÿï¼‰ä¸è¿‡è¿™æ ·çš„é™åˆ¶ä¹Ÿå¾ˆæ˜æ˜¾ï¼Œæœ€å¤šåªèƒ½æŸ¥è¯¢ä¸€ä¸ªè¡¨ï¼Œæ‰€ä»¥è¡¨å’Œè¡¨çš„è¿æ¥åŸºæœ¬ä¸Šå°±ä¸ç”¨è€ƒè™‘äº†ã€‚</p>

<div class="language-lisp highlighter-rouge"><div class="highlight"><pre class="highlight"><code>    <span class="p">(</span><span class="nb">defun</span> <span class="nv">as-s3o-be-sq</span> <span class="p">(</span><span class="nv">s3o</span> <span class="nv">sq</span><span class="p">)</span>
      <span class="s">"make a sq query to s3o on minio server. The input of s3o should be a string path to s3o, and sq should be a string of sql. This function will return query result as string"</span>
      <span class="p">(</span><span class="nv">shell-command</span> <span class="p">(</span><span class="nb">format</span> <span class="s">"mc sql --recursive --query \"%s\" %s"</span> <span class="nv">s3o</span> <span class="nv">sq</span><span class="p">)))</span>
      
</code></pre></div></div>

<div class="language-lisp highlighter-rouge"><div class="highlight"><pre class="highlight"><code>  <span class="p">(</span><span class="nv">as-s3o-be-sq</span> <span class="s">"select * from S3Object"</span> <span class="s">"minio-server/csv/stu.csv"</span><span class="p">)</span>
</code></pre></div></div>

<p>ç»“æœ<strong>è¿”å›0 è€ŒMessage ä¸­åˆ™è¿”å›æŸ¥è¯¢ç»“æœ</strong>ã€‚</p>

<p>å—¯â€¦â€¦<code class="language-plaintext highlighter-rouge">shell-command</code> ä¼šè¿”å›é€€å‡ºç ï¼Œ<code class="language-plaintext highlighter-rouge">shell-command-to-string</code> æ‰èƒ½è·å¾—<code class="language-plaintext highlighter-rouge">shell</code> çš„è¾“å‡ºç»“æœã€‚</p>

<p>æ”¹ä¸€ä¸‹ï¼š</p>

<p><img src="/assets/post_images/image-20240420094006548.png" alt="" /></p>

<p>å®Œç¾ğŸ‰ğŸ‰ã€‚</p>

<h2 id="å‚è€ƒ">å‚è€ƒ</h2>

<ul>
  <li>https://docs.aws.amazon.com/zh_cn/AmazonS3/latest/userguide/Welcome.html</li>
</ul>]]></content><author><name>ç”²ä¸</name></author><category term="minio" /><summary type="html"><![CDATA[minio æä¾›äº†å¯¹s3å­˜å‚¨å¯¹è±¡çš„sqlæ“ä½œã€‚ä¸€æ–¹é¢ä¸ºäº†å¤„ç†å®éªŒæŠ¥å‘Šï¼Œå¦ä¸€æ–¹é¢ä¹Ÿæ˜¯ä¸ºäº†å¢åŠ å¯ä»¥ä½¿ç”¨çš„å·¥å…·æ•°é‡ï¼Œæ‰€ä»¥éœ€è¦å¢è¿›å¯¹äºmc sqlçš„ç†è§£ã€‚]]></summary></entry><entry><title type="html">Minio çš„é…ç½®è¿‡ç¨‹</title><link href="/minio-%E7%9A%84%E9%85%8D%E7%BD%AE%E8%BF%87%E7%A8%8B/" rel="alternate" type="text/html" title="Minio çš„é…ç½®è¿‡ç¨‹" /><published>2024-04-19T00:00:00+08:00</published><updated>2024-04-19T00:00:00+08:00</updated><id>/minio%20%E7%9A%84%E9%85%8D%E7%BD%AE%E8%BF%87%E7%A8%8B</id><content type="html" xml:base="/minio-%E7%9A%84%E9%85%8D%E7%BD%AE%E8%BF%87%E7%A8%8B/"><![CDATA[<p>å¦‚æœåªæ˜¯æƒ³ç”¨åˆ†å¸ƒå¼æ–‡ä»¶ç³»ç»Ÿï¼Œå…¶å®hadoopä¹Ÿå¯ä»¥ï¼Œä½†åœ¨é…ç½®hbaseçš„è¿‡ç¨‹ä¸­å‡ºç°çš„èŠ‚ç‚¹ä¸¢å¤±å’Œé«˜cpuå ç”¨ç‡é—®é¢˜è¿˜æ˜¯è®©æˆ‘æƒ³å°è¯•å…¶å®ƒçš„åˆ†å¸ƒå¼æ¡†æ¶ã€‚è¿™æ¬¡è®°å½•minioçš„é…ç½®è¿‡ç¨‹ã€‚</p>

<h2 id="ä»‹ç»">ä»‹ç»</h2>

<p><a href="https://min.io">Minio</a>æ˜¯ä¸€ä¸ªå¼€æºçš„åˆ†å¸ƒå¼å¯¹è±¡å­˜å‚¨æœåŠ¡ï¼Œä¸“æ³¨äºé«˜æ€§èƒ½ã€é«˜å¯ç”¨æ€§å’Œè½»é‡çº§çš„è®¾è®¡ï¼Œæœ‰ä»¥ä¸‹ä¸¤ä¸ªåŸºæœ¬ç‰¹å¾ï¼š</p>

<ol>
  <li>
    <p><strong>å¯¹è±¡å­˜å‚¨æœåŠ¡</strong>ï¼šMinIO æ˜¯ä¸€ä¸ªå¯¹è±¡å­˜å‚¨æœåŠ¡ï¼Œå®ƒå…è®¸ç”¨æˆ·ä»¥ç±»ä¼¼æ–‡ä»¶ç³»ç»Ÿçš„æ–¹å¼å­˜å‚¨å’Œæ£€ç´¢å¤§è§„æ¨¡æ•°æ®ã€‚è¿™ç§å­˜å‚¨æ–¹å¼é€‚ç”¨äºäº‘åŸç”Ÿåº”ç”¨ç¨‹åºã€å¤§æ•°æ®åˆ†æã€å¤‡ä»½å’Œå½’æ¡£ç­‰åœºæ™¯ã€‚</p>
  </li>
  <li>
    <p><strong>åˆ†å¸ƒå¼æ¶æ„</strong>ï¼šMinIO ä½¿ç”¨åˆ†å¸ƒå¼æ¶æ„ï¼Œå¯ä»¥åœ¨å¤šä¸ªèŠ‚ç‚¹ä¸Šå¹¶è¡Œå­˜å‚¨å’Œæ£€ç´¢æ•°æ®ã€‚è¿™ç§æ¶æ„å¯ä»¥æä¾›é«˜æ‰©å±•æ€§å’Œé«˜æ€§èƒ½ï¼Œä½¿å¾— MinIO èƒ½å¤Ÿåº”å¯¹å¤§è§„æ¨¡æ•°æ®å­˜å‚¨çš„éœ€æ±‚ã€‚</p>
  </li>
</ol>

<h2 id="æ­¥éª¤">æ­¥éª¤</h2>

<p>ç¯å¢ƒ ubuntu20.04</p>

<ol>
  <li>å®‰è£…</li>
</ol>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>wget https://dl.min.io/server/minio/release/linux-amd64/archive/minio_20240406052602.0.0_amd64.deb <span class="nt">-O</span> minio.deb
<span class="nb">sudo </span>dpkg <span class="nt">-i</span> minio.deb

<span class="nb">mkdir</span> /data
<span class="nb">mkdir</span> /data/drive1
<span class="nb">mkdir</span> /data/drive2
<span class="nb">mkdir</span> /data/drive3
<span class="nb">mkdir</span> /data/drive4
</code></pre></div></div>

<p>é…ç½®:</p>

<ul>
  <li>åœ¨<code class="language-plaintext highlighter-rouge">/etc/hosts</code> ä¸­
    <div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>ip_1 N1
ip_2 N2
</code></pre></div>    </div>
  </li>
  <li>åœ¨<code class="language-plaintext highlighter-rouge">~/.bashrc</code>ä¸­</li>
</ul>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nb">export </span><span class="nv">MINIO_ACCESS_KEY</span><span class="o">=</span>minioadmin
<span class="nb">export </span><span class="nv">MINIO_SECRET_KEY</span><span class="o">=</span>minioadmin
<span class="nb">export </span><span class="nv">CI</span><span class="o">=</span><span class="nb">true
export </span><span class="nv">MINIO_CI_CD</span><span class="o">=</span><span class="nb">true</span>
</code></pre></div></div>

<p>å¯åŠ¨:</p>

<p>åœ¨ä¸¤ä¸ªèŠ‚ç‚¹ä¸­ï¼š</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nb">nohup </span>minio server http://N<span class="o">{</span>1..2<span class="o">}</span>:9000/data/drive<span class="o">{</span>1...4<span class="o">}</span> &amp;
</code></pre></div></div>

<p>äºå‘½ä»¤è¡Œä¸­è®¿é—®æ–‡ä»¶ <code class="language-plaintext highlighter-rouge">nohup.out</code> æŸ¥çœ‹ <code class="language-plaintext highlighter-rouge">webUI</code> ç«¯å£è¿›è¡Œè®¿é—®å³å¯ã€‚</p>

<h3 id="å‘½ä»¤è¡Œç«¯-mc">å‘½ä»¤è¡Œç«¯ MC</h3>

<p>å®‰è£…</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>wget https://dl.min.io/client/mc/release/linux-amd64/mc
<span class="nb">chmod</span> +x mc
<span class="nb">sudo mv </span>mc /usr/local/bin/mc
</code></pre></div></div>

<p>è®¾ç½®ç”¨æˆ·</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>mc <span class="nb">alias set local </span>http://your_ip:9000 minioadmin minioadmin
</code></pre></div></div>

<p>æ“ä½œï¼š</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>mc <span class="nt">--help</span> æŸ¥çœ‹å‘½ä»¤å¸®åŠ©
</code></pre></div></div>

<p>åŸºæœ¬çš„è·¯å¾„æ ¼å¼æ˜¯ <code class="language-plaintext highlighter-rouge">alias è®¾ç½®çš„ç™»å½•å+æ¡¶å+å¯¹è±¡è·¯å¾„</code> ã€‚</p>

<p>åˆ›å»ºæ¡¶</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>mc mb minio-server/test
</code></pre></div></div>

<p>æ¯”å¦‚æŸ¥çœ‹<code class="language-plaintext highlighter-rouge">b1</code> ç›®å½•ä¸‹çš„æ–‡ä»¶ï¼š</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>mc <span class="nb">ls </span>minio-server/test
</code></pre></div></div>

<p>å†æ¯”å¦‚ä¸Šä¼ æ–‡ä»¶</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>mc put test.txt minio-server/test
</code></pre></div></div>

<p>ä¸‹è½½æ–‡ä»¶</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>mc get minio-server/test/test.txt ./
</code></pre></div></div>

<p>å…¶å®ƒ</p>

<table>
  <thead>
    <tr>
      <th>å‘½ä»¤</th>
      <th>æè¿°</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td><code class="language-plaintext highlighter-rouge">alias</code></td>
      <td>åœ¨é…ç½®æ–‡ä»¶ä¸­ç®¡ç†æœåŠ¡å™¨å‡­æ®</td>
    </tr>
    <tr>
      <td><code class="language-plaintext highlighter-rouge">admin</code></td>
      <td>ç®¡ç†MinIOæœåŠ¡å™¨</td>
    </tr>
    <tr>
      <td><code class="language-plaintext highlighter-rouge">anonymous</code></td>
      <td>ç®¡ç†å¯¹å­˜å‚¨æ¡¶å’Œå¯¹è±¡çš„åŒ¿åè®¿é—®</td>
    </tr>
    <tr>
      <td><code class="language-plaintext highlighter-rouge">batch</code></td>
      <td>ç®¡ç†æ‰¹å¤„ç†ä½œä¸š</td>
    </tr>
    <tr>
      <td><code class="language-plaintext highlighter-rouge">cp</code></td>
      <td>å¤åˆ¶å¯¹è±¡</td>
    </tr>
    <tr>
      <td><code class="language-plaintext highlighter-rouge">cat</code></td>
      <td>æ˜¾ç¤ºå¯¹è±¡å†…å®¹</td>
    </tr>
    <tr>
      <td><code class="language-plaintext highlighter-rouge">diff</code></td>
      <td>åˆ—å‡ºä¸¤ä¸ªå­˜å‚¨æ¡¶ä¹‹é—´å¯¹è±¡åç§°ã€å¤§å°å’Œæ—¥æœŸçš„å·®å¼‚</td>
    </tr>
    <tr>
      <td><code class="language-plaintext highlighter-rouge">du</code></td>
      <td>é€’å½’æ€»ç»“ç£ç›˜ä½¿ç”¨æƒ…å†µ</td>
    </tr>
    <tr>
      <td><code class="language-plaintext highlighter-rouge">encrypt</code></td>
      <td>ç®¡ç†å­˜å‚¨æ¡¶åŠ å¯†é…ç½®</td>
    </tr>
    <tr>
      <td><code class="language-plaintext highlighter-rouge">event</code></td>
      <td>ç®¡ç†å¯¹è±¡é€šçŸ¥</td>
    </tr>
    <tr>
      <td><code class="language-plaintext highlighter-rouge">find</code></td>
      <td>æœç´¢å¯¹è±¡</td>
    </tr>
    <tr>
      <td><code class="language-plaintext highlighter-rouge">get</code></td>
      <td>å°†S3å¯¹è±¡è·å–åˆ°æœ¬åœ°</td>
    </tr>
    <tr>
      <td><code class="language-plaintext highlighter-rouge">head</code></td>
      <td>æ˜¾ç¤ºå¯¹è±¡çš„å‰nè¡Œ</td>
    </tr>
    <tr>
      <td><code class="language-plaintext highlighter-rouge">ilm</code></td>
      <td>ç®¡ç†å­˜å‚¨æ¡¶ç”Ÿå‘½å‘¨æœŸ</td>
    </tr>
    <tr>
      <td><code class="language-plaintext highlighter-rouge">idp</code></td>
      <td>ç®¡ç†MinIOèº«ä»½æä¾›è€…æœåŠ¡å™¨é…ç½®</td>
    </tr>
    <tr>
      <td><code class="language-plaintext highlighter-rouge">license</code></td>
      <td>è®¸å¯è¯ç›¸å…³å‘½ä»¤</td>
    </tr>
    <tr>
      <td><code class="language-plaintext highlighter-rouge">legalhold</code></td>
      <td>ç®¡ç†å¯¹è±¡çš„æ³•å¾‹ä¿ç•™</td>
    </tr>
    <tr>
      <td><code class="language-plaintext highlighter-rouge">ls</code></td>
      <td>åˆ—å‡ºå­˜å‚¨æ¡¶å’Œå¯¹è±¡</td>
    </tr>
    <tr>
      <td><code class="language-plaintext highlighter-rouge">mb</code></td>
      <td>åˆ›å»ºä¸€ä¸ªå­˜å‚¨æ¡¶</td>
    </tr>
    <tr>
      <td><code class="language-plaintext highlighter-rouge">mv</code></td>
      <td>ç§»åŠ¨å¯¹è±¡</td>
    </tr>
    <tr>
      <td><code class="language-plaintext highlighter-rouge">mirror</code></td>
      <td>å°†å¯¹è±¡åŒæ­¥åˆ°è¿œç¨‹ç«™ç‚¹</td>
    </tr>
    <tr>
      <td><code class="language-plaintext highlighter-rouge">od</code></td>
      <td>æµ‹é‡å•ä¸ªæµä¸Šä¼ å’Œä¸‹è½½</td>
    </tr>
    <tr>
      <td><code class="language-plaintext highlighter-rouge">ping</code></td>
      <td>æ‰§è¡Œå­˜æ´»æ€§æ£€æŸ¥</td>
    </tr>
    <tr>
      <td><code class="language-plaintext highlighter-rouge">pipe</code></td>
      <td>å°†æ ‡å‡†è¾“å…¥æµä¼ è¾“åˆ°å¯¹è±¡</td>
    </tr>
    <tr>
      <td><code class="language-plaintext highlighter-rouge">put</code></td>
      <td>å°†å¯¹è±¡ä¸Šä¼ åˆ°å­˜å‚¨æ¡¶</td>
    </tr>
    <tr>
      <td><code class="language-plaintext highlighter-rouge">quota</code></td>
      <td>ç®¡ç†å­˜å‚¨æ¡¶é…é¢</td>
    </tr>
    <tr>
      <td><code class="language-plaintext highlighter-rouge">rm</code></td>
      <td>åˆ é™¤å¯¹è±¡</td>
    </tr>
    <tr>
      <td><code class="language-plaintext highlighter-rouge">retention</code></td>
      <td>ä¸ºå¯¹è±¡è®¾ç½®ä¿ç•™æœŸ</td>
    </tr>
    <tr>
      <td><code class="language-plaintext highlighter-rouge">rb</code></td>
      <td>åˆ é™¤ä¸€ä¸ªå­˜å‚¨æ¡¶</td>
    </tr>
    <tr>
      <td><code class="language-plaintext highlighter-rouge">replicate</code></td>
      <td>é…ç½®æœåŠ¡å™¨ç«¯å­˜å‚¨æ¡¶å¤åˆ¶</td>
    </tr>
    <tr>
      <td><code class="language-plaintext highlighter-rouge">ready</code></td>
      <td>æ£€æŸ¥é›†ç¾¤æ˜¯å¦å°±ç»ª</td>
    </tr>
    <tr>
      <td><code class="language-plaintext highlighter-rouge">sql</code></td>
      <td>åœ¨å¯¹è±¡ä¸Šè¿è¡ŒSQLæŸ¥è¯¢</td>
    </tr>
    <tr>
      <td><code class="language-plaintext highlighter-rouge">stat</code></td>
      <td>æ˜¾ç¤ºå¯¹è±¡å…ƒæ•°æ®</td>
    </tr>
    <tr>
      <td><code class="language-plaintext highlighter-rouge">support</code></td>
      <td>æ”¯æŒç›¸å…³å‘½ä»¤</td>
    </tr>
    <tr>
      <td><code class="language-plaintext highlighter-rouge">share</code></td>
      <td>ç”Ÿæˆä¸´æ—¶è®¿é—®å¯¹è±¡çš„URL</td>
    </tr>
    <tr>
      <td><code class="language-plaintext highlighter-rouge">tree</code></td>
      <td>ä»¥æ ‘çŠ¶æ ¼å¼åˆ—å‡ºå­˜å‚¨æ¡¶å’Œå¯¹è±¡</td>
    </tr>
    <tr>
      <td><code class="language-plaintext highlighter-rouge">tag</code></td>
      <td>ç®¡ç†å­˜å‚¨æ¡¶å’Œå¯¹è±¡çš„æ ‡ç­¾</td>
    </tr>
    <tr>
      <td><code class="language-plaintext highlighter-rouge">undo</code></td>
      <td>æ’¤é”€PUT/DELETEæ“ä½œ</td>
    </tr>
    <tr>
      <td><code class="language-plaintext highlighter-rouge">update</code></td>
      <td>å°†mcæ›´æ–°åˆ°æœ€æ–°ç‰ˆæœ¬</td>
    </tr>
    <tr>
      <td><code class="language-plaintext highlighter-rouge">version</code></td>
      <td>ç®¡ç†å­˜å‚¨æ¡¶ç‰ˆæœ¬æ§åˆ¶</td>
    </tr>
    <tr>
      <td><code class="language-plaintext highlighter-rouge">watch</code></td>
      <td>ç›‘å¬å¯¹è±¡é€šçŸ¥äº‹ä»¶</td>
    </tr>
  </tbody>
</table>

<h2 id="å‚è€ƒ">å‚è€ƒ</h2>

<ul>
  <li>https://www.youtube.com/watch?v=zSKhvmWIO2k</li>
  <li>https://min.io/docs/minio/linux/operations/install-deploy-manage/deploy-minio-multi-node-multi-drive.html</li>
  <li>https://min.io/docs/minio/linux/operations/install-deploy-manage/deploy-minio-single-node-single-drive.html</li>
  <li>https://min.io/docs/minio/linux/index.html#procedure</li>
</ul>]]></content><author><name>ç”²ä¸</name></author><category term="é…ç½®" /><category term="minio" /><summary type="html"><![CDATA[å¦‚æœåªæ˜¯æƒ³ç”¨åˆ†å¸ƒå¼æ–‡ä»¶ç³»ç»Ÿï¼Œå…¶å®hadoopä¹Ÿå¯ä»¥ï¼Œä½†åœ¨é…ç½®hbaseçš„è¿‡ç¨‹ä¸­å‡ºç°çš„èŠ‚ç‚¹ä¸¢å¤±å’Œé«˜cpuå ç”¨ç‡é—®é¢˜è¿˜æ˜¯è®©æˆ‘æƒ³å°è¯•å…¶å®ƒçš„åˆ†å¸ƒå¼æ¡†æ¶ã€‚è¿™æ¬¡è®°å½•minioçš„é…ç½®è¿‡ç¨‹ã€‚]]></summary></entry><entry><title type="html">Segfaultç®€ä»‹</title><link href="/segfault%E7%AE%80%E4%BB%8B/" rel="alternate" type="text/html" title="Segfaultç®€ä»‹" /><published>2024-04-19T00:00:00+08:00</published><updated>2024-04-19T00:00:00+08:00</updated><id>/segfault%E7%AE%80%E4%BB%8B</id><content type="html" xml:base="/segfault%E7%AE%80%E4%BB%8B/"><![CDATA[<p>è®°å½•ä¸€ä¸ªå¯ä»¥å…è´¹ä½¿ç”¨vpsçš„ç½‘ç«™ï¼Œ<a href="https://shell.segfault.net">segfault</a>ã€‚</p>

<p>ç›´æ¥ç™»å½•å³å¯è·å¾—ä¸€ä¸ªvpsï¼Œä¼šç»™å‡ºä¸€ä¸ª<code class="language-plaintext highlighter-rouge">Secret</code>ç”¨äºå†æ¬¡ç™»å½•ã€‚</p>

<p><img src="/assets/post_images/image-20240420080409217.png" alt="" /></p>
<h2 id="é™åˆ¶">é™åˆ¶</h2>

<p>å½“ç„¶æœ‰ä¸€å®šé™åˆ¶ï¼š</p>

<p><img src="/assets/post_images/image-20240420080800998.png" alt="" /></p>

<p>ç”³è¯·çš„æ—¶å€™ç­‰60ç§’ï¼Œè¿™ä¸ªæ— æ‰€è°“ã€‚</p>

<p>ç½‘ç»œæµé‡å—é™åˆ¶ï¼Œä½†æ˜¯å®é™…ä¸Šç™»å½•åçš„ä¸‹è½½é€Ÿåº¦å¹¶ä¸æ…¢ã€‚</p>

<p>cpuå—é™ï¼Œä½†æ˜¯å¯¹äºè¿è¡Œemacsä¹‹ç±»å°ç»„ä»¶è€Œè¨€çš„æ²¡æœ‰ä»€ä¹ˆé—®é¢˜ï¼Œå¯ç”¨å¤–å­˜ä¼°è®¡ä¸è¿‡1Gï¼Œå› ä¸ºä¹‹å‰å•å•å°è¯•<code class="language-plaintext highlighter-rouge">sudo update</code> <code class="language-plaintext highlighter-rouge">sudo upgrade</code> ç£ç›˜ç©ºé—´å°±æ»¡äº†ã€‚</p>

<p>å¯èƒ½è¢«è‡ªåŠ¨å°ç¦ï¼Œä»¥åŠç™»å‡ºåæœåŠ¡å™¨å…³é—­ï¼Œæ‰€ä»¥ä¸é€‚åˆéœ€è¦æŒç»­åŒ–å­˜å‚¨çš„ä½œä¸šã€‚</p>

<p>æ ¹æ® <code class="language-plaintext highlighter-rouge">https://thc.org/sf/token</code> çš„è¯´æ³•ï¼Œ<code class="language-plaintext highlighter-rouge">token</code> æ˜¯éå–å“ï¼Œä½ éœ€è¦è®¿é—®ä»¥ä¸‹telegram é¢‘é“ï¼š</p>

<p><img src="assets/post_images/image-20240420081410897.png" alt="" /></p>

<p>ç„¶åç”¨ç¬¦åˆä¸‹è¿°æ ‡å‡†çš„ç†ç”±æå‡ºç”³è¯·ï¼š</p>

<ul>
  <li>å‚ä¸è®¨è®ºã€‚</li>
  <li>å¸®åŠ©ç®¡ç†å‘˜/ç³»ç»Ÿç®¡ç†å‘˜ï¼›ç®¡ç†ç¾¤èŠã€‚</li>
  <li>åˆ†äº«ä½ çš„æƒ³æ³•ã€è¯„è®ºå’Œé¡¾è™‘ã€‚</li>
  <li>å¯»æ‰¾æ¼æ´ã€‚</li>
  <li>ä¸ºç¤¾åŒºåšè´¡çŒ®çš„é¡¹ç›®ã€‚</li>
  <li>æ–°é¢–ä¸”ä»¤äººå…´å¥‹çš„é¡¹ç›®ã€‚</li>
  <li>æ‹¯æ•‘ä¸–ç•Œã€‚</li>
  <li>é»‘å®¢è¡ŒåŠ¨ä¸»ä¹‰å’ŒITå®‰å…¨ç ”ç©¶ã€‚</li>
</ul>

<h2 id="å‘½ä»¤è¡Œç™»å½•">å‘½ä»¤è¡Œç™»å½•</h2>

<p>é™¤äº†åœ¨ç½‘é¡µç«¯ç™»å½•ä¹‹å¤–ï¼Œè¿˜å¯ä»¥å‘½ä»¤è¡Œç™»å½•ã€‚</p>

<p><img src="/assets/post_images/image-20240420082946802.png" alt="" /></p>

<p>åœ¨æœ¬åœ°çš„<code class="language-plaintext highlighter-rouge">~/.ssh</code> ç›®å½•ä¸‹ï¼Œä½ éœ€è¦æŠŠ<code class="language-plaintext highlighter-rouge">openssh</code> çš„ç§åŒ™å¤åˆ¶åˆ°<code class="language-plaintext highlighter-rouge">id_sf-adm-segfault-net</code> ä¸­ï¼ŒæŠŠ<code class="language-plaintext highlighter-rouge">ssh_config</code> å†…å®¹å¤åˆ¶åˆ° <code class="language-plaintext highlighter-rouge">config</code> æ–‡ä»¶ä¸­ã€‚ç„¶åé€šè¿‡ <code class="language-plaintext highlighter-rouge">ssh server-name</code> å³å¯ç™»å½•ã€‚å½“ç„¶ä¹Ÿæœ‰ sftp å’Œ scp å‘½ä»¤ç”¨äºä¼ è¾“æ–‡ä»¶ã€‚<code class="language-plaintext highlighter-rouge">scp</code> çš„ç”¨æ³•æ˜¯ï¼š</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>scp &lt;server-name&gt;:/path/to/file /local/path
</code></pre></div></div>

<h2 id="å…³äºå¤–éƒ¨ç«¯å£è®¿é—®">å…³äºå¤–éƒ¨ç«¯å£è®¿é—®</h2>

<p><code class="language-plaintext highlighter-rouge">segfault</code>çš„vps é»˜è®¤ä¸æä¾›å…¬ç½‘ipï¼Œæ‰€ä»¥æ˜¯ä¸èƒ½ç›´æ¥ä»å¤–éƒ¨è®¡ç®—æœºè®¿é—®çš„ï¼Œè¦è®¿é—®éœ€è¦ç”¨ç‰¹å®šæ–¹å¼æ‰“å¼€ç«¯å£ï¼Œåœ¨è¿™é‡Œç»™å‡ºä¸€ç§å®ç°æ–¹æ¡ˆï¼š</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c"># Request a random public TCP port:</span>
curl sf/port
<span class="nb">echo</span> <span class="s2">"Your public IP:PORT is </span><span class="si">$(</span><span class="nb">cat</span> /config/self/reverse_ip<span class="si">)</span><span class="s2">:</span><span class="si">$(</span><span class="nb">cat</span> /config/self/reverse_port<span class="si">)</span><span class="s2">"</span>
</code></pre></div></div>

<p>ä½ çš„tcpç«¯å£å’Œipä¼šå­˜æ”¾åœ¨ <code class="language-plaintext highlighter-rouge">/config/self</code> ç›®å½•ä¸‹çš„ <code class="language-plaintext highlighter-rouge">reverse_ip</code> å’Œ <code class="language-plaintext highlighter-rouge">reverse_port</code> æ–‡ä»¶ä¸­ã€‚åœ¨è¿™é‡Œæµ‹è¯•<code class="language-plaintext highlighter-rouge">trilium</code> æˆ–è€… <code class="language-plaintext highlighter-rouge">emacs</code> çš„ <code class="language-plaintext highlighter-rouge">elnode</code> æˆ–è®¸ä¼šå¾ˆæœ‰è¶£ğŸ˜„ã€‚</p>

<h2 id="å‚è€ƒ">å‚è€ƒ</h2>

<ul>
  <li>https://www.thc.org/sf/faq/</li>
  <li>https://github.com/hackerschoice/thc-tips-tricks-hacks-cheat-sheet#tunnel</li>
</ul>]]></content><author><name>ç”²ä¸</name></author><category term="ç®€ä»‹" /><summary type="html"><![CDATA[è®°å½•ä¸€ä¸ªå¯ä»¥å…è´¹ä½¿ç”¨vpsçš„ç½‘ç«™ï¼Œsegfaultã€‚]]></summary></entry><entry><title type="html">Hbase é…ç½® (å¤±è´¥)</title><link href="/hbase-%E9%85%8D%E7%BD%AE-(%E5%A4%B1%E8%B4%A5)/" rel="alternate" type="text/html" title="Hbase é…ç½® (å¤±è´¥)" /><published>2024-04-15T00:00:00+08:00</published><updated>2024-04-15T00:00:00+08:00</updated><id>/hbase%20%E9%85%8D%E7%BD%AE%20(%E5%A4%B1%E8%B4%A5)</id><content type="html" xml:base="/hbase-%E9%85%8D%E7%BD%AE-(%E5%A4%B1%E8%B4%A5)/"><![CDATA[<h2 id="ç›®æ ‡">ç›®æ ‡</h2>

<p>ç†Ÿæ‚‰hbaseé…ç½®çš„åŸºæœ¬æµç¨‹</p>

<h2 id="é›†ç¾¤éƒ¨ç½²">é›†ç¾¤éƒ¨ç½²</h2>

<h3 id="ç¯å¢ƒè¯´æ˜">ç¯å¢ƒè¯´æ˜</h3>

<p>ä¸¤å°ubuntu20.04 VPSã€‚</p>

<h3 id="hadoop">hadoop</h3>

<ol>
  <li>åœ¨ä¸¤ä¸ªvpsä¸­ç”¨ <code class="language-plaintext highlighter-rouge">ssh-keygen -t rsa</code> å‘½ä»¤ç”Ÿæˆå¯†åŒ™æ–‡ä»¶ï¼Œå¤åˆ¶åˆ°å¦ä¸€ä¸ªvpsçš„ <code class="language-plaintext highlighter-rouge">~/.ssh/authorized_keys</code> ä¸­ï¼Œå®ç°å…å¯†ç™»å½•ã€‚</li>
  <li>åœ¨<code class="language-plaintext highlighter-rouge">/etc/hosts</code> ä¸­ä¿®æ”¹ip-ä¸»æœºåæ˜ å°„å…³ç³»ã€‚åœ¨<code class="language-plaintext highlighter-rouge">/etc/hostname</code>æ–‡ä»¶ä¸­ä¿®æ”¹ä¸»æœºåï¼Œ<code class="language-plaintext highlighter-rouge">reboot</code> ä½¿ä¸»æœºåä¿®æ”¹ç”Ÿæ•ˆã€‚</li>
  <li>ä¸‹è½½<a href="https://jdk.java.net/java-se-ri/11">jdk-11</a>å¹¶è§£å‹ï¼Œå¢åŠ JAVA_HOME åˆ° <code class="language-plaintext highlighter-rouge">~/.bashrc</code> æ–‡ä»¶ä¸­ï¼Œç”¨<code class="language-plaintext highlighter-rouge">source</code> å‘½ä»¤ä½¿ä¹‹ç”Ÿæ•ˆã€‚</li>
  <li>ä»å®˜ç½‘ä¸‹è½½<a href="https://hadoop.apache.org/releases.html">hadoop-3.9.2</a>ç‰ˆæœ¬å¹¶è§£å‹ã€‚</li>
</ol>

<ul>
  <li>
    <p>ä¿®æ”¹æ–‡ä»¶</p>
  </li>
  <li>
    <p>hadoop-env.sh å¢åŠ å†…å®¹</p>
  </li>
</ul>

<div class="language-sh highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nb">export </span><span class="nv">JAVA_HOME</span><span class="o">=</span>/root/src/jdk-11
<span class="nv">HDFS_DATANODE_USER</span><span class="o">=</span>root
<span class="nv">HDFS_NAMENODE_USER</span><span class="o">=</span>root
<span class="nv">HDFS_SECONDARYNAMENODE_USER</span><span class="o">=</span>root
</code></pre></div></div>

<ul>
  <li>core-site.xml ä¿®æ”¹é…ç½®</li>
</ul>

<div class="language-xml highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nt">&lt;configuration&gt;</span>
	<span class="nt">&lt;property&gt;</span>
		<span class="nt">&lt;name&gt;</span>fs.defaultFS<span class="nt">&lt;/name&gt;</span>
		<span class="nt">&lt;value&gt;</span>hdfs://G:9000<span class="nt">&lt;/value&gt;</span>
	<span class="nt">&lt;/property&gt;</span>
	<span class="nt">&lt;property&gt;</span>
		<span class="nt">&lt;name&gt;</span>hadoop.tmp.dir<span class="nt">&lt;/name&gt;</span>
		<span class="nt">&lt;value&gt;</span>/root/data/tmp<span class="nt">&lt;/value&gt;</span>
	<span class="nt">&lt;/property&gt;</span>
<span class="nt">&lt;/configuration&gt;</span>
</code></pre></div></div>

<ul>
  <li>hdfs-site.xml ä¿®æ”¹é…ç½®</li>
</ul>

<div class="language-xml highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nt">&lt;configuration&gt;</span>
	<span class="nt">&lt;property&gt;</span>
		<span class="nt">&lt;name&gt;</span>dfs.namenode.name.dir<span class="nt">&lt;/name&gt;</span>
		<span class="nt">&lt;value&gt;</span>/root/data/namenode<span class="nt">&lt;/value&gt;</span>
	<span class="nt">&lt;/property&gt;</span>
	
	<span class="nt">&lt;property&gt;</span>
	<span class="nt">&lt;name&gt;</span>dfs.datanode.data.dir<span class="nt">&lt;/name&gt;</span>
		<span class="nt">&lt;value&gt;</span>/root/data/datanode<span class="nt">&lt;/value&gt;</span>
	<span class="nt">&lt;/property&gt;</span>
	<span class="nt">&lt;property&gt;</span>
	<span class="nt">&lt;name&gt;</span>dfs.replication<span class="nt">&lt;/name&gt;</span>
		<span class="nt">&lt;value&gt;</span>2<span class="nt">&lt;/value&gt;</span>
	<span class="nt">&lt;/property&gt;</span>
<span class="nt">&lt;/configuration&gt;</span>
</code></pre></div></div>

<ul>
  <li>workers ä¿®æ”¹é…ç½®</li>
</ul>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>G
J
</code></pre></div></div>

<p>ç”¨<code class="language-plaintext highlighter-rouge">scp</code> å‘½ä»¤åŒæ­¥VPSæ–‡ä»¶ä¿®æ”¹ã€‚</p>

<ol>
  <li>
    <p>æ ¼å¼åŒ–ï¼š <code class="language-plaintext highlighter-rouge">/path/to/hadoop/bin/hdfs namenode -format</code></p>
  </li>
  <li>
    <p>å¯åŠ¨hdfsï¼š<code class="language-plaintext highlighter-rouge">/path/to/hadoop/sbin/start-dfs.sh</code>ï¼Œè®¿é—®9870ç«¯å£æŸ¥çœ‹hdfsæ˜¯å¦æ­£å¸¸å¯åŠ¨ã€‚</p>
  </li>
</ol>

<p><img src="/assets/post_images/Pasted image 20240414073338.png" alt="123" /></p>
<ol>
  <li>å¯åŠ¨yarnï¼š</li>
</ol>

<ul>
  <li>hadoop-env.sh å¢åŠ å†…å®¹ï¼š</li>
</ul>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nb">export </span><span class="nv">YARN_RESOURCEMANAGER_USER</span><span class="o">=</span>root
<span class="nb">export </span><span class="nv">YARN_NODEMANAGER_USER</span><span class="o">=</span>root
</code></pre></div></div>

<ul>
  <li>yarn-site.xml å¢åŠ å†…å®¹ï¼š</li>
</ul>

<div class="language-xml highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nt">&lt;property&gt;</span>
	<span class="nt">&lt;name&gt;</span>yarn.resourcemanager.hostname<span class="nt">&lt;/name&gt;</span>
	<span class="nt">&lt;value&gt;</span>G<span class="nt">&lt;/value&gt;</span>
<span class="nt">&lt;/property&gt;</span>
</code></pre></div></div>

<ul>
  <li>æ‰§è¡Œå‘½ä»¤ï¼š<code class="language-plaintext highlighter-rouge">/path/to/hadoop/sbin/start-yarn.sh</code>ï¼Œè®¿é—®8088ç«¯å£æŸ¥çœ‹yarnæ˜¯å¦æ­£å¸¸å·¥ä½œï¼š</li>
</ul>

<p><img src="/assets/post_images/Pasted image 20240414073731.png" alt="123" />
å¯ä»¥çœ‹åˆ°ï¼Œä¸¤ä¸ªèŠ‚ç‚¹æ­£å¸¸å·¥ä½œã€‚</p>

<h3 id="zookeeper">zookeeper</h3>

<ol>
  <li><code class="language-plaintext highlighter-rouge">weget</code>å‘½ä»¤ä»å®˜ç½‘ä¸‹è½½<a href="https://zookeeper.apache.org/releases.html">zookeeper-3.9.2</a>å¹¶è§£å‹ã€‚</li>
  <li>ä¿®æ”¹é…ç½®æ–‡ä»¶ï¼š</li>
</ol>

<ul>
  <li>zoo.cfg in vps1</li>
</ul>

<pre><code class="language-cfg">tickTime=2000
dataDir=/var/lib/zookeeper
clientPort=2181
initLimit=5
syncLimit=2
server.1=0.0.0.0:2888:3888
server.2=J:2888:3888
</code></pre>
<ul>
  <li>zoo.cfg in vps2</li>
</ul>

<pre><code class="language-cfg">tickTime=2000
dataDir=/var/lib/zookeeper
clientPort=2181
initLimit=5
syncLimit=2
server.1=G:2888:3888
server.2=0.0.0.0:2888:3888
</code></pre>
<ol>
  <li>åœ¨ä¸¤ä¸ªvpsåˆ†åˆ«æ‰§è¡Œ<code class="language-plaintext highlighter-rouge">/path/to/zookeeper/bin/zkServer.sh start</code> å¯åŠ¨zookeeperã€‚</li>
  <li>æ‰§è¡Œ<code class="language-plaintext highlighter-rouge">/path/to/zookeeper/bin/zkCli.sh -server 127.0.0.1:2181</code> <code class="language-plaintext highlighter-rouge">ls /</code> ç¡®ä¿ zookeeper å·¥ä½œã€‚
    <h3 id="hbase">hbase</h3>
  </li>
  <li>å®˜ç½‘ä¸‹è½½<a href="https://hbase.apache.org/downloads.html">hbase-2.5.8</a>å¹¶è§£å‹ã€‚</li>
  <li>ä¿®æ”¹æ–‡ä»¶
    <ul>
      <li>åœ¨hbase-site.xmlä¸­
```xml</li>
    </ul>
  </li>
</ol>
<property>
    <name>hbase.cluster.distributed</name>
    <value>true</value>
  </property>
<property>
    <name>hbase.tmp.dir</name>
    <value>/root/data/hbase/tmp</value>
  </property>
<property>
    <name>hbase.unsafe.stream.capability.enforce</name>
    <value>false</value>
  </property>
<property>
    <name>hbase.zookeeper.quorum</name>
    <value>G,J</value>
  </property>
<property>
    <name>hbase.zookeeper.property.dataDir</name>
    <value>/root/data/zookeeper</value>
  </property>
<property>
    <name>hbase.zookeeper.property.clientPort</name>
    <value>2181</value>
  </property>
<property>
    <name>hbase.master.info.port</name>
    <value>16010</value>
  </property>
<p>&lt;/configuration&gt;</p>
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>
- åœ¨conf/regionserversæ–‡ä»¶ä¸­å¢åŠ ï¼š
</code></pre></div></div>
<p>G
J</p>
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>
- åœ¨conf/æ–‡ä»¶å¤¹ä¸‹æ–°å»ºæ–‡ä»¶backup-mastersï¼Œå†…å®¹ä¸ºï¼š
</code></pre></div></div>
<p>J</p>
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>- æ›¿æ¢hadoop-jaråŒ…
```bash
rm /path/to/hbase/lib/hadoop*.jar
find /path/to/hadoop/share/hadoop -name "hadoop*.jar" | xargs -i cp {} /path/to/hbase/lib/
</code></pre></div></div>

<ul>
  <li>scpå‘½ä»¤åŒæ­¥æ–‡ä»¶
    <div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>scp /path/to/hbase root@J:/path/to/habase
</code></pre></div>    </div>
  </li>
  <li>é“¾æ¥æ–‡ä»¶
    <div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nb">ln</span> <span class="nt">-s</span> /path/to/hadoop/etc/hadoop/core-site.xml  /path/to/hbase/conf/core-site.xml
<span class="nb">ln</span> <span class="nt">-s</span> /path/to/hadoop/etc/hadoop/hdfs-site.xml  /path/to/hbase/conf/hdfs-site.xml
</code></pre></div>    </div>
    <ol>
      <li>å¯åŠ¨æœåŠ¡ï¼š<code class="language-plaintext highlighter-rouge">/path/to/hbase/bin/start-hbase.sh</code></li>
      <li>è®¿é—®ç«¯å£ï¼š16010æŸ¥çœ‹hbaseæ˜¯å¦æ­£å¸¸å·¥ä½œã€‚</li>
    </ol>
  </li>
</ul>

<p><img src="/assets/post_images/20240414-b.png" alt="" /></p>
<ul>
  <li>jpsæŸ¥çœ‹ç³»ç»ŸçŠ¶æ€ï¼š</li>
</ul>

<p>ä»èŠ‚ç‚¹ï¼š</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>root@J:~# jps
1314 DataNode
1843 QuorumPeerMain
1597 NodeManager
7454 Jps
</code></pre></div></div>
<p>ä¸»èŠ‚ç‚¹ï¼š</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>root@G:~/src/hbase-2.5.8/conf# jps
11009 Jps
1330 NameNode
2467 SecondaryNameNode
3285 QuorumPeerMain
2845 NodeManager
2670 ResourceManager
</code></pre></div></div>

<p>é—®é¢˜ï¼šä¸»èŠ‚ç‚¹Hmaster å’Œ HReigonServer è¿›ç¨‹ä¸¢å¤±ï¼Œä»èŠ‚ç‚¹HreigonServer ä¸¢å¤±ã€‚</p>

<p>åœ¨ Hbaseä¸­è¾“å…¥æŒ‡ä»¤ï¼Œåªè¿”å›é”™è¯¯ï¼š</p>

<p><img src="/assets/post_images/20240414-c.png" alt="" /></p>

<h2 id="æ€»ç»“">æ€»ç»“</h2>

<ul>
  <li>ç›®å‰å°è¯•è¿‡çš„è§£å†³ç­–ç•¥åŒ…æ‹¬ï¼š</li>
</ul>

<ol>
  <li><a href="https://segmentfault.com/q/1010000000606670">å…¨åˆ†å¸ƒå¼HBaseå¯åŠ¨åHMasterå’ŒHRegionServerè‡ªåŠ¨æ¶ˆå¤±</a> ï¼šåˆ é™¤<code class="language-plaintext highlighter-rouge">/etc/hosts</code> ä¸­çš„127.0.0.1è¡Œï¼Œå¤±è´¥ã€‚</li>
  <li><a href="https://blog.csdn.net/weixin_34238633/article/details/91907325">regionserver.HRegionServer: Failed construction RegionServer</a>ï¼šå¤åˆ¶<code class="language-plaintext highlighter-rouge">/path/to/hbase/lib/client-facing-thirdparty</code> ä¸‹çš„ <code class="language-plaintext highlighter-rouge">htrace-core-3.1.0</code> åˆ° <code class="language-plaintext highlighter-rouge">/path/to/hbase/lib</code> ç›®å½•ä¸­ï¼Œå¤±è´¥ã€‚</li>
</ol>

<p>hbase çš„æ—¥å¿—æ–‡ä»¶<code class="language-plaintext highlighter-rouge">hbase-root-master-G.log</code> æŠ¥é”™å¦‚ä¸‹ï¼š</p>
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>2024-04-14T14:47:17,496 ERROR [main] regionserver.HRegionServer: Failed construction RegionServer
java.lang.StackOverflowError: null
        at java.util.concurrent.locks.AbstractQueuedSynchronizer.release(AbstractQueuedSynchronizer.java:1302) ~[?:?]
        at java.util.concurrent.locks.ReentrantLock.unlock(ReentrantLock.java:439) ~[?:?]
        at java.util.concurrent.LinkedBlockingDeque.offerLast(LinkedBlockingDeque.java:355) ~[?:?]
        at java.util.concurrent.LinkedBlockingDeque.addLast(LinkedBlockingDeque.java:325) ~[?:?]
</code></pre></div></div>

<ul>
  <li>è¿›ä¸€æ­¥è§£å†³ç­–ç•¥</li>
</ul>

<p>å…³äºhbaseå’Œzookeeperï¼Œç”±äºå·²ç»é€šè¿‡shellå’Œwebç•Œé¢éªŒè¯è¿‡ï¼Œåº”æ— é…ç½®é—®é¢˜ã€‚æœ‰å¯èƒ½æ˜¯hadoopã€hbaseå’Œzookeeperç‰ˆæœ¬ä¹‹é—´çš„ä¸å…¼å®¹ï¼Œæˆ–è€…ä»ç„¶å­˜åœ¨habaseçš„é…ç½®é”™è¯¯ã€‚ä¸€æ–¹é¢å¯ä»¥åœ¨æŸ¥è¯¢èµ„æ–™ï¼Œé‡æ–°æ£€éªŒé…ç½®æ–‡ä»¶ï¼Œå¦ä¸€æ–¹é¢å¯ä»¥è€ƒè™‘ä¼ªåˆ†å¸ƒå¼æ¥ç»§ç»­å®éªŒã€‚</p>

<h2 id="å‚è€ƒ">å‚è€ƒ</h2>

<ul>
  <li><a href="https://blog.csdn.net/qq_27525611/article/details/108114893">CSDN: Hadoopå®Œæ•´æ­å»ºè¿‡ç¨‹ï¼ˆå››ï¼‰ï¼šå®Œå…¨åˆ†å¸ƒæ¨¡å¼ï¼ˆæœåŠ¡å™¨ï¼‰</a></li>
  <li><a href="https://zookeeper.apache.org/doc/current/zookeeperStarted.html">ZooKeeper Getting Started Guide</a></li>
  <li><a href="https://stackoverflow.com/questions/30940981/zookeeper-error-cannot-open-channel-to-x-at-election-address">Zookeeper error: Cannot open channel to X at election address</a></li>
  <li><a href="https://hbase.apache.org/book.html">Hbase refference guide 2.4:Fully Distributed for Production</a></li>
  <li><a href="https://segmentfault.com/q/1010000000606670">å…¨åˆ†å¸ƒå¼HBaseå¯åŠ¨åHMasterå’ŒHRegionServerè‡ªåŠ¨æ¶ˆå¤±</a></li>
  <li><a href="https://blog.csdn.net/weixin_34238633/article/details/91907325">regionserver.HRegionServer: Failed construction RegionServer</a></li>
</ul>]]></content><author><name>ç”²ä¸</name></author><category term="å¤±è´¥" /><category term="åˆ†å¸ƒå¼" /><summary type="html"><![CDATA[ç›®æ ‡]]></summary></entry><entry><title type="html">Tlaplusï¼šæ“ä½œç¬¦å’Œå‡½æ•°</title><link href="/tlaplus-%E6%93%8D%E4%BD%9C%E7%AC%A6%E5%92%8C%E5%87%BD%E6%95%B0/" rel="alternate" type="text/html" title="Tlaplusï¼šæ“ä½œç¬¦å’Œå‡½æ•°" /><published>2024-04-12T00:00:00+08:00</published><updated>2024-04-12T00:00:00+08:00</updated><id>/tlaplus%EF%BC%9A%E6%93%8D%E4%BD%9C%E7%AC%A6%E5%92%8C%E5%87%BD%E6%95%B0</id><content type="html" xml:base="/tlaplus-%E6%93%8D%E4%BD%9C%E7%AC%A6%E5%92%8C%E5%87%BD%E6%95%B0/"><![CDATA[<p>äº†è§£ä¸€ä¸‹ tlaplus çš„æ“ä½œç¬¦å’Œå‡½æ•°ã€‚</p>

<h2 id="tla-çš„å˜é‡">TLA+ çš„å˜é‡</h2>
<h3 id="q1tla-æœ‰ä»€ä¹ˆè‡ªå®šä¹‰æ“ä½œç¬¦">Q1ï¼šTLA+ æœ‰ä»€ä¹ˆè‡ªå®šä¹‰æ“ä½œç¬¦ï¼Ÿ</h3>

<ul>
  <li>æˆ‘æ¯”è¾ƒæ„Ÿå…´è¶£çš„æ˜¯ç”¨æˆ·è‡ªå®šä¹‰æ“ä½œç¬¦ï¼š</li>
</ul>

<pre><code class="language-tla+">set ++ elem == set \union {elem}
set -- elem == set \ {elem}
&gt;&gt; {1, 2} ++ 3
{1, 2, 3}
&gt;&gt; {1, 2} â€“ 2
{1}
</code></pre>

<p>ç°åœ¨å¯ä¸å¯ä»¥å§fovisä¹‹ç±»çš„å®šä¹‰äº†å‘¢ï¼Ÿ</p>

<pre><code class="language-tla+">mio \ifvp vio \da ilio == IFVP(mio, vio, ilio) 
</code></pre>

<p>å¥½åƒä¸å¯ä»¥ã€‚</p>

<pre><code class="language-tla+">mio  vio -da ilio == IFVP(mio, vio, ilio) 
</code></pre>

<p>éº»çƒ¦äº†ã€‚åªèƒ½å®šä¹‰ä¸¤å…ƒè¿ç®—ç¬¦ã€‚</p>

<p>ç°åœ¨å®šä¹‰ä¸€ä¸‹å…ƒç´ çš„æµåŠ¨å§ï¼š</p>

<p>ä¸€ä¸ªå…ƒç´ ä»fovis åˆ° fogimæ€ä¹ˆå¤„ç†ï¼Ÿ</p>

<p>ç°æœ‰çš„è¡¨è¾¾æ–¹å¼æ˜¯ï¼š <code class="language-plaintext highlighter-rouge">mio \ elem; vio \ elem; ilio \union elem;</code></p>

<p>è€Œæˆ‘æœŸå¾…æ›´åŠ ç®€æ´çš„è¡¨è¾¾ï¼š<code class="language-plaintext highlighter-rouge">elem rfvffgd moko</code></p>

<p>æ•´ç†ä¸€ä¸ªè¡¨æ ¼å§ï¼š</p>

<table>
  <thead>
    <tr>
      <th>ASCii</th>
      <th>å›¾åƒ</th>
      <th>æ„ä¹‰</th>
      <th>ASCii</th>
      <th>ç¬¦å·</th>
      <th>æ„ä¹‰</th>
      <th>ASCII</th>
      <th>ç¬¦å·</th>
      <th>æ„ä¹‰</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td><code class="language-plaintext highlighter-rouge">++</code></td>
      <td>$++$</td>
      <td>fofos</td>
      <td>Â </td>
      <td>\(\sqcap\)</td>
      <td>Â </td>
      <td>Â </td>
      <td>\(\sim\)</td>
      <td>Â </td>
    </tr>
    <tr>
      <td><code class="language-plaintext highlighter-rouge">--</code></td>
      <td>$â€“$</td>
      <td>focos</td>
      <td>Â </td>
      <td>\(\sqcup\)</td>
      <td>Â </td>
      <td>Â </td>
      <td>\(\simeq\)</td>
      <td>Â </td>
    </tr>
    <tr>
      <td><code class="language-plaintext highlighter-rouge">**</code></td>
      <td>$**$</td>
      <td>Â </td>
      <td>Â </td>
      <td>\(\odot\)</td>
      <td>Â </td>
      <td>Â </td>
      <td>\(\approx\)</td>
      <td>Â </td>
    </tr>
    <tr>
      <td><code class="language-plaintext highlighter-rouge">//</code></td>
      <td>Â </td>
      <td>Â </td>
      <td>Â </td>
      <td>\(\prec\)</td>
      <td>Â </td>
      <td>Â </td>
      <td>\(\cong\)</td>
      <td>Â </td>
    </tr>
    <tr>
      <td><code class="language-plaintext highlighter-rouge">^^</code></td>
      <td>Â </td>
      <td>Â </td>
      <td>Â </td>
      <td>\(\preceq\)</td>
      <td>Â </td>
      <td>Â </td>
      <td>\(\doteq\)</td>
      <td>Â </td>
    </tr>
    <tr>
      <td><code class="language-plaintext highlighter-rouge">&amp;&amp;</code></td>
      <td>Â </td>
      <td>Â </td>
      <td>Â </td>
      <td>\(\succ\)</td>
      <td>Â </td>
      <td>Â </td>
      <td>\(\asymp\)</td>
      <td>Â </td>
    </tr>
    <tr>
      <td><code class="language-plaintext highlighter-rouge">%%</code></td>
      <td>Â </td>
      <td>Â </td>
      <td>Â </td>
      <td>\(\succeq\)</td>
      <td>Â </td>
      <td>Â </td>
      <td>\(\bigcirc\)</td>
      <td>Â </td>
    </tr>
    <tr>
      <td><code class="language-plaintext highlighter-rouge">@@</code></td>
      <td>Â </td>
      <td>Â </td>
      <td>Â </td>
      <td>\(\ll\)</td>
      <td>Â </td>
      <td>Â </td>
      <td>\(\propto\)</td>
      <td>Â </td>
    </tr>
    <tr>
      <td><code class="language-plaintext highlighter-rouge">##</code></td>
      <td>Â </td>
      <td>Â </td>
      <td>Â </td>
      <td>\(\gg\)</td>
      <td>Â </td>
      <td>Â </td>
      <td>\(\wr\)</td>
      <td>Â </td>
    </tr>
    <tr>
      <td><code class="language-plaintext highlighter-rouge">$$</code></td>
      <td>Â </td>
      <td>Â </td>
      <td>Â </td>
      <td>\(\sqsubset\)</td>
      <td>Â </td>
      <td>Â </td>
      <td>\(\uplus\)</td>
      <td>Â </td>
    </tr>
    <tr>
      <td><code class="language-plaintext highlighter-rouge">!!</code></td>
      <td>Â </td>
      <td>Â </td>
      <td>Â </td>
      <td>\(\sqsupset\)</td>
      <td>Â </td>
      <td>Â </td>
      <td>Â </td>
      <td>Â </td>
    </tr>
    <tr>
      <td><code class="language-plaintext highlighter-rouge">??</code></td>
      <td>Â </td>
      <td>åˆ¤æ–­ç»´è§£çŠ¶æ€</td>
      <td>Â </td>
      <td>\(\subset\)</td>
      <td>Â </td>
      <td>Â </td>
      <td>Â </td>
      <td>Â </td>
    </tr>
    <tr>
      <td><code class="language-plaintext highlighter-rouge">$</code></td>
      <td>Â </td>
      <td>Â </td>
      <td>Â </td>
      <td>\(\supset\)</td>
      <td>Â </td>
      <td>Â </td>
      <td>Â </td>
      <td>Â </td>
    </tr>
    <tr>
      <td><code class="language-plaintext highlighter-rouge">\bullet</code></td>
      <td>$\bullet$</td>
      <td>Â </td>
      <td>Â </td>
      <td>\(|-\)</td>
      <td>Â </td>
      <td>Â </td>
      <td>Â </td>
      <td>Â </td>
    </tr>
    <tr>
      <td><code class="language-plaintext highlighter-rouge">\star</code></td>
      <td>$\star$</td>
      <td>Â </td>
      <td>Â </td>
      <td>\(-|\)</td>
      <td>Â </td>
      <td>Â </td>
      <td>Â </td>
      <td>Â </td>
    </tr>
    <tr>
      <td><code class="language-plaintext highlighter-rouge">\|</code></td>
      <td>Â </td>
      <td>Â </td>
      <td>Â </td>
      <td>\(=|\)</td>
      <td>Â </td>
      <td>Â </td>
      <td>Â </td>
      <td>Â </td>
    </tr>
    <tr>
      <td><code class="language-plaintext highlighter-rouge">&amp;</code></td>
      <td>Â </td>
      <td>Â </td>
      <td>Â </td>
      <td>\(|=\)</td>
      <td>Â </td>
      <td>Â </td>
      <td>Â </td>
      <td>Â </td>
    </tr>
  </tbody>
</table>

<p>å¦‚æœè€ƒè™‘åˆ°ç»´è§£æ€»è¦åœ¨æœ‰æ„ä¹‰çš„æŸä¸ªé›†åˆä¸Šè¿›è¡Œè®¡ç®—ã€‚é‚£ä¹ˆå®é™…ä¸Šï¼ŒMioå°±åº”è¯¥å…·æœ‰ä¸¤ä¸ªé›†åˆã€‚</p>

\[oso = [rio \mapsto \{1, 2, 5\}, fao \mapsto \{1, 2 ,3, 4\}]\]

<p>å½“ä¸¤ä¸ªé›†åˆç›¸äº’ä½œç”¨çš„æ—¶å€™å°±ä¼šäº§ç”Ÿç»´è§£ã€‚</p>

<p>æ¯”å¦‚è¯´ï¼š</p>

<p>\(oso_a = [rio \mapsto \{1, 2, 5\}, fao \mapsto \{1, 2 ,3, 4\}]\)
\(oso_b = [rio \mapsto \{1, 2, 6\}, fao \mapsto \{1, 2 ,3, 4\}]\)</p>

<p>åœ¨ faoç›¸åŒçš„æ„ä¹‰ä¸Šï¼Œaå’Œbå¯ä»¥è¿›è¡Œç»´è§£ã€‚</p>

<p>$Mok(oso_a, oso_b) \triangleq [mio \mapsto {1, 2, 5}, vio \mapsto {1, 2, 6}, ilio \mapsto {1, 2, 3, 4}]$</p>

<p>é‚£ä¹ˆæˆ‘æ€ä¹ˆè§„å®šç»´è§£çš„æ„ä¹‰å‘¢ï¼Ÿ</p>

<p>åˆ¤æ–­æ˜¯å¦ä¸ºæŸç§çŠ¶æ€ï¼Ÿ</p>

<p>é€‰å–æŸç§åŒºåŸŸçš„å…ƒç´ ï¼Ÿ</p>

<p>è¿˜æ˜¯è¯´åœ¨è¿›å…¥é›†åˆä¹‹å‰å…ˆä»é€»è¾‘ä¸Šåˆ¤æ–­ï¼Ÿ</p>

<p>é›†åˆå’Œé€»è¾‘ï¼Œæ„Ÿè§‰å¥½éº»çƒ¦ã€‚</p>

<pre><code class="language-tla+">
define
    mio ++ vio == mio &lt;=&gt; vio
    mio -- vio == ~mio &lt;=&gt; vio
end define;
</code></pre>

<p>è¿™æ ·å¾ˆçœäº‹ï¼Œä½†æ˜¯æˆ‘éœ€è¦çš„æ˜¯é›†åˆè¿ç®—ã€‚</p>

<pre><code class="language-tla+">   \* symbol define
   DMM(Mio, Vio) == IF Mio.fao = Vio.fao THEN TRUE ELSE FALSE 
   M ++ V == /\ DMM(M, V)
             /\ IFFP([mio |-&gt; M.rio, vio |-&gt; V.rio, ilio |-&gt; M.fao])
   M -- V == /\ DMM(M, V)
             /\ IFCP([mio |-&gt; M.rio, vio |-&gt; V.rio, ilio |-&gt; M.fao])
             
   RIFO == [](a ++ b)
</code></pre>

<h3 id="q2tlaçš„é€»è¾‘æ“ä½œç¬¦">Q2ï¼šTLA+çš„é€»è¾‘æ“ä½œç¬¦</h3>

<ul>
  <li>
    <p><code class="language-plaintext highlighter-rouge">\A</code> å…¨éƒ¨</p>
  </li>
  <li>
    <p><code class="language-plaintext highlighter-rouge">\E</code> å­˜åœ¨</p>
  </li>
  <li>
    <p><code class="language-plaintext highlighter-rouge">=&gt;</code> é€»è¾‘åˆ¤æ–­ï¼Œè•´å«</p>
  </li>
  <li>
    <p><code class="language-plaintext highlighter-rouge">&lt;=&gt;</code> é€»è¾‘åˆ¤æ–­ï¼Œä¸æˆ–</p>
  </li>
</ul>

<h3 id="q3tlaçš„è¡¨è¾¾å¼æœ‰å“ªäº›">Q3ï¼šTLA+çš„è¡¨è¾¾å¼æœ‰å“ªäº›ï¼Ÿ</h3>

<p><strong>LET IN</strong></p>

<pre><code class="language-tla+">RotateRight(seq) ==
Â Â LET
Â Â Â Â last == seq[Len(seq)]
Â Â Â Â first == SubSeq(seq, 1, Len(seq) - 1)
Â Â IN &lt;&lt;last&gt;&gt; \o first
&gt;&gt; RotateRight(&lt;&lt;1, 2, 3&gt;&gt;)
&lt;&lt;3, 1, 2&gt;&gt;
</code></pre>

<p><strong>IF THEN ELSE</strong></p>

<p><code class="language-plaintext highlighter-rouge">IF Condition THEN Exp1 ELSE Exp2</code></p>

<p><strong>CHOOSE</strong></p>

<p>A case statement. Subsequent cases are marked by a <code class="language-plaintext highlighter-rouge">[]</code>.</p>

<pre><code class="language-tla+">CASE x = 1 -&gt; TRUE
Â Â [] x = 2 -&gt; TRUE
Â Â [] x = 3 -&gt; 7
Â Â [] OTHER -&gt; FALSE
</code></pre>

<p>CHOOSE x \in S : P(x) is â€œselect an x such that P(x) is true.â€</p>

<h2 id="tla-çš„å‡½æ•°">TLA+ çš„å‡½æ•°</h2>

<h3 id="q1domainå‡½æ•°çš„åŸŸ">Q1ï¼šDOMAINâ€”â€”å‡½æ•°çš„åŸŸ</h3>

<p>DOMAINï¼Œç»™äºˆä¸€ä¸ªå‡½æ•°å¯èƒ½çš„è¾“å…¥</p>

<blockquote>
  <p>If <code class="language-plaintext highlighter-rouge">func == [x \in set |-&gt; ...]</code> , then <code class="language-plaintext highlighter-rouge">DOMAIN func = set</code>.</p>
</blockquote>

<p>æµ‹è¯•ä¸€ä¸‹å§ã€‚</p>

<p><del>åœ¨tla+ä¸­å‡½æ•°è¾“å…¥ä¸€èˆ¬ç”¨ <code class="language-plaintext highlighter-rouge">[]</code> æ–¹æ‹¬å·æ‹¬èµ·æ¥ã€‚é‚£ä¹ˆåœ†æ‹¬å· <code class="language-plaintext highlighter-rouge">()</code> è¡¨ç¤ºä»€ä¹ˆå‘¢ï¼Ÿ</del></p>

<p>åœ¨è§„èŒƒä¸­å®šä¹‰å‡½æ•° fooã€‚</p>

<pre><code class="language-tla+">\* in define
foo(S) == [x \in S |-&gt; x + 1]
</code></pre>

<p>ç„¶ååœ¨æ£€æŸ¥ä¸­æµ‹è¯•ï¼š</p>

<p><code class="language-plaintext highlighter-rouge">foo(1..3)</code> =&gt; <code class="language-plaintext highlighter-rouge">&lt;&lt;2, 3, 4&gt;&gt;</code></p>

<p>å¦‚æœåœ¨fooå‰åŠ ä¸Š <code class="language-plaintext highlighter-rouge">DOMAIN</code> å‘¢ï¼Ÿ</p>

<p><code class="language-plaintext highlighter-rouge">DOMAIN {1, 2, 3}</code> =&gt; <code class="language-plaintext highlighter-rouge">{1, 2, 3}</code></p>

<p>å¦å¤–æœ‰ä¸€ä¸ªé—®é¢˜ï¼š</p>

<blockquote>
  <p>ä¸ºä»€ä¹ˆä»¥ä¸‹å½¢å¼åœ¨tla+ä¸­æ˜¯éæ³•è¡¨è¾¾ï¼Ÿ</p>
  <blockquote>
    <p><code class="language-plaintext highlighter-rouge">foo[1..3]</code></p>
  </blockquote>
</blockquote>

<p>æˆ‘æƒ³æ˜¯å› ä¸ºæˆ‘çš„å®šä¹‰æ˜¯ï¼š<code class="language-plaintext highlighter-rouge">foo(S) == [x \in S |-&gt; x + 1]</code></p>

<p>å¦‚æœä¿®æ”¹ä¸ºï¼š<code class="language-plaintext highlighter-rouge">foo[x \in 1..3] == "ok"</code></p>

<p>è¿›è¡Œæµ‹è¯•ï¼š<code class="language-plaintext highlighter-rouge">foo[1]</code> =&gt; <code class="language-plaintext highlighter-rouge">"ok"</code>ï¼Œ<code class="language-plaintext highlighter-rouge">DOMAIN foo</code> =&gt; <code class="language-plaintext highlighter-rouge">{1, 2, 3}</code></p>

<p>æ˜¯å¯ä»¥é€šè¿‡çš„ã€‚</p>

<blockquote>
  <p>é‚£ä¹ˆå¯ä»¥æŠŠ <code class="language-plaintext highlighter-rouge">foo[x \in 1..3]</code> æ›¿æ¢æˆ <code class="language-plaintext highlighter-rouge">foo(x \in 1..3)</code> å—ï¼Ÿ</p>
</blockquote>

<p>ä¸èƒ½ï¼Œå®šä¹‰<code class="language-plaintext highlighter-rouge">foo(x \in 1..3) == "ok"</code> ä¼šå‡ºé”™ã€‚</p>

<blockquote>
  <p>å¾ˆæ˜¾ç„¶åœ†æ‹¬å·çš„å®šä¹‰ä¸æ˜¯å‡½æ•°å®šä¹‰ï¼Œé‚£ä¹ˆåœ†æ‹¬å·å®šä¹‰äº†ä»€ä¹ˆå‘¢ï¼Ÿ</p>
</blockquote>

<p>â€”â€”<strong>æ“ä½œç¬¦</strong></p>

<blockquote>
  <p>é‚£ä¹ˆå‡½æ•°å¯ä»¥ç¼ºå°‘åŸŸçš„å®šä¹‰å—ï¼Ÿ</p>
</blockquote>

<p>ä¸èƒ½ï¼Œå®šä¹‰ <code class="language-plaintext highlighter-rouge">foo[x] == "ok"</code> ä¼šå‡ºé”™ï¼š</p>

<h3 id="q2å‡½æ•°çš„åˆ†æ”¯">Q2ï¼š@@â€”â€”å‡½æ•°çš„åˆ†æ”¯</h3>

<p>éœ€è¦å¯¼å…¥ TLC æ‰©å±•ã€‚</p>

<p><code class="language-plaintext highlighter-rouge">f @@ g</code> ç›¸å½“äº <code class="language-plaintext highlighter-rouge">Merge(f, g)</code>ï¼ŒåŠŸèƒ½æ˜¯æµ‹è¯•åŸŸçš„æ‰€æœ‰æƒ…å†µã€‚</p>

<p>é¦–å…ˆæ˜¯åœ¨å‡½æ•° <code class="language-plaintext highlighter-rouge">f</code> çš„åŸŸä¸­çš„å…ƒç´ ï¼Œæ ¹æ®å‡½æ•° <code class="language-plaintext highlighter-rouge">f</code> çš„æ˜ å°„è§„åˆ™å¾—åˆ°å€¼åŸŸã€‚</p>

<p>å…¶æ¬¡æ˜¯åœ¨å‡½æ•° <code class="language-plaintext highlighter-rouge">g</code> çš„åŸŸä¸­çš„å…ƒç´ ï¼Œæ ¹æ®å‡½æ•° <code class="language-plaintext highlighter-rouge">g</code> çš„æ˜ å°„è§„åˆ™å¾—åˆ°å€¼åŸŸã€‚</p>

<blockquote>
  <p>é‚£å¦‚æœå‡½æ•°f å’Œå‡½æ•° g çš„å€¼åŸŸé‡åˆäº†æ€ä¹ˆåŠï¼Ÿ</p>
</blockquote>

<p>å…¶ä¸­ï¼Œ<code class="language-plaintext highlighter-rouge">Merge</code> çš„å®šä¹‰å¦‚ä¸‹ï¼š</p>

<pre><code class="language-tla+">Merge(f, g) == [
Â Â x \in (DOMAIN f) \union (DOMAIN g) |-&gt;
Â Â Â Â IF x \in DOMAIN f THEN f[x] ELSE g[x]
Â Â ]
</code></pre>

<p>å¾ˆæ˜¾ç„¶ï¼Œå‡½æ•°<code class="language-plaintext highlighter-rouge">f</code>çš„åˆ¤æ–­æ˜¯æ›´åŠ ä¼˜å…ˆçš„ã€‚ä¸€ä¸ªå…ƒç´ é¦–å…ˆä¼šåœ¨ <code class="language-plaintext highlighter-rouge">f</code> çš„åŸŸä¸­è¿›è¡Œåˆ¤æ–­ï¼Œç„¶åæ‰æ˜¯ <code class="language-plaintext highlighter-rouge">g</code> ã€‚</p>

<p>æµ‹è¯•ï¼š</p>

<pre><code class="language-tla+">f[x \in 1..5] == "m"
g[x \in 2..9] == "k"
f @@ g
</code></pre>

<p>=&gt; <code class="language-plaintext highlighter-rouge">&lt;&lt;"m", "m", "m", "m", "m", "k", "k", "k", "k"&gt;&gt;</code></p>

<p>å¯ä»¥çœ‹åˆ°ï¼Œå‡½æ•° <code class="language-plaintext highlighter-rouge">f</code> å’Œå‡½æ•° <code class="language-plaintext highlighter-rouge">g</code> å­˜åœ¨åŸŸçš„äº¤é›† <code class="language-plaintext highlighter-rouge">2..5</code> ï¼Œæ­¤æ—¶åŸŸä¸­å…ƒç´ ä¾æ® <code class="language-plaintext highlighter-rouge">f</code> çš„è§„åˆ™æ˜ å°„åˆ°å€¼åŸŸä¸­ã€‚</p>
<h3 id="q3æ— åå‡½æ•°">Q3ï¼š:&gt;â€”â€”æ— åå‡½æ•°</h3>

<pre><code class="language-tla+">&gt;&gt; (2 :&gt; 3)[2]
3
&gt;&gt; ("a" :&gt; "b").a
"b"
</code></pre>

<p>çœ‹èµ·æ¥åƒæäº† lambdaï¼š</p>

<div class="language-lisp highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="p">(</span><span class="nb">funcall</span> <span class="p">(</span><span class="k">lambda</span> <span class="p">(</span><span class="nv">x</span><span class="p">)</span> <span class="p">(</span><span class="k">if</span> <span class="p">(</span><span class="nb">=</span> <span class="mi">2</span> <span class="mi">2</span><span class="p">)</span> <span class="mi">3</span><span class="p">))</span> <span class="mi">2</span><span class="p">)</span>
</code></pre></div></div>

<h3 id="q4å‡½æ•°çš„é›†åˆ">Q4ï¼šå‡½æ•°çš„é›†åˆ</h3>

<p><code class="language-plaintext highlighter-rouge">|-&gt;</code> ç”¨äºå‡½æ•°/ç»“æ„ä½“å†…çš„æ˜ å°„ï¼Œ<code class="language-plaintext highlighter-rouge">-&gt;</code> ç”¨äºå‡½æ•°é›†çš„æ˜ å°„ï¼Œçœ‹èµ·æ¥ä¼šäº§ç”Ÿç¬›å¡å°”ç§¯ã€‚</p>

<pre><code class="language-tla+">&gt;&gt; [s \in {"a", "b"} |-&gt; {1, 2}]
[a |-&gt; {1, 2}, b |-&gt; {1, 2}]
&gt;&gt; [{"a", "b"} -&gt; {1, 2}]
{ [a |-&gt; 1, b |-&gt; 1],
Â Â Â Â Â [a |-&gt; 1, b |-&gt; 2],
Â Â Â Â Â [a |-&gt; 2, b |-&gt; 1],
Â Â Â Â Â [a |-&gt; 2, b |-&gt; 2] }
</code></pre>

<p>æš‚æ—¶ä¸çŸ¥é“åº”è¯¥æ€ä¹ˆç”¨ã€‚</p>

<p>æµ‹è¯•ä¸€ä¸‹å§ï¼š</p>

<pre><code class="language-tla+">[{"siv", "kiv", "kig"} -&gt; {"m", "o", "k"}]
</code></pre>

<p>=&gt;</p>

<pre><code class="language-tla+">{ [siv |-&gt; "m", kiv |-&gt; "m", kig |-&gt; "m"],
     [siv |-&gt; "m", kiv |-&gt; "m", kig |-&gt; "o"],
     [siv |-&gt; "m", kiv |-&gt; "m", kig |-&gt; "k"],
     [siv |-&gt; "m", kiv |-&gt; "o", kig |-&gt; "m"],
     [siv |-&gt; "m", kiv |-&gt; "o", kig |-&gt; "o"],
     [siv |-&gt; "m", kiv |-&gt; "o", kig |-&gt; "k"],
     [siv |-&gt; "m", kiv |-&gt; "k", kig |-&gt; "m"],
     [siv |-&gt; "m", kiv |-&gt; "k", kig |-&gt; "o"],
     [siv |-&gt; "m", kiv |-&gt; "k", kig |-&gt; "k"],
     [siv |-&gt; "o", kiv |-&gt; "m", kig |-&gt; "m"],
     [siv |-&gt; "o", kiv |-&gt; "m", kig |-&gt; "o"],
     [siv |-&gt; "o", kiv |-&gt; "m", kig |-&gt; "k"],
     [siv |-&gt; "o", kiv |-&gt; "o", kig |-&gt; "m"],
     [siv |-&gt; "o", kiv |-&gt; "o", kig |-&gt; "o"],
     [siv |-&gt; "o", kiv |-&gt; "o", kig |-&gt; "k"],
     [siv |-&gt; "o", kiv |-&gt; "k", kig |-&gt; "m"],
     [siv |-&gt; "o", kiv |-&gt; "k", kig |-&gt; "o"],
     [siv |-&gt; "o", kiv |-&gt; "k", kig |-&gt; "k"],
     [siv |-&gt; "k", kiv |-&gt; "m", kig |-&gt; "m"],
     [siv |-&gt; "k", kiv |-&gt; "m", kig |-&gt; "o"],
     [siv |-&gt; "k", kiv |-&gt; "m", kig |-&gt; "k"],
     [siv |-&gt; "k", kiv |-&gt; "o", kig |-&gt; "m"],
     [siv |-&gt; "k", kiv |-&gt; "o", kig |-&gt; "o"],
     [siv |-&gt; "k", kiv |-&gt; "o", kig |-&gt; "k"],
     [siv |-&gt; "k", kiv |-&gt; "k", kig |-&gt; "m"],
     [siv |-&gt; "k", kiv |-&gt; "k", kig |-&gt; "o"],
     [siv |-&gt; "k", kiv |-&gt; "k", kig |-&gt; "k"] }
</code></pre>

<p>çœ‹èµ·æ¥çœŸçš„å¾ˆæ–¹ä¾¿ï¼Œç›´æ¥å¸®åŠ©æˆ‘ç½—åˆ—äº†æ‰€æœ‰å¯èƒ½ã€‚</p>

<h2 id="æ€»ç»“">æ€»ç»“</h2>

<p>åœ¨æœ¬ç¯‡ç¬”è®°ä¸­ï¼Œæˆ‘è®°å½•äº†è‡ªå·±äº†è§£ TLA+ åŸºæœ¬æ“ä½œç¬¦ï¼Œè¡¨è¾¾å¼å’Œå‡½æ•°çš„è¿‡ç¨‹ã€‚</p>

<p>è‡ªå®šä¹‰æ“ä½œç¬¦è™½ç„¶å¾ˆæœ‰æ„æ€ï¼Œä¸è¿‡åœ¨åŸºç¡€å­¦ä¹ çš„é˜¶æ®µï¼Œè¿˜æ˜¯äº†è§£å¥½ <code class="language-plaintext highlighter-rouge">\A</code> <code class="language-plaintext highlighter-rouge">\E</code> <code class="language-plaintext highlighter-rouge">f[x \in set]</code> è¿™äº›åŸºç¡€å®šä¹‰çš„ç‰¹æ€§è¦å¥½ä¸€ç‚¹ã€‚</p>]]></content><author><name>ç”²ä¸</name></author><category term="TLAplus" /><summary type="html"><![CDATA[äº†è§£ä¸€ä¸‹ tlaplus çš„æ“ä½œç¬¦å’Œå‡½æ•°ã€‚]]></summary></entry><entry><title type="html">Tlaplusï¼šç”µæŠ¥é—®é¢˜</title><link href="/tlaplus-%E7%94%B5%E6%8A%A5%E9%97%AE%E9%A2%98/" rel="alternate" type="text/html" title="Tlaplusï¼šç”µæŠ¥é—®é¢˜" /><published>2024-03-14T00:00:00+08:00</published><updated>2024-03-14T00:00:00+08:00</updated><id>/tlaplus%EF%BC%9A%E7%94%B5%E6%8A%A5%E9%97%AE%E9%A2%98</id><content type="html" xml:base="/tlaplus-%E7%94%B5%E6%8A%A5%E9%97%AE%E9%A2%98/"><![CDATA[<p>åœ¨ä¸€ä¸ªå°ç¼–ç¨‹ä¸­æµ‹è¯•tlaplusã€‚</p>

<h2 id="ç”µæŠ¥é—®é¢˜æè¿°">ç”µæŠ¥é—®é¢˜æè¿°</h2>

<p>ç°åœ¨è¯·ä½ è®¾è®¡ä¸€ä¸ªç”µæŠ¥äº¤æ¢ç³»ç»Ÿï¼ŒåŒ…æ‹¬ä»¥ä¸‹å‡ ä¸ªæ¡ä»¶ï¼š</p>

<ul>
  <li>æ¯ä¸€ä¸ªç”µæŠ¥åªèƒ½åœ¨é“¶è¡Œä¸­ä¸¤ä¸ªä¸åŒçš„äººé—´è¿›è¡Œä¼ é€’ï¼Œè€Œä¸”æ¯ä¸ªç”µæŠ¥è‡³å°‘ä¸€ç¾å…ƒã€‚</li>
  <li>å¦‚æœç”µæŠ¥æ˜¯æˆåŠŸçš„ï¼Œé‚£ä¹ˆç”µæŠ¥çš„å€¼ä¾¿ä¼šä»å‘é€è€…æ–¹å‡å»ï¼Œè€ŒåŠ åœ¨æ¥æ”¶æ–¹çš„è´¦æˆ·ä¸­ã€‚</li>
  <li>å¦‚æœç”µæŠ¥å¤±è´¥ï¼Œä¸¤ä¸ªè´¦æˆ·å°†æ²¡æœ‰ä»»ä½•æ”¹å˜ã€‚</li>
  <li>ç”µæŠ¥ä¸èƒ½è®©ä»»ä½•ä¸€ä¸ªè´¦æˆ·æ˜¯è´Ÿå€¼ã€‚</li>
  <li>å¤šä¸ªç”µæŠ¥å¯èƒ½åŒæ—¶å‘ç”Ÿã€‚</li>
</ul>

<h2 id="å•è¿›ç¨‹å»ºæ¨¡">å•è¿›ç¨‹å»ºæ¨¡</h2>

<h3 id="å•è¿›ç¨‹ä»£ç ">å•è¿›ç¨‹ä»£ç </h3>

<pre><code class="language-PlusCal">EXTENDS Integers

(*--algorithm wire
variables
    people = {"Zhang", "Wang"},
    acc = [p \in people |-&gt; 5],
    sender = "Zhang",
    reciver = "Wang",
    amount \in 1..4;
        
define
        NoOverdrafts == \A p \in people: acc[p] &gt;= 0
end define;

begin
    Withdraw:
        acc[sender] := acc[sender] - amount;
    Deposite:
        acc[reciver] := acc[reciver] + amount;
end algorithm;**)
</code></pre>

<h3 id="æŠ¥é”™æƒ…å†µè®¾ç½®">æŠ¥é”™æƒ…å†µè®¾ç½®</h3>

<p>å…¶ä¸­ï¼Œå¦‚æœä¿®æ”¹ amount çš„å€¼ä¸º èŒƒå›´ 1..6ï¼Œåˆ™ä¼šæŠ¥é”™ã€‚</p>

<p>å› ä¸ºå°å¼ å’Œå°ç‹çš„åˆå§‹é‡‘é¢éƒ½æ˜¯5ï¼Œå¦‚æœä¸€æ¬¡ç”µæŠ¥å‘é€6ç¾å…ƒï¼Œæ— è®ºè°å‘éƒ½ä¼šå‡ºç°è´Ÿå€¼ã€‚</p>

<p>ä¸è¿‡æœ‰æ„æ€çš„æ˜¯é”™è¯¯æ•°é‡ã€‚</p>

<p>åˆ†åˆ«è¯•è¯•æŠŠ <code class="language-plaintext highlighter-rouge">amount</code> è®¾ä¸º 1..7ï¼Œ1..9çœ‹çœ‹å§ã€‚</p>

<p>å¯ä»¥çœ‹åˆ°çš„æ˜¯ï¼Œé”™è¯¯æ£€æµ‹å§‹ç»ˆåªæŠ¥å‡ºä¸€ä¸ªé”™è¯¯ï¼Œä¼¼ä¹æ˜¯æ£€æµ‹åˆ°é”™è¯¯å°±åœæ­¢äº†ã€‚ä½†æ˜¯å¯åŒºåˆ†çš„çŠ¶æ€å´æœ‰æ‰€ä¸åŒã€‚</p>

<ul>
  <li>Diameterï¼ŒStates Foundï¼ŒDistinct Stateï¼ŒQueue Sizeåˆ†åˆ«æ˜¯ä»€ä¹ˆï¼Ÿæœ‰ä»€ä¹ˆæ–¹æ³•å¯ä»¥åœ¨æ— é”™çŠ¶æ€ä¸‹æŸ¥çœ‹æ‰§è¡Œè·¯å¾„ï¼Ÿ</li>
</ul>

<h2 id="å¤šè¿›ç¨‹å¤„ç†">å¤šè¿›ç¨‹å¤„ç†</h2>

<h3 id="å¤šè¿›ç¨‹ä»£ç ">å¤šè¿›ç¨‹ä»£ç </h3>

<pre><code class="language-PlusCal">EXTENDS Integers

(*--algorithm wire
variables
    people = {"Zhang", "Wang"},
    acc = [p \in people |-&gt; 5];
        
define
        NoOverdrafts == \A p \in people: acc[p] &gt;= 0
end define;

process Wire \in 1..2
    variables
        sender = "Zhang",
        reciver = "Wang",
        amount \in 1..acc[sender];

begin
    CheckFonds:
        if amount &lt;= acc[sender] then
            Withdraw:
                acc[sender] := acc[sender] - amount;
            Deposit:
                acc[reciver] := acc[reciver] + amount;
        end if;
end process;

end algorithm;**)

</code></pre>

<h3 id="error-trace">Error Trace</h3>

<p>æ‰§è¡Œä¸Šè¿°ä»£ç ï¼Œæˆ‘ä»¬æ¥çœ‹çœ‹ Error Trace æ˜¯ä»€ä¹ˆæ ·çš„å§ã€‚</p>

<p>çœ‹å®Œè¿™äº›ï¼Œä½ ä¼šå‘ç°ï¼Œpcä»£è¡¨æœºå™¨æ‰€å¤„çš„çŠ¶æ€ã€‚</p>

<p>é‡Œé¢çš„ä¸¤ä¸ªå€¼åˆ†åˆ«ä»£è¡¨ä¸¤ä¸ªæœºå™¨æœ¬èº«å¤„äºä»€ä¹ˆçŠ¶æ€ã€‚</p>

<p>é‚£ä¹ˆè¿™æ•´ä¸ªå †æ ˆæ˜¾ç¤ºäº†ä»€ä¹ˆé”™è¯¯å‘¢ï¼Ÿ</p>

<p>æˆ‘ä»¬å¯ä»¥çœ‹åˆ° amount çš„å€¼ä¸º<code class="language-plaintext highlighter-rouge">&lt;1, 5&gt;</code>ï¼Œè¿™æ„å‘³ç€åœ¨è¯¥æƒ…å½¢ä¸‹ï¼Œç¬¬ä¸€ä¸ªè¿›ç¨‹è¦å‘1ç¾å…ƒï¼Œç¬¬äºŒä¸ªè¿›ç¨‹è¦å‘5ç¾å…ƒè¿‡å»ã€‚</p>

<p>è€Œé”™è¯¯å‘ç”Ÿåœ¨ç¬¬å››æ­¥åˆ°ç¬¬äº”æ­¥ä¹‹é—´ã€‚å‘ç”Ÿäº†ä»€ä¹ˆå‘¢ï¼Ÿ</p>

<p>å°å¼ æƒ³ç»™å°ç‹å¯„5ç¾å…ƒé’±ï¼Œä½†æ˜¯åªæœ‰4ç¾å…ƒï¼Œå‡å»åå‘ç°è´¦æˆ·ä½™é¢å˜æˆè´Ÿä¸€ç¾å…ƒã€‚è¿™ç§é”™è¯¯è¶…è¿‡äº†<code class="language-plaintext highlighter-rouge">acc[p]&gt;0</code> çš„çº¦æŸæ¡ä»¶ã€‚</p>

<p>è€Œè¿™äº”ä¸ªæ­¥éª¤ä¸­æ•´ä½“å‘ç”Ÿäº†ä»€ä¹ˆå‘¢ï¼Ÿ</p>

<p>å°å¼ æƒ³ç»™å°ç‹å¯„é’±ï¼Œåœ¨å°ç‹è¿˜æ²¡æœ‰æ”¶åˆ°é’±æ—¶ï¼Œå°å¼ ç¬¬ä¸€æ¬¡å¯„ä¸€ç¾å…ƒï¼Œç¬¬äºŒæ¬¡å¯„äº”ç¾å…ƒï¼Œè´¦æˆ·å˜æˆè´Ÿå€¼ã€‚</p>

<h3 id="æŠŠ-check-å’Œ-withdraw-æ”¾åœ¨ä¸€èµ·">æŠŠ Check å’Œ Withdraw æ”¾åœ¨ä¸€èµ·</h3>

<p>é‚£æˆ‘ä»¬è¦æ€æ ·è§„é¿è¿™äº›é”™è¯¯å‘¢ï¼Ÿ</p>

<p>æ¥çœ‹çœ‹æ•™æç»™å‡ºçš„æ–¹æ¡ˆå§ã€‚</p>

<p>å®ƒæŠŠæ£€æŸ¥å’Œè´¦æˆ·å‡å‘é€é‡‘é¢çš„æ­¥éª¤åˆåœ¨äº†ä¸€èµ·ã€‚è¿™æ ·ï¼Œå½“å°å¼ å‘é€ä¸€ç¾å…ƒå®Œæˆæ£€æŸ¥æ—¶ï¼Œç”±äºé‡‘é¢ä¸€å¹¶è¢«å‡å»äº†ï¼Œæ‰€ä»¥è¿›ç¨‹äºŒæ£€æŸ¥æ—¶å‘é€çš„é‡‘é¢ä¸ä¼šå†è¶…è¿‡ç°æœ‰é‡‘é¢å››ç¾å…ƒã€‚</p>

<pre><code class="language-tla+">EXTENDS Integers

(*--algorithm wire
variables
    people = {"Zhang", "Wang"},
    acc = [p \in people |-&gt; 5];
        
define
        NoOverdrafts == \A p \in people: acc[p] &gt;= 0
end define;

process Wire \in 1..2
    variables
        sender = "Zhang",
        reciver = "Wang",
        amount \in 1..acc[sender];

begin
    CheckAndWithDraw:
        if amount &lt;= acc[sender] then
                acc[sender] := acc[sender] - amount;
            Deposit:
                acc[reciver] := acc[reciver] + amount;
        end if;
end process;

end algorithm;**)


\* BEGIN TRANSLATION
</code></pre>

<p>ç°åœ¨æ²¡æœ‰é—®é¢˜äº†ã€‚</p>

<h2 id="temporal-properties-æ—¶é—´å±æ€§">Temporal Properties æ—¶é—´å±æ€§</h2>

<p>ä¹‹åè¦åšä»€ä¹ˆï¼Ÿ</p>

<p>æ•´ä½“é‡‘é¢ä¸å˜çš„éƒ¨åˆ†ç§°ä¸º <code class="language-plaintext highlighter-rouge">Temporal Properties</code> ï¼Œä¸–ä¿—çš„å±æ€§ï¼Œæ—¶é—´çš„å±æ€§ã€‚è€Œæ¯æ¬¡é‡‘é¢ä¸å˜çš„å±æ€§ç§°ä¸º <code class="language-plaintext highlighter-rouge">invariants</code> ï¼Œä¹Ÿå°±æ˜¯ä¸å˜é‡ã€‚ä¸¤è€…æœ€å¤§çš„åŒºåˆ«ç›®å‰çœ‹æ¥æ˜¯æ˜¯å¦éœ€è¦è·¨è¶Šä¸åŒçš„ç³»ç»ŸçŠ¶æ€è¿›è¡Œæ£€æŸ¥ã€‚ <code class="language-plaintext highlighter-rouge">invariants</code> åªéœ€è¦åœ¨çŠ¶æ€å†…æ£€æŸ¥å±æ€§å°±å¯ä»¥äº†ã€‚ä¸è¿‡ <code class="language-plaintext highlighter-rouge">Temporal Properties</code> åˆ™éœ€è¦ç»¼åˆä¸åŒçš„ç³»ç»ŸçŠ¶æ€è€ƒè™‘çº¦æŸæ¡ä»¶ã€‚</p>

<p>è¯­æ³•æ ¼å¼å˜å¾—å¥‡æ€ªäº†ã€‚</p>

<p><code class="language-plaintext highlighter-rouge">EventuallyConsistent</code> ï¼Œæœ€ç»ˆä¸å˜çš„ã€‚</p>

<ul>
  <li>é—®é¢˜æ˜¯åœ¨ <code class="language-plaintext highlighter-rouge">PlusCal</code> ä¸­ï¼Œ<code class="language-plaintext highlighter-rouge">&lt;&gt;[]()</code> æ˜¯ä»€ä¹ˆè¡¨è¾¾ï¼Ÿ</li>
</ul>

<p>æ¥çœ‹çœ‹DuckDuckgoä¸Šæœ‰ä»€ä¹ˆç­”æ¡ˆå§ã€‚</p>

<p>é¦–å…ˆæ¥è§£é‡Š <code class="language-plaintext highlighter-rouge">&lt;&gt;[]P</code> è¿™ä¸ªè¡¨è¾¾çš„å«ä¹‰å§ã€‚</p>

<p>æ ¹æ®<a href="https://www.learntla.com/core/temporal-logic.html">TLCæ‰‹å†Œ</a>çš„è¡¨è¾¾ï¼Œ</p>

<table>
  <thead>
    <tr>
      <th style="text-align: left">è¯­æ³•</th>
      <th>å«ä¹‰</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td style="text-align: left"><code class="language-plaintext highlighter-rouge">[]P</code></td>
      <td>Pæ€»ä¸ºçœŸ</td>
    </tr>
    <tr>
      <td style="text-align: left"><code class="language-plaintext highlighter-rouge">&lt;&gt;P</code></td>
      <td>Pæœ€ç»ˆä¸ºçœŸ</td>
    </tr>
    <tr>
      <td style="text-align: left"><code class="language-plaintext highlighter-rouge">[]~P</code></td>
      <td>Pæ€»ä¸ºå‡</td>
    </tr>
    <tr>
      <td style="text-align: left"><code class="language-plaintext highlighter-rouge">~[]P</code></td>
      <td>Pä¸æ€»ä¸ºçœŸï¼Œæœ‰å‡çš„æƒ…å†µ</td>
    </tr>
    <tr>
      <td style="text-align: left"><code class="language-plaintext highlighter-rouge">&lt;&gt;[]P</code></td>
      <td>æœ€ç»ˆPæ€»ä¸ºçœŸï¼ˆä¸­é—´çŠ¶æ€å¯ä»¥ä¸ºå‡ï¼Œä½†é¦–å°¾çŠ¶æ€åº”ä¸ºçœŸï¼‰</td>
    </tr>
    <tr>
      <td style="text-align: left"><code class="language-plaintext highlighter-rouge">[]&lt;&gt;P</code></td>
      <td>Pæ€»æœ€ç»ˆä¸ºçœŸ</td>
    </tr>
  </tbody>
</table>

<p>çœ‹èµ·æ¥çœŸæ˜¯ç›¸å½“å¤æ‚çš„è¡¨è¿°ã€‚</p>

<p>é‚£ä¹ˆè¿™ç§å¯èƒ½æ€§ä¸­å‘ç”Ÿäº†ä»€ä¹ˆå‘¢ï¼Ÿ</p>

<p><img src="/assets/post_images/image-20240415192831616.png" alt="" /></p>

<ul>
  <li>æ©â€¦â€¦ä¸ºä»€ä¹ˆå°ç‹æ²¡æœ‰æ”¶åˆ°æœ€åä¸€å…ƒå‘¢ï¼Ÿ</li>
</ul>

<p>ç³»ç»Ÿè¿›è¡Œåˆ°ç¬¬äº”æ­¥çš„æ—¶å€™å‡ºé”™äº†ã€‚</p>

<p>å¤§æ¦‚æ„æ€å¯èƒ½æ˜¯ï¼Œåœ¨çŠ¶æ€4ï¼Œè¿›ç¨‹2åœæ­¢æ—¶ï¼ŒæŒ‰ç…§ <code class="language-plaintext highlighter-rouge">EventuallyConsistent</code> çš„å£°æ˜ï¼Œç³»ç»Ÿæ€»é‡‘é¢åº”è¯¥â€œæœ€ç»ˆâ€ç­‰äº10ã€‚ä¸è¿‡ç”±äºå¦ä¸€ä¸ªè¿›ç¨‹çš„1å…ƒè¿˜æ²¡æœ‰é€åˆ°ï¼Œæ‰€ä»¥ç³»ç»ŸçŠ¶æ€è¿åäº†æ—¶é—´å±æ€§çš„çº¦æŸï¼Œå°±æŠ¥é”™äº†ã€‚</p>

<ul>
  <li>é‚£æœ‰ä»€ä¹ˆå¤„ç†æ–¹æ³•å—ï¼Ÿ</li>
</ul>

<p>ä½œè€…è¯´ï¼Œå¯ä»¥æ”¾æ¾ <code class="language-plaintext highlighter-rouge">NoOverdrafts</code>æˆ– <code class="language-plaintext highlighter-rouge">EventuallyConsistent</code>  æ¡ä»¶ï¼Œå°è¯•ä¸åŒçš„æ‰§è¡Œï¼Œå‘Šè¯‰TLCplusåœ¨ <code class="language-plaintext highlighter-rouge">withdraw</code> å’Œ <code class="language-plaintext highlighter-rouge">deposit</code> ä¹‹é—´ä¸èƒ½ <code class="language-plaintext highlighter-rouge">stutter</code>ï¼Œæˆ–è€…å¹²è„†æŠŠ <code class="language-plaintext highlighter-rouge">check</code>ï¼Œ<code class="language-plaintext highlighter-rouge">withdraw</code> å’Œ <code class="language-plaintext highlighter-rouge">deposit</code> ä¸‰ä¸ªæ­¥éª¤ç»„æˆä¸€ä¸ªåŸå­ã€‚</p>

<h2 id="å‚è€ƒä¹¦ç±">å‚è€ƒä¹¦ç±</h2>

<ul>
  <li>Pratical TLA+, by Hilllel Wayne</li>
</ul>]]></content><author><name>ç”²ä¸</name></author><category term="å½¢å¼åŒ–éªŒè¯" /><summary type="html"><![CDATA[åœ¨ä¸€ä¸ªå°ç¼–ç¨‹ä¸­æµ‹è¯•tlaplusã€‚]]></summary></entry><entry><title type="html">Tlaplus pluscal</title><link href="/tlaplus-Pluscal/" rel="alternate" type="text/html" title="Tlaplus pluscal" /><published>2024-03-13T00:00:00+08:00</published><updated>2024-03-13T00:00:00+08:00</updated><id>/tlaplus%20Pluscal</id><content type="html" xml:base="/tlaplus-Pluscal/"><![CDATA[<p>æ¢ç´¢ä¸€ä¸‹ tlaplus pluscal çš„åŸºæœ¬åŠŸèƒ½ã€‚</p>

<h2 id="q1pluscalä»£ç çš„åŸºæœ¬æ ¼å¼æ˜¯æ€æ ·çš„">Q1ï¼šPluscalä»£ç çš„åŸºæœ¬æ ¼å¼æ˜¯æ€æ ·çš„ï¼Ÿ</h2>

<p>ä¸€ä¸ªæ ‡å‡†çš„Pluscalä»£ç ç”±ä»¥ä¸‹å‡ éƒ¨åˆ†ç»„æˆã€‚</p>

<pre><code class="language-tla+">---- (1) MODULE wire ----
EXTENDS Integers \* (2)
(*--algorithm wire \* (3)
Â Â Â Â variables (4)
Â Â Â Â Â Â Â Â people = {"alice", "bob"},
Â Â Â Â Â Â Â Â acc = [alice |-&gt; 5, bob |-&gt; 5];
begin \* (5)
Â Â Â Â skip;
end algorithm;*) (3)
==== \* (1)
</code></pre>

<p>å¯ä»¥çœ‹åˆ°ï¼Œä¸€ä¸ªæ ‡å‡†çš„ Pluscal ä»£ç ç”±ä¸Šè¿°äº”éƒ¨åˆ†ç»„æˆã€‚</p>

<h3 id="1é¦–å°¾æ ‡è¯†å’Œæ¨¡å‹å">ï¼ˆ1ï¼‰é¦–å°¾æ ‡è¯†å’Œæ¨¡å‹å</h3>

<pre><code class="language-tla+">---- MODULE name ----
contents of pluscal
====
</code></pre>

<h3 id="2å¯¼å…¥çš„åŒ…å">ï¼ˆ2ï¼‰å¯¼å…¥çš„åŒ…å</h3>

<pre><code class="language-tla+">EXTENDS Package-names
</code></pre>

<p>å¸¸ç”¨çš„åŒ…æœ‰ï¼šIntegers, â€¦</p>

<h3 id="3ç®—æ³•çš„èµ·æ­¢å£°æ˜ç”¨æ³¨é‡Šå£°æ˜å½¢å¼">ï¼ˆ3ï¼‰ç®—æ³•çš„èµ·æ­¢å£°æ˜ï¼Œç”¨æ³¨é‡Š+å£°æ˜å½¢å¼</h3>
<pre><code class="language-tla+">(*--algorithm name
...
end algorithm;*)
</code></pre>

<h3 id="4å˜é‡å£°æ˜">ï¼ˆ4ï¼‰å˜é‡å£°æ˜</h3>
<pre><code class="language-tla+">variables
	var_1 = value_1,
	var_2 = value_2,
	...
	var_n = value_n;
</code></pre>

<h3 id="5ç®—æ³•å£°æ˜">ï¼ˆ5ï¼‰ç®—æ³•å£°æ˜</h3>

<pre><code class="language-tla+">begin
	...;
</code></pre>

<h2 id="q2èƒ½ä¸èƒ½åœ¨tlaä¸­æµ‹è¯•è¯­å¥">Q2ï¼šèƒ½ä¸èƒ½åœ¨TLA+ä¸­æµ‹è¯•è¯­å¥ï¼Ÿ</h2>

<p>tla+ä¸­çš„è¡¨è¾¾è¦ä¹ˆæ˜¯ <strong>å€¼</strong>ï¼ˆvalueï¼‰ï¼Œè¦ä¹ˆæ˜¯ <strong>æ“ä½œç¬¦</strong>ï¼ˆoperatorï¼‰ã€‚</p>

<p>åœ¨ <code class="language-plaintext highlighter-rouge">Module Checking Results</code> æ ç›®ä¸‹å¯ä»¥çœ‹åˆ° <code class="language-plaintext highlighter-rouge">Evaluate Constant Expression</code> é€‰é¡¹ã€‚åœ¨Expression æ–‡æœ¬æ¡†ä¸­è¾“å…¥ tla+ è¡¨è¾¾å¼ï¼ŒæŒ‰ <code class="language-plaintext highlighter-rouge">F11</code> å³å¯åœ¨ Value çª—å£æŸ¥çœ‹è¯­å¥æ‰§è¡Œç»“æœã€‚</p>

<h2 id="q3tla-çš„åŸºæœ¬æ“ä½œç¬¦operatorsæœ‰å“ªäº›">Q3ï¼štla+ çš„åŸºæœ¬æ“ä½œç¬¦ï¼ˆoperatorsï¼‰æœ‰å“ªäº›ï¼Ÿ</h2>

<h3 id="1åŸºç¡€æ“ä½œç¬¦">ï¼ˆ1ï¼‰åŸºç¡€æ“ä½œç¬¦</h3>

<p>ç›´æ¥çœ‹è¡¨å¥½äº†ï¼š</p>

<table>
  <thead>
    <tr>
      <th>è¡¨è¾¾å¼</th>
      <th>æ„ä¹‰</th>
      <th>ä¾‹å­</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td><code class="language-plaintext highlighter-rouge">x = y</code></td>
      <td>ç­‰äºï¼ˆEqualï¼‰</td>
      <td><code class="language-plaintext highlighter-rouge">1 = 3</code> =&gt; <code class="language-plaintext highlighter-rouge">FALSE</code></td>
    </tr>
    <tr>
      <td><code class="language-plaintext highlighter-rouge">x /= y</code></td>
      <td>ä¸ç­‰äºï¼ˆNot Equalï¼‰</td>
      <td><code class="language-plaintext highlighter-rouge">1 /= 3</code> =&gt; <code class="language-plaintext highlighter-rouge">TRUE</code></td>
    </tr>
    <tr>
      <td><code class="language-plaintext highlighter-rouge">x # y</code></td>
      <td>ä¸ç­‰äºï¼ˆNot Equalï¼‰</td>
      <td>Â </td>
    </tr>
    <tr>
      <td><code class="language-plaintext highlighter-rouge">x /\ y</code></td>
      <td>ä¸”ï¼ˆandï¼‰</td>
      <td><code class="language-plaintext highlighter-rouge">TRUE /\ FALSE</code> =&gt; <code class="language-plaintext highlighter-rouge">FALSE</code></td>
    </tr>
    <tr>
      <td><code class="language-plaintext highlighter-rouge">x \/ y</code></td>
      <td>æˆ–ï¼ˆorï¼‰</td>
      <td><code class="language-plaintext highlighter-rouge">TRUE \/ FALSE</code> =&gt; <code class="language-plaintext highlighter-rouge">TRUE</code></td>
    </tr>
    <tr>
      <td><code class="language-plaintext highlighter-rouge">x := y</code></td>
      <td>è®¾ç½®ï¼ˆAssignmentï¼‰</td>
      <td>only in pluscal</td>
    </tr>
  </tbody>
</table>

<blockquote>
  <p><code class="language-plaintext highlighter-rouge">=</code> å’Œ <code class="language-plaintext highlighter-rouge">:=</code> çš„åŒºåˆ«æ˜¯ä»€ä¹ˆï¼Ÿ</p>
</blockquote>

<p>åœ¨Pluscal ä¸­ï¼Œ<code class="language-plaintext highlighter-rouge">x = y</code> å¦‚æœä¸æ˜¯ç¬¬ä¸€æ¬¡å£°æ˜xï¼Œæ„å‘³ç€ç›¸ç­‰åˆ¤æ–­ã€‚å¦‚æœæ˜¯ç¬¬ä¸€æ¬¡å£°æ˜xï¼Œåˆ™æ„å‘³ç€åˆå§‹åŒ–xçš„å€¼ã€‚<code class="language-plaintext highlighter-rouge">x := y</code> åˆ™æ„å‘³ç€é‡æ–°ç»™ x è®¾å®šå€¼ã€‚</p>

<p>è€Œåœ¨tla+ä¸­ï¼Œ<code class="language-plaintext highlighter-rouge">x = y</code> çš„åŠŸèƒ½å’ŒPluscalç›¸åŒã€‚ä½†æ˜¯é‡æ–°èµ‹å€¼é€‰é¡¹åˆ™ä»¥ <code class="language-plaintext highlighter-rouge">x' = new_vlue</code> æ–¹å¼è¿›è¡Œã€‚</p>

<h3 id="2é›†åˆ">ï¼ˆ2ï¼‰é›†åˆ</h3>

<p>é™¤äº†æ•´æ•°ï¼ˆIntegersï¼‰ä¹‹å¤–ï¼Œtla+è¿˜åŒ…æ‹¬é›†åˆï¼ˆsetï¼‰ã€å…ƒç»„ï¼ˆtuples/sequencesï¼‰ã€ç»“æ„ä½“ï¼ˆstructuresï¼‰å’Œå‡½æ•°ï¼ˆfunctionsï¼‰ã€‚</p>

<blockquote>
  <p><strong>é›†åˆ</strong>çš„æ‰€æœ‰çš„å…ƒç´ éƒ½å¿…é¡»æœ‰ç›¸åŒçš„ç±»å‹ã€‚
ä¾‹å¦‚ <code class="language-plaintext highlighter-rouge">A = {1, 2, 3}</code> æ˜¯åˆæ³•çš„ï¼Œå› ä¸ºæ‰€æœ‰å…ƒç´ éƒ½æ˜¯æ•´æ•°ã€‚
ä½†æ˜¯ <code class="language-plaintext highlighter-rouge">A = {1, 2, "3"}</code> åˆ™æ˜¯éæ³•çš„ï¼Œå› ä¸ºé›†åˆ A ä¸­åŒæ—¶åŒ…å«äº†æ•´æ•°å’Œå­—ç¬¦ä¸²ä¸¤ç§æ•°æ®ç±»å‹ã€‚</p>
</blockquote>

<h4 id="é›†åˆæ“ä½œç¬¦">é›†åˆæ“ä½œç¬¦</h4>

<p>é‚£ä¹ˆåœ¨tla+ä¸­é›†åˆçš„åŸºæœ¬æ“ä½œç¬¦æœ‰é‚£äº›å‘¢ï¼Ÿ</p>

<p>æ¥çœ‹çœ‹è¡¨æ ¼å§ï¼š</p>

<table>
  <thead>
    <tr>
      <th>è¡¨è¾¾å¼</th>
      <th>æ„ä¹‰</th>
      <th>ä¾‹å­</th>
      <th>å¤‡æ³¨</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td><code class="language-plaintext highlighter-rouge">x \in set</code></td>
      <td>x æ˜¯é›†åˆsetçš„å…ƒç´ </td>
      <td><code class="language-plaintext highlighter-rouge">1 \in 1..3</code> =&gt; <code class="language-plaintext highlighter-rouge">TRUE</code></td>
      <td>Â </td>
    </tr>
    <tr>
      <td><code class="language-plaintext highlighter-rouge">x \notin set</code></td>
      <td>xä¸æ˜¯é›†åˆsetçš„å…ƒç´ </td>
      <td><code class="language-plaintext highlighter-rouge">1 \notin 1..3</code> =&gt; <code class="language-plaintext highlighter-rouge">FALSE</code></td>
      <td>Â </td>
    </tr>
    <tr>
      <td><code class="language-plaintext highlighter-rouge">set1 \subsetq set2</code></td>
      <td>set1æ˜¯é›†åˆset2çš„å­é›†</td>
      <td><code class="language-plaintext highlighter-rouge">{1, 3} \subsetq 1..3</code> =&gt; <code class="language-plaintext highlighter-rouge">TRUE</code></td>
      <td>Â </td>
    </tr>
    <tr>
      <td><code class="language-plaintext highlighter-rouge">set1 \union set2</code></td>
      <td>æ±‚set1å’Œset2çš„å¹¶é›†</td>
      <td><code class="language-plaintext highlighter-rouge">{1, 3} \union {2}</code> =&gt; <code class="language-plaintext highlighter-rouge">{1, 2, 3}</code></td>
      <td>å…¶å®ƒè¡¨è¾¾ï¼š<code class="language-plaintext highlighter-rouge">\cup</code></td>
    </tr>
    <tr>
      <td><code class="language-plaintext highlighter-rouge">set1 \intersect set2</code></td>
      <td>æ±‚set1å’Œset2çš„äº¤é›†</td>
      <td><code class="language-plaintext highlighter-rouge">{1, 3} \intersect {1, 4}</code> =&gt; <code class="language-plaintext highlighter-rouge">{1}</code></td>
      <td>å…¶å®ƒè¡¨è¾¾ï¼š<code class="language-plaintext highlighter-rouge">\cap</code></td>
    </tr>
    <tr>
      <td><code class="language-plaintext highlighter-rouge">set1 \ set2</code></td>
      <td>æ±‚set1å’Œset2çš„å·®é›†</td>
      <td><code class="language-plaintext highlighter-rouge">{1, 3} \ {3}</code> =&gt; <code class="language-plaintext highlighter-rouge">{1}</code></td>
      <td>Â </td>
    </tr>
    <tr>
      <td><code class="language-plaintext highlighter-rouge">Cardinality(set)</code></td>
      <td>æ±‚setçš„é•¿åº¦</td>
      <td><code class="language-plaintext highlighter-rouge">Cardinality({1..8)</code> =&gt; 8</td>
      <td>éœ€è¦å¯¼å…¥åŒ… <code class="language-plaintext highlighter-rouge">FiniteSets</code></td>
    </tr>
  </tbody>
</table>

<p>è¿˜æœ‰ä¸¤ç§é›†åˆçš„éå†å’Œæ˜ å°„è¡¨è¾¾æ–¹å¼ã€‚</p>

<h4 id="é›†åˆè¿‡æ»¤filteræ–¹å¼">é›†åˆè¿‡æ»¤ï¼ˆfilterï¼‰æ–¹å¼</h4>

<p>é›†åˆè¿‡æ»¤çš„åŸºæœ¬è¡¨è¾¾æ–¹å¼ä¸ºï¼š<code class="language-plaintext highlighter-rouge">{x \in set: conditional}</code> ï¼Œæ„ä¹‰æ˜¯æ ¹æ®æ¡ä»¶ç­›é€‰é›†åˆä¸­çš„å…ƒç´ ã€‚</p>

<p>æ¯”å¦‚è¯´ï¼š</p>

<p><code class="language-plaintext highlighter-rouge">{x \in 1..8: x + 2 &gt; 3}</code> =&gt; <code class="language-plaintext highlighter-rouge">{2, 3, 4, 5, 6, 7, 8}</code></p>

<blockquote>
  <p>[!faq] ä¸è¿‡ä¸ºä»€ä¹ˆ <code class="language-plaintext highlighter-rouge">1..8</code> åŠ ä¸Šæ‹¬å·å°±ä¼šéæ³•å‘¢ï¼Ÿ</p>
</blockquote>

<p><code class="language-plaintext highlighter-rouge">{x \in {1..8}: x + 2 &gt; 3}</code> =&gt; wrong</p>

<blockquote>
  <p>[!bug] The `Evaluate Constant Expressionï¿½ sectionï¿½s evaluation failed.</p>

  <p>Attempted to apply the operator overridden by the Java method
public static tlc2.value.IntValue
tlc2.module.Integers.Plus(tlc2.value.IntValue,tlc2.value.IntValue), but it produced the following error:
argument type mismatch</p>
</blockquote>

<p>ç±»å‹ä¸åŒ¹é…â€¦â€¦javaå†™çš„ã€‚</p>

<p>å¦‚æœåœ¨å¤–é¢èµ‹å€¼çš„æ—¶å€™å‘¢ï¼Ÿ</p>

<p><code class="language-plaintext highlighter-rouge">1 \in {1..3}</code> ä¸ä¼šè¿”å› <code class="language-plaintext highlighter-rouge">TRUE</code> ã€‚</p>

<p>æ¢è¨€ä¹‹ <code class="language-plaintext highlighter-rouge">1..3</code> æœ¬èº«å°±æ˜¯ä¸€ä¸ªé›†åˆã€‚</p>

<p>éªŒè¯ä¸€ä¸‹å§ï¼š</p>

<p><code class="language-plaintext highlighter-rouge">Cardinality({1..3})</code> =&gt; 1</p>

<p><code class="language-plaintext highlighter-rouge">Cardinality(1..3)</code> =&gt; 3</p>

<p>æœç„¶å¦‚æ­¤ã€‚</p>

<p>æ‰€ä»¥å®é™…ä¸Š <code class="language-plaintext highlighter-rouge">{x \in {1..8}: ...}</code> ä¸­ xçš„éå†å®é™…ä¸Šä¼šéå†åˆ° <code class="language-plaintext highlighter-rouge">{1, 2, 3, 4, 5, 6, 7, 8}</code> è¿™ä¸ªé›†åˆæœ¬èº«ã€‚</p>

<p>è€Œåœ¨åé¢çš„ <code class="language-plaintext highlighter-rouge">x + 2 &gt; 3</code> è¿™ä¸ªåˆ¤æ–­ä¸­ï¼Œ <code class="language-plaintext highlighter-rouge">&gt;</code> éœ€è¦ä¸¤ä¸ªå‚æ•°ä¸ºæ•´æ•°ï¼Œç¬¬ä¸€ä¸ªä¸ºé›†åˆï¼Œæ‰€ä»¥å‡ºç°ç±»å‹é”™è¯¯ã€‚</p>

<p>å¥½å§ã€‚</p>

<h4 id="é›†åˆæ˜ å°„mapæ–¹å¼">é›†åˆæ˜ å°„ï¼ˆmapï¼‰æ–¹å¼</h4>

<p>é›†åˆæ˜ å°„çš„è¡¨è¾¾æ–¹å¼æ˜¯ï¼š<code class="language-plaintext highlighter-rouge">{expression: x \in set}</code>ï¼Œæ„ä¹‰æ˜¯å¯¹é›†åˆä¸­æ¯ä¸ªå…ƒç´ è¿›è¡ŒæŒ‡å®šåŠ¨ä½œçš„å¤„ç†ã€‚</p>

<p>æµ‹è¯•ä¸€ä¸‹ï¼š</p>

<p><code class="language-plaintext highlighter-rouge">{x + 1 : x \in 1..3}</code> =&gt; <code class="language-plaintext highlighter-rouge">{4, 5, 6}</code></p>

<h4 id="å¯¹æ¯”rifå’Œtlaçš„é›†åˆæ“ä½œ">å¯¹æ¯”rifå’Œtla+çš„é›†åˆæ“ä½œ</h4>

<blockquote>
  <p>[!faq] é‚£ä¹ˆé›†åˆè¿‡æ»¤ä¸é›†åˆæ˜ å°„ä¸rifçš„åŒºåˆ«ä½•åœ¨å‘¢ï¼Ÿ</p>
</blockquote>

<p>ä¹‹å‰æˆ‘æ›¾ç»ç¼–å†™è¿‡rifå‡½æ•°ï¼Œå¤§æ¦‚æ ¼å¼æ˜¯ï¼š</p>

<div class="language-lisp highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="p">(</span><span class="nv">rlb-rif</span> <span class="o">'</span><span class="p">(</span><span class="mi">1</span><span class="o">,</span> <span class="mi">2</span><span class="o">,</span> <span class="mi">3</span><span class="p">)</span> <span class="o">'</span><span class="p">()</span>
		 <span class="p">(</span><span class="nv">rlb-fip</span> <span class="p">(</span><span class="nv">r</span> <span class="nv">f</span><span class="p">)</span> <span class="p">(</span><span class="nb">&gt;</span> <span class="p">(</span><span class="nb">car</span> <span class="nv">r</span><span class="p">)</span> <span class="mi">2</span><span class="p">))</span>
		 <span class="p">(</span><span class="nv">rlb-ted</span> <span class="p">(</span><span class="nv">r</span> <span class="nv">f</span><span class="p">)</span> <span class="p">(</span><span class="nb">+</span> <span class="mi">1</span> <span class="p">(</span><span class="nb">car</span> <span class="nv">r</span><span class="p">))))</span>
<span class="c1">;;=&gt;'(1)</span>
</code></pre></div></div>

<p>tla+ä¸­çš„è¿‡æ»¤å’Œæ˜ å°„åœ¨æˆ‘è¿™é‡Œåˆ™æ˜¯fipå’Œtedã€‚</p>

<p>ä¸è¿‡æˆ‘è¿˜èƒ½æ‰¾åˆ°ä¹‹å‰çš„ä»£ç å—ï¼Ÿ</p>

<p>æ‰¾åˆ°äº†ï¼š</p>

<div class="language-lisp highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">;;åŠ¨ä½œæ‰§è¡Œå±€éƒ¨å‡½æ•°</span>
  <span class="p">(</span><span class="nb">defvar</span> <span class="nv">rlb-tedo</span> <span class="mi">0</span><span class="p">)</span>
  <span class="p">(</span><span class="nv">rlb-solimi</span> <span class="nv">rlb-ted</span> <span class="p">(</span><span class="nv">hisos</span> <span class="k">&amp;rest</span> <span class="nv">body</span><span class="p">)</span>
              <span class="o">`</span><span class="p">(</span><span class="k">progn</span>
                 <span class="p">(</span><span class="nb">setf</span> <span class="nv">rlb-tedo</span> <span class="p">(</span><span class="nb">+</span> <span class="mi">1</span> <span class="nv">rlb-tedo</span><span class="p">))</span>
                 <span class="p">(</span><span class="nb">setf</span> <span class="nv">rlb-rinafo</span> <span class="p">(</span><span class="nb">+</span> <span class="mi">1</span> <span class="nv">rlb-rinafo</span><span class="p">))</span>
                 <span class="p">(</span><span class="k">lambda</span> <span class="o">,</span><span class="nv">hisos</span> <span class="o">,@</span><span class="nv">body</span><span class="p">)))</span>

<span class="p">(</span><span class="nv">rlb-solimi</span> <span class="err">æ€åŠ¿</span> <span class="p">(</span><span class="nv">hisos</span> <span class="k">&amp;rest</span> <span class="nv">body</span><span class="p">)</span>
            <span class="o">`</span><span class="p">(</span><span class="nv">rlb-ted</span> <span class="o">,</span><span class="nv">hisos</span> <span class="o">,@</span><span class="nv">body</span><span class="p">))</span>

<span class="c1">;;æ¡ä»¶åˆ¤æ–­å±€éƒ¨å‡½æ•°</span>
  <span class="p">(</span><span class="nb">defvar</span> <span class="nv">rlb-fipo</span> <span class="mi">0</span><span class="p">)</span>
  <span class="p">(</span><span class="nv">rlb-solimi</span> <span class="nv">rlb-fip</span> <span class="p">(</span><span class="nv">hisos</span> <span class="k">&amp;rest</span> <span class="nv">body</span><span class="p">)</span>
              <span class="o">`</span><span class="p">(</span><span class="k">progn</span>
                 <span class="p">(</span><span class="nb">setf</span> <span class="nv">rlb-fcipo</span> <span class="p">(</span><span class="nb">+</span> <span class="mi">1</span> <span class="nv">rlb-fipo</span><span class="p">))</span>
                 <span class="p">(</span><span class="nb">setf</span> <span class="nv">rlb-rinafo</span> <span class="p">(</span><span class="nb">+</span> <span class="mi">1</span> <span class="nv">rlb-rinafo</span><span class="p">))</span>
                 <span class="p">(</span><span class="k">lambda</span> <span class="o">,</span><span class="nv">hisos</span> <span class="o">,@</span><span class="nv">body</span><span class="p">)))</span>

<span class="p">(</span><span class="nv">rlb-solimi</span> <span class="err">æƒ…å¢ƒ</span> <span class="p">(</span><span class="nv">hisos</span> <span class="k">&amp;rest</span> <span class="nv">body</span><span class="p">)</span>
            <span class="o">`</span><span class="p">(</span><span class="nv">rlb-fip</span> <span class="o">,</span><span class="nv">hisos</span> <span class="o">,@</span><span class="nv">body</span><span class="p">))</span>

<span class="c1">;;è‡ªæ­¤è€Œå½¼æŒ‰ç…§æŒ‡å®šæ¡ä»¶å’ŒåŠ¨ä½œå¤„ç†åˆ—è¡¨</span>
  <span class="p">(</span><span class="nb">defvar</span> <span class="nv">rlb-rifo</span> <span class="mi">0</span><span class="p">)</span>
  <span class="p">(</span><span class="nb">defun</span> <span class="nv">rlb-rifa_loyo</span> <span class="p">(</span><span class="nv">rino</span> <span class="nv">famo</span> <span class="nv">fipo</span> <span class="nv">tedo</span><span class="p">)</span>
    <span class="p">(</span><span class="k">if</span> <span class="p">(</span><span class="nb">equal</span> <span class="no">nil</span> <span class="p">(</span><span class="nb">equal</span> <span class="p">(</span><span class="nb">car</span> <span class="nv">rino</span><span class="p">)</span> <span class="no">nil</span><span class="p">))</span>
        <span class="p">(</span><span class="nv">rlb-rif</span> <span class="p">(</span><span class="nb">cdr</span> <span class="nv">rino</span><span class="p">)</span>
                 <span class="p">(</span><span class="k">if</span> <span class="p">(</span><span class="nb">funcall</span> <span class="nv">fipo</span> <span class="nv">rino</span> <span class="nv">famo</span><span class="p">)</span>
                     <span class="p">(</span><span class="nb">append</span>
                      <span class="p">(</span><span class="nb">list</span> <span class="p">(</span><span class="nb">funcall</span> <span class="nv">tedo</span> <span class="nv">rino</span> <span class="nv">famo</span><span class="p">))</span> <span class="nv">famo</span><span class="p">)</span>
                     <span class="nv">famo</span><span class="p">)</span>
                 <span class="nv">fipo</span> <span class="nv">tedo</span><span class="p">)</span>
        <span class="p">(</span><span class="k">progn</span>
          <span class="p">(</span><span class="nb">setf</span> <span class="nv">rlb-rifo</span> <span class="p">(</span><span class="nb">+</span> <span class="mi">1</span> <span class="nv">rlb-rifo</span><span class="p">))</span>
          <span class="p">(</span><span class="nb">setf</span> <span class="nv">rlb-rinafo</span> <span class="p">(</span><span class="nb">+</span> <span class="mi">1</span> <span class="nv">rlb-rinafo</span><span class="p">))</span>
          <span class="nv">famo</span><span class="p">)))</span>
  <span class="p">(</span><span class="nv">rlb-solimi</span> <span class="nv">rlb-rif</span> <span class="p">(</span><span class="nv">rino</span> <span class="nv">famo</span> <span class="nv">fipo</span> <span class="nv">tedo</span><span class="p">)</span>
    <span class="o">`</span><span class="p">(</span><span class="nv">rlb-rifa_loyo</span> <span class="o">,</span><span class="nv">rino</span> <span class="o">,</span><span class="nv">famo</span> <span class="o">,</span><span class="nv">fipo</span> <span class="o">,</span><span class="nv">tedo</span><span class="p">))</span>

<span class="p">(</span><span class="nv">rlb-solimi</span> <span class="err">è¿ˆè¿›</span> <span class="p">(</span><span class="nv">rino</span> <span class="nv">famo</span> <span class="nv">fipo</span> <span class="nv">tedo</span><span class="p">)</span>
            <span class="o">`</span><span class="p">(</span><span class="nv">rlb-rif</span> <span class="o">,</span><span class="nv">rino</span> <span class="o">,</span><span class="nv">famo</span> <span class="o">,</span><span class="nv">fipo</span> <span class="o">,</span><span class="nv">tedo</span><span class="p">))</span>

</code></pre></div></div>

<p>é‚£ä¹ˆtla+èƒ½ä¸èƒ½æŠŠéå†å’Œè¿‡æ»¤ç»“åˆåœ¨ä¸€èµ·å‘¢ï¼Ÿ</p>

<p><code class="language-plaintext highlighter-rouge">{e + 3 : e \in {e \in 1..9 : e &gt; 3}}</code> =&gt; <code class="language-plaintext highlighter-rouge">{7, 8, 9, 10, 11, 12}</code></p>

<p>åŒæ ·çš„åŠŸèƒ½ï¼Œåœ¨rlispä¸­åˆ™è¦è¡¨è¾¾ä¸ºï¼š</p>

<div class="language-lisp highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="p">(</span><span class="nv">rlb-rif</span> <span class="o">'</span><span class="p">(</span><span class="mi">1</span><span class="o">,</span> <span class="mi">2</span><span class="o">,</span> <span class="mi">3</span><span class="o">,</span> <span class="mi">4</span><span class="o">,</span> <span class="mi">5</span><span class="o">,</span> <span class="mi">6</span><span class="o">,</span> <span class="mi">7</span><span class="o">,</span> <span class="mi">8</span><span class="o">,</span> <span class="mi">9</span><span class="p">)</span> <span class="o">'</span><span class="p">()</span>
		 <span class="p">(</span><span class="nv">rlb-fip</span> <span class="p">(</span><span class="nv">r</span> <span class="nv">f</span><span class="p">)</span> <span class="p">(</span><span class="nb">&gt;</span> <span class="p">(</span><span class="nb">car</span> <span class="nv">r</span><span class="p">)</span> <span class="mi">3</span><span class="p">))</span>
		 <span class="p">(</span><span class="nv">rlb-ted</span> <span class="p">(</span><span class="nv">r</span> <span class="nv">f</span><span class="p">)</span> <span class="p">(</span><span class="nb">+</span> <span class="p">(</span><span class="nb">car</span> <span class="nv">r</span><span class="p">)</span> <span class="mi">3</span><span class="p">)))</span>
<span class="c1">;;=&gt;'(7, 8, 9, 10, 11, 12)</span>
</code></pre></div></div>

<p>ä¸è¿‡æœ€å¤§çš„åŒºåˆ«ä¹Ÿè®¸åœ¨äºï¼Œtla+ä¸­é›†åˆè¦æ±‚æ‰€æœ‰å…ƒç´ éƒ½æ˜¯ç›¸åŒçš„ç±»å‹ã€‚ä½†æ˜¯ï¼Œrlispä¸­çš„å…ƒç´ åˆ™æ˜¯ä»»æ„çš„ã€‚</p>

<h3 id="3å…ƒç»„">ï¼ˆ3ï¼‰å…ƒç»„</h3>

<h4 id="å…ƒç»„è¡¨è¾¾å¼">å…ƒç»„è¡¨è¾¾å¼</h4>

<p>tla+ä¸­çš„å…ƒç»„è¡¨è¾¾å½¢å¼ä¸ºï¼š<code class="language-plaintext highlighter-rouge">&lt;&lt;element_1, element_2, ...&gt;&gt;</code>ã€‚</p>

<p>å’Œé›†åˆä¸åŒï¼Œtla+çš„å…ƒç»„ä¸éœ€è¦æ‰€æœ‰å…ƒç´ éƒ½ä¸ºç›¸åŒçš„ç±»å‹ã€‚</p>

<p>å¯ä»¥é€šè¿‡ <code class="language-plaintext highlighter-rouge">å…ƒç»„å[ä½ç½®]</code> çš„æ–¹å¼æ¥è®¿é—®å…ƒç»„ä¸­çš„å…ƒç´ ã€‚ä¾‹å¦‚ï¼š</p>

<p>å…ˆè¿›è¡Œç®€å•æµ‹è¯•æ¥çœ‹çœ‹å§ã€‚</p>

<p><code class="language-plaintext highlighter-rouge">&lt;&lt;1, 2, 1..3&gt;&gt;[3]</code> =&gt; <code class="language-plaintext highlighter-rouge">1..3</code>
<code class="language-plaintext highlighter-rouge">&lt;&lt;1, {1, 3}, 2&gt;&gt;[2]</code> =&gt; <code class="language-plaintext highlighter-rouge">{1, 3}</code></p>

<p>ç„¶ååœ¨æ¨¡å‹ä¸­æµ‹è¯•ï¼š</p>

<pre><code class="language-tla+">
(*--algorithm t2
    variables
        a = &lt;&lt;1, 2, {1, 4}&gt;&gt;;
        
define
    Famo == &lt;&gt;(a = {1, 4})
end define;

begin
    test:
        a := a[3];
end algorithm;*)   

</code></pre>

<blockquote>
  <p>ç±»å‹åŒ¹é…é”™è¯¯ï¼
Attempted to check equality of the function Â«1, 2, {1, 4}Â» with the value:
{1, 4}
While working on the initial state:
/\ a = Â«1, 2, {1, 4}Â»
/\ pc = â€œtestâ€</p>
</blockquote>

<p><del>ä¹Ÿå°±æ˜¯è¯´ï¼Œåœ¨testæ‰§è¡Œå‰ï¼Œaä»ä¸ºå…ƒç»„æ—¶ï¼Œå¯¹äºæ—¶é—´å±æ€§Famoçš„æ£€æµ‹è¦æ±‚å…ƒç»„å’Œå…ƒç´ é€šè¿‡ <code class="language-plaintext highlighter-rouge">=</code> ç›¸åŒ¹é…ï¼Œç»“æœæŠ¥é”™ã€‚</del> å› ä¸º <code class="language-plaintext highlighter-rouge">&lt;&gt;P</code> è¿™ç§è¡¨è¾¾è¦æ±‚æ—¶é—´å±æ€§é¦–å°¾çŠ¶æ€ä¸ºçœŸï¼Œæ‰€ä»¥aä¸€å¼€å§‹èµ‹å€¼ä¸º <code class="language-plaintext highlighter-rouge">&lt;&lt;1, 2, {1, 4}&gt;&gt;</code> æ³¨å®šäº†å®ƒçš„é”™è¯¯ã€‚</p>

<p>å¦ä¸€ç§æ£€æµ‹æ–¹å¼ï¼š</p>

<pre><code class="language-tla+">(*--algorithm t2
    variables
        a = &lt;&lt;1, 2, 3&gt;&gt;;
        b = 3;
        
define
    Famo == &lt;&gt;(b = 3)
end define;

begin
    p1: b := a[1];
    p2: b := a[2];
    p3: b := a[3];
end algorithm;*) 
</code></pre>

<h4 id="å…ƒç»„æ“ä½œç¬¦">å…ƒç»„æ“ä½œç¬¦</h4>

<p>tla+ æä¾›äº† <code class="language-plaintext highlighter-rouge">Sequences</code> æ‰©å±•åŒ…ï¼ŒåŒ…æ‹¬ä»¥ä¸‹æ“ä½œç¬¦ï¼š</p>

<p>| æ“ä½œç¬¦              | æ„ä¹‰            | ä¾‹å­  |
| â€”â€”â€”â€”â€”- | â€”â€”â€”â€”- | â€” |
| <code class="language-plaintext highlighter-rouge">Head(sequence)</code> | è·å–åºåˆ—çš„ç¬¬ä¸€ä¸ªå…ƒç´     |     |
| <code class="language-plaintext highlighter-rouge">Tail(sequence)</code> |               |     |
| <code class="language-plaintext highlighter-rouge">Append(seq, x)</code> |               |     |
| <code class="language-plaintext highlighter-rouge">seq1 \o seq2</code>   | å°†åºåˆ—1å’Œåºåˆ—2ç»“åˆåœ¨ä¸€èµ· |     |
| <code class="language-plaintext highlighter-rouge">Len(seq)</code>       | è·å–åºåˆ—é•¿åº¦        |     |</p>
<h3 id="4ç»“æ„ä½“structs">ï¼ˆ4ï¼‰ç»“æ„ä½“ï¼ˆStructsï¼‰</h3>

<p>åœ¨tlaä¸­ï¼Œç»“æ„ä½“çš„è¡¨è¾¾æ–¹å¼ä¸ºï¼š<code class="language-plaintext highlighter-rouge">[key_1 |-&gt; val_1, key_2 |-&gt; val_2, ...]</code></p>

<p>ç»“æ„ä½“ä¸­çš„å…ƒç´ å¯ä»¥é€šè¿‡ <code class="language-plaintext highlighter-rouge">ç»“æ„ä½“åç§°.é”®å</code> è¿›è¡Œè®¿é—®ã€‚</p>

<p>ä¾‹å¦‚ï¼š</p>

<pre><code class="language-tla+">(*--algorithm t2
    variables
        Alice = [name |-&gt; "Alice", age |-&gt; 23];
        See = 0;
        
define
    Famo == &lt;&gt;(Alice.name = "Alice")
end define;

begin
    p1: See := Alice.name;
    p2: See := Alice.age;
    p3: See := Alice.name;
end algorithm;*)  
</code></pre>

<p>æµ‹è¯•é€šè¿‡ï¼ŒAliceçš„åå­—è‡ªå§‹è‡³ç»ˆæ˜¯â€Aliceâ€ã€‚</p>

<h2 id="q3ç®—æ³•ä¸»ä½“">Q3ï¼šç®—æ³•ä¸»ä½“</h2>

<h3 id="1assignment">ï¼ˆ1ï¼‰assignment</h3>

<p>Pluscal é€šè¿‡ <code class="language-plaintext highlighter-rouge">x := value</code> è¡¨è¾¾æ¥ä¸ºå˜é‡èµ‹æ–°å€¼ã€‚</p>

<h3 id="2assert">ï¼ˆ2ï¼‰assert</h3>

<p>ä½¿ç”¨assertè¯­å¥éœ€è¦å¯¼å…¥ <code class="language-plaintext highlighter-rouge">TLC</code> æ‰©å±•åŒ…ã€‚</p>

<p>assertå¯ä»¥é€šè¿‡å‡å®šæŸä¸ªå˜é‡çš„å€¼æ¥åˆ¤æ–­ç³»ç»ŸçŠ¶æ€ï¼Œç”¨äºbeginä¹‹åçš„éƒ¨åˆ†ã€‚ä¾‹å¦‚æˆ‘è®¤ä¸ºåœ¨p2çŠ¶æ€Aliceçš„åå­—æ˜¯bobï¼Œç»“æœå‡ºé”™ï¼š</p>

<pre><code class="language-tla+">
EXTENDS Integers, FiniteSets, TLC

(*--algorithm t2
    variables
        Alice = [name |-&gt; "Alice", age |-&gt; 23];
        See = 0;
        
define
    Famo == &lt;&gt;(Alice.name = "Alice")
end define;

begin
    p1: See := Alice.name;
    p2: See := Alice.age;
    assert Alice.name = "bob";
    p3: See := Alice.name;
end algorithm;*)   
</code></pre>

<p><img src="/img/user/%E5%9B%BE%E7%89%87/Pasted%20image%2020240318154452.png" alt="Pasted image 20240318154452.png" /></p>

<h3 id="3skip">ï¼ˆ3ï¼‰skip</h3>

<p>åœ¨å‡½æ•°ä¸»ä½“ä¸­ï¼Œskipè¡¨ç¤ºä»€ä¹ˆéƒ½ä¸åšã€‚ä¾‹å¦‚ï¼š</p>

<pre><code class="language-tla+">
EXTENDS Integers, FiniteSets, TLC

(*--algorithm t2
    variables
        Alice = [name |-&gt; "Alice", age |-&gt; 23];
        
define
    Famo == &lt;&gt;(Alice.name = "Alice")
end define;

begin
    AfterOneYear: Alice.age := Alice.age + 1;
    AfterThreeYear: Alice.age := Alice.age + 3;
    AfterTenYear: Alice.age := Alice.age + 10;
    assert Alice.age = 27;
end algorithm;*)   
</code></pre>

<p><img src="/img/user/%E5%9B%BE%E7%89%87/Pasted%20image%2020240318155412.png" alt="Pasted image 20240318155412.png" /></p>

<p>åœ¨ç»è¿‡åå¹´æ—¶ï¼ŒAliceçš„å¹´é¾„ç”±äº+10è€Œæˆä¸º37ï¼Œä¸åŒäºå‡å®šã€‚ä½†æ˜¯å¦‚æœåœ¨ç»è¿‡åå¹´æ—¶ä½¿ç”¨skipçš„è¯â€”â€”å´å¯ä»¥é€šè¿‡æµ‹è¯•ã€‚</p>

<h3 id="4if">ï¼ˆ4ï¼‰if</h3>

<p>åŸºæœ¬æ ¼å¼ï¼š</p>

<pre><code class="language-tla+">if condition1 then
Â Â body
elsif condition2 then
Â Â body
else
Â Â body
end if;
</code></pre>

<h3 id="5while">ï¼ˆ5ï¼‰while</h3>

<p>åŸºæœ¬æ ¼å¼ï¼š</p>

<pre><code class="language-tla+">while condition do
Â Â body
end while;
</code></pre>

<h3 id="6macros">ï¼ˆ6ï¼‰macros</h3>

<p>tla+çš„macroæ„Ÿè§‰å¾ˆåƒå‡½æ•°ã€‚éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œmacroçš„å®šä¹‰åœ¨defineä¹‹åã€‚</p>

<pre><code class="language-tla+">macro name(arg1, arg2) begin
Â Â \* assignments
end macro;
begin
Â Â name(x, y);
end algorithm;
</code></pre>

<p>é‚£ä¹ˆå¯ä¸å¯ä»¥é€šè¿‡ macro æ¥å®šä¹‰foviså‘¢ï¼Ÿ</p>

<p>å…ˆå®šä¹‰ IMMPï¼ˆIsMiaMoviaPimoï¼Œæ­¤é›†å¤„åœ¨ç»´ç³»ä½å›¾ä¸­ï¼‰å§ï¼š</p>

<pre><code class="language-tla+">(*--algorithm t2
    variables
        Moko = [mio |-&gt; {1, 2, 3, 8}, vio |-&gt; {1, 2}, ilio |-&gt; {1, 2, 3, 4, 8}];
        Judgement = FALSE

define
    Famo == &lt;&gt;(Judgement = FALSE)
end define;

macro IMMP(Moko) begin
    Judgement := \A m \in Moko.mio : m \in Moko.ilio
end macro;

begin
P1: IMMP(Moko);
end algorithm;*)  
</code></pre>

<p><code class="language-plaintext highlighter-rouge">Moko.mio</code>ä¸­çš„å…ƒç´ éƒ½åœ¨ <code class="language-plaintext highlighter-rouge">Moko.ilio</code> ä¸­ï¼ŒIMMPåº”ä¸ºå‡ï¼Œæµ‹è¯•é€šè¿‡ã€‚æ¥ä¸‹æ¥æ¢å‡ ç»„æ•°æ®è¯•è¯•çœ‹å§ã€‚</p>

<p>| Moko.mio       | Moko.ilio      | Judgement | è§£é‡Š          |
| â€”â€”â€”â€”â€“ | â€”â€”â€”â€”â€“ | â€”â€”â€” | â€”â€”â€”â€“ |
| <code class="language-plaintext highlighter-rouge">{1, 2, 3, 8}</code> | <code class="language-plaintext highlighter-rouge">{1, 2, 3, 4}</code> | <code class="language-plaintext highlighter-rouge">FALSE</code>   | æ­¤é›†çš„8ä¸åœ¨åŸŸä¸­    |
| <code class="language-plaintext highlighter-rouge">{1, 2, 3}</code>    | <code class="language-plaintext highlighter-rouge">{1, 2, 3, 4}</code> | <code class="language-plaintext highlighter-rouge">TRUE</code>    | æ­¤é›†çš„æ‰€æœ‰å…ƒç´ éƒ½åœ¨åŸŸä¸­ |
ç”±æ­¤å¾—åˆ° IMMPçš„å®å®šä¹‰ï¼š</p>

<pre><code class="language-tla+">macro IMMP(Moko) begin
    Judgement := \A m \in Moko.mio : m \in Moko.ilio
end macro;
</code></pre>

<p>é‚£ä¹ˆåŒæ ·å¯ä»¥å¾—åˆ°IVMPçš„å®å®šä¹‰ï¼š</p>

<pre><code class="language-tla+">macro IVMP(Moko) begin
    Judgement := \A m \in Moko.vio : m \in Moko.ilio
end macro;
</code></pre>

<p>ç°åœ¨å¯ä»¥å¾—åˆ°IFVPçš„å®å®šä¹‰ï¼š</p>

<pre><code class="language-tla+">macro IFVP(Moko) begin
    Judgement := IMMP(Moko) /\ IVMP(Moko)
end macro;
</code></pre>

<p>ä¸å¯¹ï¼Œè¿™æ ·ä¼šå‡ºç°é”™è¯¯ï¼Œå› ä¸ºIMMPå’ŒIVMPéƒ½ä¼šä¿®æ”¹Judgementçš„å€¼ã€‚</p>

<p>ä¸ºä»€ä¹ˆä¸èƒ½è®©å®å‘½ä»¤æœ¬èº«è¿”å›å€¼å‘¢ï¼Ÿ</p>

<p>ä¸èƒ½ï¼ŒPlucalçš„å®å‘½ä»¤åªèƒ½æ˜¯ <code class="language-plaintext highlighter-rouge">:=</code> çš„å½¢å¼ã€‚</p>

<p>é‚£ä¹ˆä¸ºä»€ä¹ˆä¸æŠŠIVMPä¹‹ç±»çš„è¯­å¥æ”¾åœ¨å®šä¹‰é‡Œå‘¢ï¼Ÿ</p>

<pre><code class="language-tla+">EXTENDS Integers, FiniteSets, TLC

(*--algorithm t2
    variables
        Mok = [mio |-&gt; {1, 2, 3, 8}, vio |-&gt; {1, 2}, ilio |-&gt; {1, 2, 3, 4}],
        Judgement = TRUE;

define
    IMMP(Moko) == \A m \in Moko.mio : m \in Moko.ilio
    IVMP(Moko) == \A m \in Moko.vio : m \in Moko.ilio
end define;

begin
P1: Judgement := IMMP(Mok);

end algorithm;*)   
</code></pre>

<p>ä¸å˜é‡è®¾ç½®ä¸ºJudgementï¼Œæµ‹è¯•æ•°æ®å¦‚ä¸‹ï¼š</p>

<table>
  <thead>
    <tr>
      <th>Moko.mio</th>
      <th>Moko.ilio</th>
      <th>Judgement</th>
      <th>è§£é‡Š</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td><code class="language-plaintext highlighter-rouge">{1, 2, 3, 8}</code></td>
      <td><code class="language-plaintext highlighter-rouge">{1, 2, 3, 4}</code></td>
      <td><code class="language-plaintext highlighter-rouge">FALSE</code></td>
      <td>æ­¤é›†çš„8ä¸åœ¨åŸŸä¸­</td>
    </tr>
    <tr>
      <td><code class="language-plaintext highlighter-rouge">{1, 2, 3}</code></td>
      <td><code class="language-plaintext highlighter-rouge">{1, 2, 3, 4}</code></td>
      <td><code class="language-plaintext highlighter-rouge">TRUE</code></td>
      <td>æ­¤é›†çš„æ‰€æœ‰å…ƒç´ éƒ½åœ¨åŸŸä¸­</td>
    </tr>
  </tbody>
</table>

<p>è¿™æ ·å®šä¹‰è¦æ¯”é›†åˆå·®ä¹‹ç±»çš„ç®€å•å¤šäº†ã€‚</p>

<h2 id="q4å¤šç§å¼€å§‹çŠ¶æ€">Q4ï¼šå¤šç§å¼€å§‹çŠ¶æ€</h2>

<p>ä»£ç æ ¼å¼ï¼š</p>

<pre><code class="language-tla+">variables x in set
</code></pre>

<h2 id="q5with-å’Œ-either">Q5ï¼šWith å’Œ Either</h2>

<p>Either è¯­æ³•æ ¼å¼</p>

<pre><code class="language-tla+">either
Â Â \* branch 1
or
Â Â \* branch 2
Â Â \* ...
or
Â Â \* branch n
end either;
</code></pre>

<p>With è¯­æ³•æ ¼å¼</p>

<pre><code class="language-tla+">with var = value do
Â Â \* body
end with;
\* or
with var \in set do
Â Â \* body
end with;
</code></pre>

<h2 id="å‚è€ƒ">å‚è€ƒ</h2>
<ul>
  <li>Pratical TLA+</li>
</ul>]]></content><author><name>ç”²ä¸</name></author><category term="TLAplus" /><summary type="html"><![CDATA[æ¢ç´¢ä¸€ä¸‹ tlaplus pluscal çš„åŸºæœ¬åŠŸèƒ½ã€‚]]></summary></entry></feed>